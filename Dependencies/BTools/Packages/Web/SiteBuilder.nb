Notebook[{

Cell[CellGroupData[{
Cell["BuildSite", "CodeSection",
 CellChangeTimes->{{3.712582040881816*^9, 
  3.712582046912613*^9}},ExpressionUUID->"9fd7a682-c333-40e6-becd-\
8d68e215fd41"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "usage"}], "=", "\"\<Builds a website\>\""}],
   ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteDeploy", "::", "usage"}], "=", 
   "\"\<Deploys a directory to the web\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"95e914ee-0478-4f91-8ee0-8a8233bb0653"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSites", "::", "usage"}], "=", "\"\<Lists websites\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteOptions", "::", "usage"}], "=", 
   "\"\<Gets configuration options for a website\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteSetOptions", "::", "usage"}], "=", 
   "\"\<Sets configuration options for a website\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"503c4678-e63f-40a8-92de-bf2ecc068ad0"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInitialize", "::", "usage"}], "=", 
   "\"\<Makes a new website in a directory\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteNewContent", "::", "usage"}], "=", 
   "\"\<Makes a new post notebook\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteNewTableOfContents", "::", "usage"}], "=", 
   "\"\<Makes a new Table of Contents\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"126b20e6-30e7-4b1c-a99d-14002c8a59d8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteThemes", "::", "usage"}], "=", "\"\<\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFindTheme", "::", "usage"}], "=", 
   "\"\<Finds the theme for a website\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"fbc14098-2e08-4354-a5da-574abf7a71ba"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteContent", "::", "usage"}], "=", 
   "\"\<Finds content in a site\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSitePages", "::", "usage"}], "=", 
   "\"\<Finds pages in a site\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSitePosts", "::", "usage"}], "=", 
   "\"\<Finds posts in a site\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"2fd539c9-e754-42f9-917f-e0ab1116d9eb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$WebSiteDirectory", "::", "usage"}], "=", "\n", "\t", 
   "\"\<The base directory for websites\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$WebSitePath", "::", "usage"}], "=", "\n", "\t", 
   "\"\<The path for finding websites\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$WebSiteThemePath", "::", "usage"}], "=", "\n", "\t", 
   "\"\<The path for website themes\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$WebSiteBuildErrors", "::", "usage"}], "=", "\n", "\t", 
   "\"\<A stack of errors encountered in the build process\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"a8b22438-fdbf-4e43-aaec-d7363519d0dc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"fd37354b-ad36-4fea-abd5-\
77b433d034c8"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Config\[RightFloor]", "CodeSubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.71278761272464*^9, 
  3.7127876133329*^9}},ExpressionUUID->"5906d605-4ebe-4596-a22d-41950b9c8cd2"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteDirectory\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a20ed19c-c7ac-4371-9c0f-e485616248ef"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteDirectory", "=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{
     "$UserBaseDirectory", ",", "\n", "\t\t", "\"\<ApplicationData\>\"", ",", 
      "\n", "\t\t", "\"\<WebSites\>\""}], "\n", "\t\t", "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"49cb9948-5f11-4b58-a90a-5261055180b1"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSitePath\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"1c6c282b-200e-4fd9-8dfd-e4de362039ee"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSitePath", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", "$WebSiteDirectory", "\n", "\t\t", "}"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"63f1bd03-a4a1-43a8-9c74-8d51b14c6915"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteThemePath\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"c77e77b9-f911-4203-ba9f-0917d9b63802"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "@", 
      RowBox[{"OwnValues", "[", "$WebThemesURLBase", "]"}]}], "===", "0"}], 
    ",", "\n", "\t", 
    RowBox[{"$WebThemesURLBase", ":=", "\n", "\t\t", 
     RowBox[{"$WebThemesURLBase", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
       "CloudObject", "[", 
        "\"\<user:b3m2a1.paclets/PacletServer/Resources/SiteBuilder/Themes\>\"\
", "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}]}]}]}], "\n", "\t", "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$WebSiteTempThemeDir", "=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{
     "$TemporaryDirectory", ",", " ", "\"\<SiteBuilder_tmp\>\"", ",", " ", 
      "\"\<Themes\>\""}], "}"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$WebSiteThemePath", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"PackageFilePath", "[", 
      RowBox[{"\"\<Resources\>\"", ",", " ", "\"\<Themes\>\""}], "]"}], ",", 
     "\n", "\t\t", 
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"$WebSiteDirectory", ",", " ", "\"\<Themes\>\""}], "}"}]}], 
     ",", "\n", "\t\t", "$WebSiteTempThemeDir"}], "\n", "\t\t", "}"}]}], 
  ";"}]}], \
"CodeInput",ExpressionUUID->"9839412d-2666-48af-8a12-26d795001b18"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteTemplateLibDirectory\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"10c8d7b1-d773-4a85-9089-a7b1f6a2e75e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteTemplateLibDirectory", "=", "\n", "\t", 
   RowBox[{"PackageFilePath", "[", 
    RowBox[{
    "\"\<Resources\>\"", ",", "\"\<Themes\>\"", ",", "\"\<template_lib\>\""}],
     "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"94fec643-5417-4375-a197-5fe5f22cf9b6"]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Site Config\[RightFloor]", "CodeSubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7128335669161673`*^9, 
  3.712833571196659*^9}},ExpressionUUID->"d7708633-7256-4fe1-a8ed-\
1b3668732dbf"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteFind\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723002626987522*^9, 3.7230026314899197`*^9}, {
  3.723003186395924*^9, 
  3.7230031865703897`*^9}},ExpressionUUID->"6cbcad8a-028f-4833-aed9-\
793abc0a9a58"],

Cell[BoxData[
 RowBox[{"WebSites", "//", "Clear"}]], "CodeInput",
 CellChangeTimes->{{3.723055464968233*^9, 
  3.723055465782651*^9}},ExpressionUUID->"2c2a3876-c236-48b4-8684-\
76de37158bca"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSites", "[", 
    RowBox[{"site_:", "\"\<*\>\""}], "]"}], ":=", "\n", "\t", 
   RowBox[{
    RowBox[{"Select", "[", 
     RowBox[{
      RowBox[{"FileExistsQ", "@", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"#", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}]}], "&"}], 
     "]"}], "@", "\n", "\t\t", 
    RowBox[{"FileNames", "[", 
     RowBox[{"site", ",", " ", "$WebSitePath"}], "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFind", "[", "siteName_", "]"}], ":=", "\n", "\t", 
   RowBox[{"SelectFirst", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"FileNames", "[", 
      RowBox[{"siteName", ",", " ", "$WebSitePath"}], "]"}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"FileExistsQ", "@", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"#", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}]}], "&"}], 
     ",", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringQ", "@", "siteName"}], ",", "\n", "\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"$WebSiteDirectory", ",", " ", "siteName"}], "}"}]}], ",", 
       "\n", "\t\t\t", "$Failed"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
    "]"}]}], ";"}]}], "CodeInput",
 CellChangeTimes->{{3.723003184220989*^9, 3.723003222172657*^9}, {
  3.723003282032915*^9, 3.723003375869944*^9}, {3.723055458979436*^9, 
  3.723055463136051*^9}},ExpressionUUID->"27eee7d8-e2f7-4648-af63-\
2c0b461afb40"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Initialize\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"fdfa7e0f-a60b-4f8c-bf70-4b59c20eeb64"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteTemplate", "=", "\n", "\t", 
   RowBox[{"PackageFilePath", "[", 
    RowBox[{
    "\"\<Resources\>\"", ",", " ", "\"\<Templates\>\"", ",", " ", 
     "\"\<SiteBuilder\>\"", ",", " ", "\"\<WebSite\>\""}], "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"a4f62d7e-f042-48ae-ab7c-54d10683695b"],

Cell[BoxData[
 RowBox[{"WebSiteInitialize", "//", 
  "Clear"}]], \
"CodeInput",ExpressionUUID->"aa533ce9-408d-420a-b6d6-56f441ca9ecc"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInitialize", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", 
      RowBox[{"(", "\n", "\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"FileNameDepth", "[", "#", "]"}], ">", "1"}], "&&", 
         RowBox[{"DirectoryQ", "@", 
          RowBox[{"DirectoryName", "[", "#", "]"}]}]}], "&"}], "\n", "\t\t", 
       ")"}]}], ",", "\n", "\t", 
     RowBox[{"template", ":", 
      RowBox[{
       RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
      "Automatic"}], ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"temp", "=", 
       RowBox[{"Replace", "[", 
        RowBox[{"template", ",", " ", 
         RowBox[{"Automatic", "\[RuleDelayed]", "$WebSiteTemplate"}]}], 
        "]"}]}], "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"CopyDirectory", "[", 
       RowBox[{"temp", ",", " ", "dir"}], "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", 
          RowBox[{"Flatten", "@", 
           RowBox[{"{", "ops", "}"}]}]}], ">", "0"}], ",", "\n", "\t\t\t", 
        RowBox[{"Export", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"dir", ",", "\"\<SiteConfig.wl\>\""}], "}"}]}], ",", "\n",
           "\t", "\t\t\t", 
          RowBox[{"PrettyString", "@", "\n", "\t", "\t\t\t\t", 
           RowBox[{
            RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
            "\t", "\t", "\t\t\t\t", 
            RowBox[{"Flatten", "@", "\n", "\t", "\t", "\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t", 
              RowBox[{"ops", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"Get", "@", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"temp", ",", " ", "\"\<SiteConfig.wl\>\""}], 
                    "}"}]}]}], ",", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Except", "[", 
                   RowBox[{"_", "?", "OptionQ"}], "]"}], "\[RuleDelayed]", 
                  RowBox[{"{", "}"}]}]}], "\n", "\t", "\t\t\t\t\t\t\t\t", 
                "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t", "}"}]}]}]}], ",", "\n",
           "\t", "\t\t\t\t", "\"\<Text\>\""}], "\n", "\t\t\t\t\t", "]"}]}], 
       "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", "dir"}]}], "\n", "\t\t", 
    "]"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"5214867c-4e9a-40d3-b5d8-4edf41bee6a5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteInitialize", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"s_String", "?", 
     RowBox[{"(", "\n", "\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"FileNameDepth", "[", "#", "]"}], "\[Equal]", "1"}], "||", 
        "\n", "\t\t\t", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Not", "@", 
           RowBox[{"FileExistsQ", "[", "#", "]"}]}], "&&", 
          RowBox[{"StringFreeQ", "[", 
           RowBox[{"#", ",", "$PathnameSeparator"}], "]"}]}], ")"}]}], "&"}], 
      ")"}]}], ",", "\n", "\t", 
    RowBox[{"template", ":", 
     RowBox[{
      RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
     "Automatic"}], ",", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"!", 
       RowBox[{"DirectoryQ", "@", "$WebSiteDirectory"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"CreateDirectory", "[", 
       RowBox[{"$WebSiteDirectory", ",", 
        RowBox[{"CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
       "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
    RowBox[{"WebSiteInitialize", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{"$WebSiteDirectory", ",", " ", "s"}], "}"}]}], ",", " ", "\n",
       "\t\t\t", "template", ",", "\n", "\t\t\t", "ops"}], "\n", "\t\t\t", 
     "]"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"dc72877b-62c2-4832-9bc3-ad3642055ab5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Options\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7128339916993227`*^9, 3.712833995778417*^9}, {
  3.712834093593678*^9, 
  3.712834094528667*^9}},ExpressionUUID->"d0e28a20-4d3a-47cb-9729-\
dee7cb1a6d8f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteOptions", "[", 
    RowBox[{"dir_String", "?", 
     RowBox[{"(", 
      RowBox[{"DirectoryQ", "@*", "DirectoryName"}], ")"}]}], "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"Quiet", "@", 
      RowBox[{"Get", "[", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"dir", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}], "]"}]}],
      ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Except", "[", 
       RowBox[{"_", "?", "OptionQ"}], "]"}], "->", "\n", "\t\t\t", 
      RowBox[{"{", "}"}]}]}], "\n", "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteOptions", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", 
     RowBox[{"(", 
      RowBox[{"DirectoryQ", "@*", "DirectoryName"}], ")"}]}], ",", " ", 
    "vals_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"FilterRules", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"WebSiteOptions", "[", "dir", "]"}], ",", "\n", "\t\t", "vals"}], 
   "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"80af0b5f-5ec1-486c-9ae5-62b9b12b0d94"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]SetOptions\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712834098451429*^9, 
  3.712834100376466*^9}},ExpressionUUID->"a3e62df6-a41d-4fd3-9a5a-\
8f85c25d8690"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteSetOptions", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", 
      RowBox[{"(", 
       RowBox[{"DirectoryQ", "@*", "DirectoryName"}], ")"}]}], ",", "\n", 
     "\t", 
     RowBox[{"ops_", "?", "OptionQ"}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
   
   RowBox[{"Export", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"dir", ",", "\"\<SiteConfig.wl\>\""}], "}"}]}], ",", "\n", 
     "\t\t", 
     RowBox[{"PrettyString", "@", "\n", "\t\t\t", 
      RowBox[{"Merge", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"WebSiteOptions", "[", "dir", "]"}], ",", "\n", "\t", "\t", 
          "\t\t\t", "ops"}], "\n", "\t", "\t", "\t\t\t", "}"}], ",", "\n", 
        "\t\t\t\t", "Last"}], "\n", "\t\t\t\t", "]"}]}], ",", "\n", "\t\t", 
     "\"\<Text\>\""}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"60df29a6-8d75-4b8a-988b-9c41a7889306"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]NewContent\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712834307506276*^9, 3.712834310370082*^9}, 
   3.722971020842743*^9, 
   3.723006769079563*^9},ExpressionUUID->"c1365784-48e7-4818-a666-\
1a9edab732b5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteNewContentAutoname", "[", 
   RowBox[{"dir_", ",", " ", "place_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"ToUpperCase", "[", 
    RowBox[{"StringTake", "[", 
     RowBox[{"place", ",", " ", "1"}], "]"}], "]"}], "<>", "\n", "\t\t", 
   RowBox[{"StringDrop", "[", 
    RowBox[{
     RowBox[{"StringTrim", "[", 
      RowBox[{"place", ",", " ", "\"\<s\>\""}], "]"}], ",", " ", "1"}], "]"}],
    "<>", "\n", "\t\t", "\"\< #\>\"", "<>", "\n", "\t\t", 
   RowBox[{"ToString", "@", "\n", "\t\t", 
    RowBox[{"(", "\n", "\t\t\t", 
     RowBox[{"1", "+", 
      RowBox[{"Length", "@", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"DeleteDuplicatesBy", "[", "FileBaseName", "]"}], "@", "\n", 
        "\t", "\t\t\t\t", 
        RowBox[{"FileNames", "[", 
         RowBox[{
          RowBox[{
          "\"\<*.nb\>\"", "|", "\"\<*.md\>\"", "|", "\"\<*.html\>\"", "|", 
           "\"\<*.xml\>\""}], ",", "\n", "\t\t\t\t\t\t", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"dir", ",", " ", "\"\<content\>\"", ",", " ", "place"}], 
            "}"}]}]}], "]"}]}]}]}], "\n", "\t\t\t", 
     ")"}]}]}]}]], \
"CodeInput",ExpressionUUID->"b66292c5-3793-4076-903f-46fbe98f9384"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteNewContent", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     "place_String", ",", "\n", "\t", 
     RowBox[{"name", ":", 
      RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
     "\t", 
     RowBox[{"content", ":", 
      RowBox[{"_List", "|", "_Cell", "|", "Automatic"}], ":", "Automatic"}], 
     ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], "/;", 
   RowBox[{"DirectoryQ", "@", 
    RowBox[{"FileNameJoin", "@", 
     RowBox[{"{", 
      RowBox[{"dir", ",", "\"\<content\>\"", ",", "place"}], "}"}]}]}]}], ":=",
   "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"autoname", "=", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"StringTrim", "[", 
          RowBox[{"#", ",", " ", 
           RowBox[{"\"\<.\>\"", "<>", 
            RowBox[{"FileExtension", "[", "#", "]"}]}]}], "]"}], "<>", 
         "\"\<.nb\>\""}], "&"}], "@", "\n", "\t", "\t\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{"name", ",", " ", 
         RowBox[{"Automatic", ":>", 
          RowBox[{"webSiteNewContentAutoname", "[", 
           RowBox[{"dir", ",", " ", "place"}], "]"}]}]}], "]"}]}]}], "\n", 
     "\t", "\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"!", 
       RowBox[{"FileExistsQ", "@", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{
          "dir", ",", "\"\<content\>\"", ",", "place", ",", "autoname"}], 
          "}"}]}]}]}], ",", "\n", "\t\t\t", 
      RowBox[{"SystemOpen", "@", "\n", "\t\t\t", 
       RowBox[{"Export", "[", 
        RowBox[{
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "dir", ",", "\"\<content\>\"", ",", "place", ",", "autoname"}], 
           "}"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"Notebook", "[", 
          RowBox[{
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "\n", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Cell", "[", "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"BoxData", "@", 
                 RowBox[{"ToBoxes", "@", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{"Merge", "[", 
                   RowBox[{
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Switch", "[", 
                    RowBox[{
                    "place", ",", "\n", "\t\t\t\t\t\t\t\t\t", "\"\<posts\>\"",
                     ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "\"\<Title\>\"", "\[Rule]", "\"\<< Post Title >\>\""}], 
                    ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Slug\>\"", "\[Rule]", "Automatic"}], ",", 
                    "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Date\>\"", "\[Rule]", "Now"}], ",", "\n", 
                    "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Tags\>\"", "\[Rule]", 
                    RowBox[{"{", "}"}]}], ",", "\n", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Authors\>\"", "\[Rule]", 
                    RowBox[{"{", "}"}]}], ",", "\n", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Categories\>\"", "\[Rule]", 
                    RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    "|>"}], ",", "\n", "\t\t\t\t\t\t\t\t\t", "\"\<pages\>\"", 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "\"\<Title\>\"", "\[Rule]", "\"\<< Page Title >\>\""}], 
                    ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Slug\>\"", "\[Rule]", "Automatic"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "|>"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t", "_", ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"\"\<Title\>\"", "\[Rule]", "\"\<< Title >\>\""}],
                     ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Slug\>\"", "\[Rule]", "Automatic"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "|>"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", "ops", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", 
                    "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", "Last"}], "\n", 
                   "\t\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t\t", 
                "\"\<Metadata\>\""}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", 
              "\t", "\t\t\t\t", 
              RowBox[{"Cell", "[", "\n", "\t\t\t\t\t\t", 
               RowBox[{
               "\"\<Check the style list for the entire set of supported \
styles\>\"", ",", "\n", "\t\t\t\t\t\t", "\"\<Text\>\""}], "\n", 
               "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
              RowBox[{"Cell", "[", "\n", "\t\t\t\t\t\t", 
               RowBox[{
               "\"\<Input style cells will be dropped\>\"", ",", "\n", 
                "\t\t\t\t\t\t", "\"\<Text\>\""}], "\n", "\t\t\t\t\t\t", "]"}],
               ",", "\n", "\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{"content", ",", "\n", "\t\t\t\t\t\t", 
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
                 RowBox[{
                 "Automatic", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t\t\t", 
                  RowBox[{"Switch", "[", 
                   RowBox[{
                   "place", ",", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t", 
                    "\"\<posts\>\"", ",", "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Cell", "[", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<This is a post, so article.html is the theme \
template for it.\>\"", ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t", "\"\<Text\>\""}], "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t", "\"\<pages\>\"", ",", "\n", "\t", "\t", 
                    "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Cell", "[", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<This is a page, so page.html is the theme template \
for it.\>\"", ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                    "\"\<Text\>\""}], "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t", "_", ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "Nothing"}], "\n", "\t", 
                   "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t", 
                 "}"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
             "}"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StyleDefinitions", "\[Rule]", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"FrontEnd`FileName", "[", 
             RowBox[{
              RowBox[{"Evaluate", "@", 
               RowBox[{"{", "$PackageName", "}"}]}], ",", "\n", "\t", 
              "\t\t\t\t\t\t", "\"\<MarkdownNotebook.nb\>\""}], "\n", "\t", 
             "\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
        "\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", "$Failed"}], "\n", "\t\t\t",
      "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"62e19140-903e-4a3d-8e5e-7421cb5f3b99"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TableOfContents\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7235735226709948`*^9, 
  3.723573525014244*^9}},ExpressionUUID->"48fb1d70-98c9-43e1-bee6-\
d4897546ea69"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteNewTableOfContents", "[", 
   RowBox[{"dir_String", "?", "DirectoryQ"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "outdir", ",", "\n", "\t\t\t", "metas", ",", "\n", "\t", "\t\t", "data", 
      ",", "\n", "\t\t\t", "cells", ",", "\n", "\t\t\t", 
      RowBox[{"postCounter", "=", "1"}]}], "\n", "\t\t\t", "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"outdir", "=", "\n", "\t\t\t", 
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{
        "dir", ",", " ", "\"\<content\>\"", ",", " ", "\"\<posts\>\""}], 
        "}"}]}]}], ";", "\n", "\t\t", 
     RowBox[{"metas", "=", "\n", "\t\t\t", 
      RowBox[{"SortBy", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"AssociationMap", "[", "\n", "\t", "\t", "\t", "\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"Association", "@", "\n", "\t", "\t", "\t", "\t\t", 
            RowBox[{"Map", "[", "\n", "\t", "\t", "\t", "\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"Rule", "@@", 
                RowBox[{"StringTrim", "@", 
                 RowBox[{"StringSplit", "[", 
                  RowBox[{"#", ",", " ", "\"\<:\>\"", ",", "2"}], "]"}]}]}], 
               "&"}], ",", "\n", "\t", "\t", "\t", "\t\t\t", 
              RowBox[{
              "StringSplit", "[", "\n", "\t", "\t", "\t", "\t\t\t\t", 
               RowBox[{
                RowBox[{
                 RowBox[{"StringSplit", "[", 
                  RowBox[{
                   RowBox[{"Import", "[", 
                    RowBox[{"#", ",", "\"\<Text\>\""}], "]"}], ",", " ", 
                   "\"\<\\n\\n\>\"", ",", "2"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", "\n", "\t", "\t", "\t", 
                "\t\t\t\t", "\"\<\\n\>\""}], "\n", "\t", "\t", "\t", 
               "\t\t\t\t", "]"}]}], "\n", "\t", "\t", "\t", "\t\t\t", "]"}]}],
            "&"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Select", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNames", "[", 
             RowBox[{"\"\<*.md\>\"", ",", "outdir", ",", "\[Infinity]"}], 
             "]"}], ",", "\n", "\t", "\t", "\t", "\t\t\t", 
            RowBox[{
             RowBox[{"!", 
              RowBox[{"StringMatchQ", "[", 
               RowBox[{
                RowBox[{"FileBaseName", "[", "#", "]"}], ",", " ", 
                "\"\<toc\>\""}], "]"}]}], "&"}]}], "\n", "\t", "\t", "\t", 
           "\t\t\t", "]"}]}], "\n", "\t", "\t", "\t", "\t\t", "]"}], ",", 
        "\n", "\t", "\t", "\t", "\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"KeyMemberQ", "[", 
            RowBox[{"#", ",", " ", "\"\<ID\>\""}], "]"}], ",", "\n", "\t", 
           "\t", "\t", "\t\t", 
           RowBox[{"ToExpression", "[", "\n", "\t", "\t", "\t", "\t\t\t", 
            RowBox[{"StringSplit", "[", 
             RowBox[{"#ID", ",", " ", "\"\<.\>\""}], "]"}], "\n", "\t", "\t", 
            "\t", "\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", 
           RowBox[{"{", 
            RowBox[{"1000", ",", "1000", ",", "1000"}], "}"}]}], "\n", "\t", 
          "\t", "\t", "\t\t", "]"}], "&"}]}], "\n", "\t", "\t\t\t", "]"}]}], 
     ";", "\n", "\t\t", 
     RowBox[{"data", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"GroupBy", "[", 
        RowBox[{"First", "\[Rule]", "Last"}], "]"}], "/@", "\n", "\t", "\t", 
       "\t\t", 
       RowBox[{
        RowBox[{"GroupBy", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", 
             RowBox[{"1", ",", "1"}], "]"}], "]"}], "&"}], "\[Rule]", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", 
               RowBox[{"1", ",", "2"}], "]"}], "]"}], "\[Rule]", 
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], "&"}], ")"}]}], "]"}], "@", 
        "\n", "\t\t\t\t\t", 
        RowBox[{"KeyValueMap", "[", "\n", "\t\t\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"KeyMemberQ", "[", 
               RowBox[{"#2", ",", " ", "\"\<Path\>\""}], "]"}], ",", " ", 
              "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"Take", "[", 
               RowBox[{
                RowBox[{"URLParse", "[", 
                 RowBox[{
                  RowBox[{"#2", "[", "\"\<Path\>\"", "]"}], ",", " ", 
                  "\"\<Path\>\""}], "]"}], ",", " ", 
                RowBox[{"UpTo", "[", "2", "]"}]}], "]"}], ",", "\n", 
              "\t\t\t\t\t\t\t\t", 
              RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], "->", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
              "\"\<Path\>\"", "\[Rule]", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{"URLBuild", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"Flatten", "@", 
                 RowBox[{
                 "{", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t", 
                  "\t\t\t\t", 
                  RowBox[{
                  "\"\<..\>\"", ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t",
                    "\t", "\t\t\t\t", 
                   RowBox[{"Most", "@", 
                    RowBox[{"FileNameSplit", "@", 
                    RowBox[{"StringTrim", "[", 
                    RowBox[{"#", ",", " ", "outdir"}], "]"}]}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"WebSiteBuildAttachExtension", "@", 
                    RowBox[{"#2", "[", "\"\<Slug\>\"", "]"}]}]}], "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
                "\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
              "\t\t\t\t\t\t\t\t", 
              RowBox[{
              "\"\<Title\>\"", "\[Rule]", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"KeyMemberQ", "[", 
                  RowBox[{"#2", ",", " ", "\"\<Title\>\""}], "]"}], ",", " ", 
                 "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"#2", "[", "\"\<Title\>\"", "]"}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"\"\<Post #\>\"", "<>", 
                  RowBox[{"ToString", "[", 
                   RowBox[{"postCounter", "++"}], "]"}]}]}], "\n", 
                "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
             "|>"}]}], "&"}], ",", "\n", "\t\t\t\t\t\t", "metas"}], "\n", 
         "\t\t\t\t\t\t", "]"}]}]}]}], ";", "\n", "\t\t", 
     RowBox[{"cells", "=", "\n", "\t\t\t", 
      RowBox[{"KeyValueMap", "[", "\n", "\t", "\t", "\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"Cell", "[", "\n", "\t", "\t", "\t\t\t", 
          RowBox[{"CellGroupData", "[", 
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Cell", "[", 
               RowBox[{"#", ",", " ", "\"\<Section\>\""}], "]"}], ",", "\n", 
              "\t", "\t", "\t\t\t\t\t", 
              RowBox[{"KeyValueMap", "[", "\n", "\t", "\t", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                 RowBox[{"Cell", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "CellGroupData", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                   
                   RowBox[{"Flatten", "@", 
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Cell", "[", 
                    RowBox[{"#", ",", "\"\<Subsection\>\""}], "]"}], ",", 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Map", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "Cell", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "TextData", "[", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"ButtonBox", "[", 
                    RowBox[{
                    "#Title", ",", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", " ", 
                    RowBox[{"BaseStyle", "\[Rule]", "\"\<Hyperlink\>\""}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "ButtonData", "\[Rule]", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FrontEnd`FileName", "[", 
                    RowBox[{"Evaluate", "@", 
                    RowBox[{"URLParse", "[", 
                    RowBox[{"#Path", ",", " ", "\"\<Path\>\""}], "]"}]}], 
                    "]"}], ",", " ", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", "\t", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}]}], "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}], "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", "\"\<Item\>\""}], 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", "]"}], "&"}], 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", "#2"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}], "\n", "\t\t\t\t\t\t\t\t\t", 
                  "]"}], "&"}], ",", "\n", "\t", "\t", "\t\t\t\t\t\t", "#2"}],
                "\n", "\t", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t", 
             "\t\t\t\t\t", "}"}]}], "\n", "\t", "\t", "\t\t\t\t", "]"}], "\n",
           "\t", "\t", "\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t\t", 
        "data"}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t", 
     RowBox[{"WebSiteNewContent", "[", 
      RowBox[{
      "dir", ",", "\n", "\t\t", "\"\<pages\>\"", ",", "\n", "\t\t", 
       "\"\<toc\>\"", ",", "\n", "\t\t", "cells", ",", "\n", "\t\t", 
       RowBox[{"{", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"\"\<Title\>\"", "\[Rule]", "\"\<Table of Contents\>\""}], 
         ",", "\n", "\t\t\t", 
         RowBox[{"\"\<Slug\>\"", "\[Rule]", "\"\<toc\>\""}]}], "\n", "\t\t\t",
         "}"}]}], "\n", "\t\t", "]"}]}]}], "\n", "\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"567337c4-9ffc-43a8-8680-a3ad95484478"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]FindTheme\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7125375649332743`*^9, 3.712537566964675*^9}, {
  3.723000499184258*^9, 3.723000500014727*^9}, {3.723055488689538*^9, 
  3.723055488830216*^9}},ExpressionUUID->"9b5509e9-f54e-4813-92cc-\
9f2f17b1a22b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteThemes", "[", "themePat_", "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"Select", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"DirectoryQ", "@", 
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{"#", ",", " ", "\"\<templates\>\""}], "}"}]}]}], "&"}], "\n", 
    "\t\t", "]"}], "@", "\n", "\t\t", 
   RowBox[{"FileNames", "[", 
    RowBox[{"themePat", ",", " ", "$WebSiteThemePath"}], 
    "]"}]}]}]], "CodeInput",
 CellChangeTimes->{{3.7230034448934927`*^9, 
  3.723003517515032*^9}},ExpressionUUID->"f856cdf0-42da-4ae2-8a66-\
bb1e464266f3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"validThemeURL", "[", "s_", "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"parse", "=", 
       RowBox[{"URLParse", "[", "s", "]"}]}], "}"}], ",", "\n", "\t\t", 
     RowBox[{"MatchQ", "[", 
      RowBox[{
       RowBox[{"parse", "[", "\"\<Scheme\>\"", "]"}], ",", " ", 
       RowBox[{"\"\<http\>\"", "|", "\"\<https\>\""}]}], "]"}]}], "\n", 
    "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInstallTheme", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"themeURL_String", "?", "validThemeURL"}], ",", " ", "\n", "\t", 
     
     RowBox[{"dir", ":", 
      RowBox[{
       RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
      "Automatic"}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"d", "=", 
       RowBox[{"Replace", "[", 
        RowBox[{"dir", ",", " ", 
         RowBox[{"Automatic", "\[RuleDelayed]", "$WebSiteTempThemeDir"}]}], 
        "]"}]}], "}"}], ",", "\n", "\t\t", 
     RowBox[{"With", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"arc", "=", 
         RowBox[{"ExtractArchive", "[", 
          RowBox[{
           RowBox[{"URLDownload", "[", "themeURL", "]"}], ",", " ", "d"}], 
          "]"}]}], "}"}], ",", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"MinimalBy", "[", 
          RowBox[{
           RowBox[{"DirectoryName", "/@", "arc"}], ",", " ", 
           "FileNameDepth"}], "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"{", 
             RowBox[{"t_", ",", " ", "___"}], "}"}], "\[RuleDelayed]", "t"}], 
           ",", "\n", "\t\t\t\t\t", 
           RowBox[{"_", "\[Rule]", "$Failed"}]}], "\n", "\t\t\t\t\t", "}"}]}],
         "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
    "]"}]}], ";"}]}], "CodeInput",
 CellChangeTimes->{{3.728211352430552*^9, 3.728211580336132*^9}, {
   3.728211680742462*^9, 3.728211908324335*^9}, 
   3.728967545094336*^9},ExpressionUUID->"00e696d9-acd4-4369-b971-\
5ecd1472f214"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteFindTheme", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "False"}], "\n", "\t\t", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFindTheme", "[", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", "theme_String", ",",
      "\n", "\t", 
     RowBox[{"o", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"SelectFirst", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Join", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{"theme", ",", "\n", "\t\t\t\t", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<themes\>\"", ",", " ", "theme"}], 
           "}"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<theme\>\""}], "}"}]}]}], "\n", 
        "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"#", ",", " ", "theme"}], "}"}]}], "&"}], ",", "\n", 
         "\t\t\t\t", "$WebSiteThemePath"}], "\n", "\t\t\t\t", "]"}]}], "\n", 
      "\t\t\t", "]"}], ",", "\n", "\t\t", "DirectoryQ", ",", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"OptionValue", "[", "\"\<DownloadTheme\>\"", "]"}], "===", 
        "True"}], ",", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteInstallTheme", "[", "\n", "\t\t\t\t\t", 
          RowBox[{"URLBuild", "@", 
           RowBox[{"{", 
            RowBox[{"$WebThemesURLBase", ",", " ", 
             RowBox[{"theme", "<>", "\"\<.zip\>\""}]}], "}"}]}], "\n", 
          "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t", 
          RowBox[{"WebSiteFindTheme", "[", 
           RowBox[{"dir", ",", " ", "theme", ",", " ", 
            RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "False"}]}], 
           "]"}]}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
       "$Failed"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFindTheme", "[", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
     RowBox[{"op", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"ops", "=", 
        RowBox[{"WebSiteOptions", "[", "dir", "]"}]}], ",", "\n", "\t", 
       "\t\t", "theme"}], "\n", "\t", "\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{"Replace", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Lookup", "[", 
        RowBox[{"ops", ",", " ", "\"\<Theme\>\""}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t", 
          RowBox[{"WebSiteFindTheme", "[", 
           RowBox[{"dir", ",", " ", "s", ",", " ", "op"}], "]"}]}], ",", "\n",
          "\t\t\t\t", 
         RowBox[{"_", "\[RuleDelayed]", "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"DirectoryQ", "@", 
             RowBox[{"FileNameJoin", "@", 
              RowBox[{"{", 
               RowBox[{"dir", ",", " ", "\"\<theme\>\""}], "}"}]}]}], ",", 
            "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<theme\>\""}], "}"}]}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"Replace", "[", 
             RowBox[{
              RowBox[{"WebSiteFindTheme", "[", 
               RowBox[{"dir", ",", " ", "\"\<minimal\>\"", ",", " ", "op"}], 
               "]"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"$Failed", ":>", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"SelectFirst", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"FileNames", "[", 
                  RowBox[{"\"\<*\>\"", ",", " ", "$WebSiteThemePath"}], "]"}],
                  ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"DirectoryQ", "@", 
                   RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"#", ",", " ", "\"\<templates\>\""}], "}"}]}]}], 
                  "&"}]}], "\n", "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], "\n",
         "\t\t\t\t", "}"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"63b7d36a-ae4a-41e6-a63d-60813c35f1a0"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Content\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"b0db5b8c-7aac-4dd2-bc29-dc6ed188bc31"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteContent", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", "\n", "\t", 
     RowBox[{"path", ":", 
      RowBox[{"{", "___String", "}"}], ":", 
      RowBox[{"{", "}"}]}], ",", " ", "\n", "\t", 
     RowBox[{"contentPat", ":", 
      RowBox[{"_", "?", "StringPattern`StringPatternQ"}]}]}], "\n", "\t", 
    "]"}], ":=", "\n", "\t", 
   RowBox[{
    RowBox[{"DeleteDuplicatesBy", "[", "FileBaseName", "]"}], "@", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"SortBy", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"FileExtension", "[", "#", "]"}], "=!=", "\"\<nb\>\""}], 
       "&"}], "]"}], "@", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"Select", "[", 
       RowBox[{"Not", "@*", "DirectoryQ"}], "]"}], "@", "\n", "\t\t\t\t", 
      RowBox[{"FileNames", "[", 
       RowBox[{"contentPat", ",", " ", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<content\>\"", ",", " ", "path"}], 
           "}"}]}]}]}], "]"}]}]}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"62644ed4-031c-45f4-98c7-c395c2b2274c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSitePages", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
    RowBox[{"contentPat", ":", 
     RowBox[{"_", "?", "StringPattern`StringPatternQ"}]}]}], "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"WebSiteContent", "[", 
   RowBox[{"dir", ",", " ", 
    RowBox[{"{", "\"\<pages\>\"", "}"}], ",", " ", "contentPat"}], 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"04fc7bfe-5f9d-48aa-9e4d-c0da1f482f95"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSitePosts", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
    RowBox[{"contentPat", ":", 
     RowBox[{"_", "?", "StringPattern`StringPatternQ"}]}]}], "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"WebSiteContent", "[", 
   RowBox[{"dir", ",", " ", 
    RowBox[{"{", "\"\<posts\>\"", "}"}], ",", " ", "contentPat"}], 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"3be901cc-fc10-4375-958b-5a34db316278"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteOpenTheme\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723000190422576*^9, 3.723000191699443*^9}, {
  3.7230005042703114`*^9, 
  3.7230005053908033`*^9}},ExpressionUUID->"b6924506-4346-44df-8b0e-\
a35e80017359"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteOpenTheme", "[", 
   RowBox[{"dir_", ",", " ", 
    RowBox[{"theme", ":", 
     RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}]}], "]"}], ":=",
   "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"theme", "===", "Automatic"}], ",", "\n", "\t\t\t", 
      RowBox[{"WebSiteFindTheme", "[", "dir", "]"}], ",", "\n", "\t\t\t", 
      RowBox[{"WebSiteFindTheme", "[", 
       RowBox[{"dir", ",", " ", "theme"}], "]"}]}], "\n", "\t\t\t", "]"}], 
    ",", "\n", "\t\t", 
    RowBox[{"d_String", "\[RuleDelayed]", 
     RowBox[{"SystemOpen", "[", "d", "]"}]}]}], "\n", "\t\t", 
   "]"}]}]], "CodeInput",
 CellChangeTimes->{{3.723000461708989*^9, 3.723000465198411*^9}, {
  3.723000506917292*^9, 3.7230005141650887`*^9}, {3.723000986058577*^9, 
  3.7230010895632973`*^9}},ExpressionUUID->"f5dccbb7-6603-45c6-81c7-\
49a61d20ac6e"]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ContentStack Manipulation\[RightFloor]", "CodeSubsection",
 
 Evaluatable->True,ExpressionUUID->"9eeae8f7-084c-4857-8aad-13197ab04252"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteSetContentAttributes\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"636c9bf7-2010-4d0f-b146-70b4ac5de43f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteSetContentAttributes", "[", "\n", "\t", 
   RowBox[{"fname_", ",", "\n", "\t", "props_"}], "\n", "\t", "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"!", 
       RowBox[{"AssociationQ", "@", 
        RowBox[{"$WebSiteBuildContentStack", "[", "fname", "]"}]}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteBuildContentStack", "[", "fname", "]"}], "=", 
       RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"!", 
       RowBox[{"AssociationQ", "@", 
        RowBox[{"$WebSiteBuildContentStack", "[", 
         RowBox[{"fname", ",", " ", "\"\<Attributes\>\""}], "]"}]}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteBuildContentStack", "[", 
        RowBox[{"fname", ",", " ", "\"\<Attributes\>\""}], "]"}], "=", 
       RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
    RowBox[{"AssociateTo", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"$WebSiteBuildContentStack", "[", 
       RowBox[{"fname", ",", " ", "\"\<Attributes\>\""}], "]"}], ",", "\n", 
      "\t\t\t", "props"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"94a4d2aa-88d0-4761-a89b-8687ae197098"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCollectContentURLs\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"742409f2-18d1-43f2-b863-99c9cb0daef6"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"WebSiteCollectContentURLs", "[", "]"}], ":="}], "\n", "\t", 
  "*)"}]], "CodeInput",ExpressionUUID->"bb2b44a8-22a8-4e00-a608-e6fffd0be1fe"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Cache\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a8017efd-25c7-4af7-9650-4d00e1b24b81"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Basic\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"5ebba694-8144-4cff-8dc5-6fb06f0248b6"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCachePath", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{"dir", ",", " ", "\"\<ContentCache.mx\>\""}], "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"6f57a823-32b7-4066-97bd-c2c39fdb4b78"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteFindCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"WebSiteCachePath", "[", "dir", "]"}], ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"f", ":", 
        RowBox[{"Except", "[", 
         RowBox[{
          RowBox[{"\"\<\>\"", "|", 
           RowBox[{"_", "?", 
            RowBox[{"(", 
             RowBox[{"Not", "@*", "FileExistsQ"}], ")"}]}]}], ",", " ", 
          "_String"}], "]"}]}], ":>", "\n", "\t\t\t\t", "f"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t", "}"}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"c3ce8ae7-22f7-4398-bcce-721b3af5c7f8"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteLoadCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"WebSiteFindCache", "[", "dir", "]"}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"None", "\[Rule]", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"f_", ":>", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"Quiet", "@", 
           RowBox[{"Import", "[", "f", "]"}]}], ",", " ", 
          RowBox[{
           RowBox[{"Except", "[", "_Association", "]"}], "\[Rule]", 
           RowBox[{"<|", "|>"}]}]}], "]"}]}]}], "\n", "\t\t\t", "}"}]}], "\n",
     "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"144dfe81-f42d-43aa-b6c0-7b7d16bcac2b"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Template\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"ca15a6f6-ebc8-4c16-941c-d123c6a66dfb"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteTemplateCachePath", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{"dir", ",", " ", "\"\<TemplateCache.mx\>\""}], "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"4c215e08-4d32-494c-aaa5-8da9bfcb6131"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteFindTemplateCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"WebSiteTemplateCachePath", "[", "dir", "]"}], ",", "\n", "\t\t", 
    
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"f", ":", 
        RowBox[{"Except", "[", 
         RowBox[{
          RowBox[{"\"\<\>\"", "|", 
           RowBox[{"_", "?", 
            RowBox[{"(", 
             RowBox[{"Not", "@*", "FileExistsQ"}], ")"}]}]}], ",", " ", 
          "_String"}], "]"}]}], ":>", "\n", "\t\t\t\t", "f"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t", "}"}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"e8e14c97-d09c-4a33-84f5-a6f459a27966"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteLoadTemplateCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"WebSiteFindTemplateCache", "[", "dir", "]"}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"None", "\[Rule]", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"f_", ":>", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"Quiet", "@", 
           RowBox[{"Import", "[", "f", "]"}]}], ",", " ", 
          RowBox[{
           RowBox[{"Except", "[", "_Association", "]"}], "\[Rule]", 
           RowBox[{"<|", "|>"}]}]}], "]"}]}]}], "\n", "\t\t\t", "}"}]}], "\n",
     "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"8ce14d0d-f5d8-4e59-9f9f-b3821f965eb6"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSitePrepContentName\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"1079470e-123d-4c8f-9284-9463b97035cf"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSitePrepContentName", "[", 
   RowBox[{"content_", ",", " ", "root_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringQ", "@", "content"}], ",", "\n", "\t\t", 
    RowBox[{"StringTrim", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"StringTrim", "[", "\n", "\t", "\t\t\t", 
       RowBox[{
        RowBox[{"StringTrim", "[", 
         RowBox[{"content", ",", " ", "root"}], "]"}], ",", " ", "\n", "\t", 
        "\t\t\t", "$UserDocumentsDirectory"}], "\n", "\t", "\t\t\t", "]"}], 
      ",", "\n", "\t\t\t", "$HomeDirectory"}], "\n", "\t\t\t", "]"}], ",", 
    "\n", "\t\t", "content"}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"137dcc50-a34c-47b4-96dd-34e8d5ab16c8"]
}, Closed]]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Site Building\[RightFloor]", "CodeSubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712787607780467*^9, 3.712787609758031*^9}, {
  3.7128335635270357`*^9, 
  3.712833564412951*^9}},ExpressionUUID->"0f885a4b-60f5-4e84-ae48-\
198d7143ff1a"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]XMLTemplateApply\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"427be8d0-848f-4fa2-a66c-052fd7eda9e0"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplateApplyInit\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"3e4075ee-8947-467c-b6aa-d56903a9163c"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"xmlTemplateApplyInit", "[", 
    RowBox[{"root_", ",", " ", "template_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<Context\>\"", "]"}], "=", 
      "$Context"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<ContextPath\>\"", "]"}], "=", 
      "$ContextPath"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<TemplatePath\>\"", "]"}], "=", 
      "$TemplatePath"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<Path\>\"", "]"}], "=", 
      "$Path"}], ";", "\n", "\t\t", 
     RowBox[{"$TemplatePath", "=", "\n", "\t\t\t", 
      RowBox[{"Join", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{"root", ",", " ", 
            RowBox[{"Automatic", "\[RuleDelayed]", 
             RowBox[{"DirectoryName", "@", "template"}]}]}], "]"}]}]}], ",", 
        "\n", "\t\t\t\t", "$TemplatePath", ",", "\n", "\t\t\t\t", 
        RowBox[{
        "{", "\n", "\t\t\t\t\t", "$WebSiteTemplateLibDirectory", "\n", 
         "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"$Path", "=", "\n", "\t\t\t", 
      RowBox[{"Join", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{"root", ",", " ", 
            RowBox[{"Automatic", "\[RuleDelayed]", 
             RowBox[{"DirectoryName", "@", "template"}]}]}], "]"}]}]}], ",", 
        "\n", "\t\t\t\t", "$Path", ",", "\n", "\t\t\t\t", 
        RowBox[{
        "{", "\n", "\t\t\t\t\t", "$WebSiteTemplateLibDirectory", "\n", 
         "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"$Context", "=", "\"\<Templating`gen`\>\""}], ";", "\n", "\t\t", 
     
     RowBox[{"$ContextPath", "=", 
      RowBox[{"{", 
       RowBox[{
       "\"\<Templating`gen`\>\"", ",", " ", "\"\<Templating`lib`\>\"", ",", 
        " ", "\"\<System`\>\""}], "}"}]}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"TrueQ", "[", "$templateLibLoaded", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{"Templating`lib`$$", "=", 
         RowBox[{"<|", "|>"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"Get", "[", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "\"\<include\>\"", ",", " ", "\"\<lib\>\"", ",", " ", 
            "\"\<loadTemplateLib.m\>\""}], "}"}]}], "]"}], ";", "\n", 
        "\t\t\t", 
        RowBox[{"$templateLibLoaded", "=", "True"}]}]}], "\n", "\t\t\t", 
      "]"}]}], "\n", "\t\t", ")"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"8247f014-ce51-494e-8937-c90d73d5668a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplateApplyRestore\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"f17aeca3-eb82-4c9e-9cd3-2f377ff9e775"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xmlTemplateApplyRestore", "[", "]"}], ":=", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Quiet", "@", 
     RowBox[{"Remove", "[", "\"\<Templating`gen`*\>\"", "]"}]}], ";", "\n", 
    "\t\t", 
    RowBox[{"System`Private`RestoreContextPath", "[", "]"}], ";", "\n", 
    "\t\t", 
    RowBox[{"$Context", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<Context\>\"", "]"}]}], ";", 
    "\n", "\t\t", 
    RowBox[{"$TemplatePath", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<TemplatePath\>\"", "]"}]}], ";",
     "\n", "\t\t", 
    RowBox[{"$Path", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<Path\>\"", "]"}]}], ";", "\n", 
    "\t\t", 
    RowBox[{"$ContextPath", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<ContextPath\>\"", "]"}]}], ";", 
    "\n", "\t\t", 
    RowBox[{"$WSBCachedBuildData", "//", "Clear"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"bd10f216-fb5e-4a1c-a55e-732eee7b3bdd"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplatePostProcessWhitespace\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"0312b2ee-6bdc-4ba6-ab5b-d73f07e3308f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xmlTemplatePostProcessWhitespace", "[", "s_", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"StringReplace", "[", 
   RowBox[{"s", ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"pre", ":", 
        RowBox[{"(", "\n", "\t\t\t\t", 
         RowBox[{"Shortest", "[", 
          RowBox[{"\"\<<pre\>\"", "~~", "___", "~~", "\"\<</pre>\>\""}], 
          "]"}], "\n", "\t\t\t\t", ")"}]}], "\[RuleDelayed]", "pre"}], ",", 
      "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Repeated", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"Whitespace", "?", 
             RowBox[{"(", 
              RowBox[{"StringFreeQ", "[", "\"\<\\n\>\"", "]"}], ")"}]}], "|", 
            "\"\<\>\""}], ")"}], "~~", "\"\<\\n\>\""}], ",", " ", "\n", "\t", 
         "\t", "\t\t", 
         RowBox[{"{", 
          RowBox[{"2", ",", " ", "\[Infinity]"}], "}"}]}], "\n", "\t", "\t", 
        "\t\t", "]"}], "\[Rule]", "\"\<\\n\>\""}]}], "\n", "\t\t\t", "}"}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"4e41dc0e-c4a4-4a96-96a0-a3715d09e73f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplateLoad\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"bd29c0bb-b2a6-4477-8a67-ec1d7049ec14"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xmlTemplateLoad", "[", "template_", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"tdat", "=", 
      RowBox[{"$WebSiteTemplateCache", "[", "template", "]"}]}], "}"}], ",", 
    "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"MissingQ", "[", "tdat", "]"}], "||", 
       RowBox[{"!", 
        RowBox[{"DateObjectQ", "@", "$WebSiteLastBuild"}]}], "||", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{"FileDate", "[", 
         RowBox[{"template", ",", " ", "\"\<Modification\>\""}], "]"}], "<=", 
        "$WebSiteLastBuild"}]}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteTemplateCache", "[", "template", "]"}], "=", "\n", 
       "\t\t\t\t", 
       RowBox[{"XMLTemplate", "[", 
        RowBox[{"File", "[", "template", "]"}], "]"}]}], ",", "\n", "\t\t\t", 
      "tdat"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"9e867338-298c-44d6-a704-622ad202802d"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteXMLTemplateApply\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"faae77da-5f27-4a48-844e-50fba77066f2"],

Cell[BoxData[
 RowBox[{"WebSiteXMLTemplateApply", "//", 
  "Clear"}]], \
"CodeInput",ExpressionUUID->"a0466c0f-c7f7-46bb-856b-8799a5c6ce94"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteXMLTemplateApply", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"root", ":", 
     RowBox[{"_String", "|", 
      RowBox[{"{", "__String", "}"}], "|", "Automatic"}], ":", "Automatic"}], 
    ",", "\n", "\t", 
    RowBox[{"template", ":", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"_String", "|", "_File"}], ")"}], "?", "FileExistsQ"}]}], ",", 
    "\n", "\t", 
    RowBox[{"args", ":", 
     RowBox[{"_", "?", "OptionQ"}], ":", 
     RowBox[{"{", "}"}]}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Internal`WithLocalSettings", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"xmlTemplateApplyInit", "[", 
       RowBox[{"root", ",", " ", "template"}], "]"}], ",", "\n", "\t\t\t", 
      RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"xmlTemplateLoad", "[", "template", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"Templating`lib`$$", "=", 
         RowBox[{"Association", "@", "args"}]}]}], "\n", "\t\t\t\t", "]"}], 
      ",", "\n", "\t\t\t", 
      RowBox[{"xmlTemplateApplyRestore", "[", "]"}]}], "\n", "\t\t\t", "]"}], 
    ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"s_String", ":>", "\n", "\t\t\t\t", 
      RowBox[{"xmlTemplatePostProcessWhitespace", "[", "s", "]"}]}], "\n", 
     "\t\t\t", "}"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"488dd539-a30d-4b38-83df-b813cf4873af"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Utils\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712670143457838*^9, 
  3.712670146008109*^9}},ExpressionUUID->"2f921790-eb3f-4feb-9536-\
29104166907c"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildSlug\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"e84534da-84f1-4962-85d8-2b29d183f7be"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildSlug", "[", "fname_", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"fe", "=", 
      RowBox[{"FileExtension", "[", "fname", "]"}]}], "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"StringReplace", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Nest", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"StringTrim", "[", 
           RowBox[{
            RowBox[{"StringTrim", "[", "#", "]"}], ",", " ", 
            RowBox[{"\"\<.\>\"", "<>", "fe"}]}], "]"}], "&"}], ",", " ", 
         "fname", ",", " ", "2"}], "]"}], ",", " ", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WhitespaceCharacter", "\[Rule]", "\"\<-\>\""}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"ent", ":", "\"\<&#\>\""}], "~~", "NumberString", "~~", 
           "\"\<;\>\""}], "\[RuleDelayed]", "ent"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<*\>\"", "\[Rule]", "\"\<-ast-\>\""}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<#\>\"", "\[Rule]", "\"\<-num-\>\""}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<.\>\"", "\[Rule]", "\"\<-dot-\>\""}]}], "\n", 
        "\t\t\t\t", "}"}]}], "\n", "\t\t\t", "]"}], "<>", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringLength", "@", "fe"}], ">", "0"}], ",", " ", 
       RowBox[{"\"\<.\>\"", "<>", "fe"}], ",", " ", "\"\<\>\""}], "]"}]}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"fdbf14ab-a628-4563-94bb-acafd3798389"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildURL\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"a3c7cdf8-1822-49a6-b9eb-2d75149ea5e1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildURL", "[", "fname_", "]"}], ":=", "\n", "\t", 
  RowBox[{"URLBuild", "@", 
   RowBox[{"FileNameSplit", "@", "\n", "\t\t", 
    RowBox[{
    "WebSiteBuildSlug", "@", 
     "fname"}]}]}]}]], \
"CodeInput",ExpressionUUID->"6eeb84c0-0af0-49a5-8531-fa8113d68e6f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildContentType\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"fcc9ebda-72ec-4347-941e-3f4088369322"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildContentType", "[", 
   RowBox[{"fname_", ",", "dir_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringStartsQ", "[", 
     RowBox[{"fname", ",", "dir"}], "]"}], ",", "\n", "\t\t", 
    RowBox[{"Replace", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"FileNameTake", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"FileNameTake", "[", 
              RowBox[{"#", ",", "1"}], "]"}], "\[Equal]", "\"\<content\>\""}],
             ",", "\n", "\t", "\t", "\t\t\t", 
            RowBox[{"FileNameDrop", "[", 
             RowBox[{"#", ",", "1"}], "]"}], ",", "\n", "\t", "\t", "\t\t\t", 
            "#"}], "\n", "\t", "\t", "\t\t\t", "]"}], "&"}], "@", "\n", "\t", 
         "\t\t\t\t", 
         RowBox[{"FileNameDrop", "[", 
          RowBox[{"fname", ",", 
           RowBox[{"FileNameDepth", "@", "dir"}]}], "]"}]}], ",", "\n", "\t", 
        "\t\t\t", "1"}], "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"\"\<posts\>\"", "\[Rule]", "\"\<post\>\""}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"\"\<pages\>\"", "\[Rule]", "\"\<page\>\""}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"_", "\[Rule]", "\"\<misc\>\""}]}], "\n", "\t\t\t\t", "}"}]}],
      "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", "\"\<misc\>\""}], "\n", 
   "\t\t", "]"}]}]], "CodeInput",
 CellChangeTimes->{{3.712765294396653*^9, 
  3.712765367653697*^9}},ExpressionUUID->"6a00823e-461d-4b4b-8111-\
97b1c341134a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteContentDirectoryTemplateMap\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"fdb4af25-f08a-48b6-a5b2-44a8e386d9cd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteContentDirectoryTemplateMap", "=", "\n", "\t", 
   RowBox[{"<|", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<post\>\"", "\[Rule]", "\"\<article.html\>\""}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<page\>\"", "\[Rule]", "\"\<page.html\>\""}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<misc\>\"", "\[Rule]", "\"\<base.html\>\""}]}], "\n", "\t\t",
     "|>"}]}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.7127651503568487`*^9, 3.712765186712968*^9}, {
  3.712765385165907*^9, 
  3.712765393548715*^9}},ExpressionUUID->"c3b8257e-fd51-4d13-b9f0-\
f632de79bd67"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildGetTemplates\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"81758555-23ca-4cba-874e-e9a8c89c9569"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildGetTemplates", "[", 
   RowBox[{"content_", ",", "dir_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Fold", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"Lookup", "[", 
        RowBox[{"#", ",", "#2", ",", 
         RowBox[{"<|", "|>"}]}], "]"}], "&"}], ",", "\n", "\t\t\t", 
      RowBox[{"{", 
       RowBox[{
       "$WebSiteBuildContentStack", ",", "\"\<Attributes\>\"", ",", 
        "\"\<Templates\>\""}], "}"}]}], "\n", "\t\t\t", "]"}], ",", "\n", 
    "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"s_String", ":>", "\n", "\t\t\t\t", 
       RowBox[{"StringTrim", "@", 
        RowBox[{"StringSplit", "[", 
         RowBox[{"s", ",", "\"\<,\>\""}], "]"}]}]}], ",", "\n", "\t", "\t\t", 
      
      RowBox[{
       RowBox[{"Except", "[", 
        RowBox[{"_String", "|", 
         RowBox[{"{", "__String", "}"}]}], "]"}], ":>", "\n", "\t", "\t\t\t", 
       
       RowBox[{"Lookup", "[", 
        RowBox[{
        "$WebSiteContentDirectoryTemplateMap", ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"WebSiteBuildContentType", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"content", ",", "\n", "\t", "\t\t\t\t\t", "longDir"}], "\n",
           "\t", "\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t\t\t\t", 
         "\"\<base.html\>\""}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t",
      "}"}]}], "\n", "\t\t", "]"}]}]], "CodeInput",
 CellChangeTimes->{{3.712765520609771*^9, 3.712765552606987*^9}, {
   3.712765609241109*^9, 3.712765682993848*^9}, 
   3.723038914385352*^9},ExpressionUUID->"6cad4294-4a01-4341-898b-\
7e2206846160"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildFilePath\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"03f1135f-5e0d-4d07-ad69-0c327ac08523"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildFilePath", "[", 
   RowBox[{"fname_", ",", " ", "dir_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringStartsQ", "[", 
     RowBox[{"fname", ",", " ", "dir"}], "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"FileNameTake", "[", 
            RowBox[{"#", ",", "1"}], "]"}], "\[Equal]", "\"\<posts\>\""}], 
          ",", "\n", "\t\t\t", 
          RowBox[{"FileNameDrop", "[", 
           RowBox[{"#", ",", " ", "1"}], "]"}], ",", "\n", "\t\t\t", "#"}], 
         "\n", "\t\t\t", "]"}], "&"}], "@", "\n", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"FileNameTake", "[", 
           RowBox[{"#", ",", " ", "1"}], "]"}], "\[Equal]", 
          "\"\<content\>\""}], ",", "\n", "\t", "\t\t\t", 
         RowBox[{"FileNameDrop", "[", 
          RowBox[{"#", ",", " ", "1"}], "]"}], ",", "\n", "\t\t\t\t", "#"}], 
        "\n", "\t", "\t\t\t", "]"}]}], "&"}], "@", "\n", "\t\t\t\t", 
     RowBox[{"FileNameDrop", "[", 
      RowBox[{"fname", ",", " ", 
       RowBox[{"FileNameDepth", "@", "dir"}]}], "]"}]}], ",", "\n", "\t\t", 
    RowBox[{"FileNameTake", "[", "fname", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"2f20aa2c-54c6-4791-b359-194a4190c04c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteBuildSafeExportXMLElements\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"869cf770-e301-49d7-8b07-07a1d11731a7"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteBuildSafeExportXMLElements", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", 
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{"\"\<script\>\"", ",", "\n", "\t\t", "\"\<style\>\""}], "\n", 
     "\t\t", "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"698a29a9-c2de-4798-bdbc-2b7eb17d495b"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteBuildSafeExportXMLMap\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"13ea3d3d-fb05-4ad7-bc73-676e33d38a70"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteBuildSafeExportXMLMap", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{
     "\"\<\\\"\>\"", "\[Rule]", 
      "\"\<safeXMLExportProtectedCharacterQuot\>\""}], ",", "\n", "\t\t", 
     RowBox[{
     "\"\<<\>\"", "\[Rule]", "\"\<safeXMLExportProtectedCharacterLt\>\""}], 
     ",", "\n", "\t\t", 
     RowBox[{
     "\"\<>\>\"", "\[Rule]", "\"\<safeXMLExportProtectedCharacterGt\>\""}], 
     ",", "\n", "\t\t", 
     RowBox[{
     "\"\<&\>\"", "\[Rule]", "\"\<safeXMLExportProtectedCharacterAmp\>\""}], 
     ",", "\n", "\t\t", 
     RowBox[{
     "\"\<'\>\"", "\[Rule]", 
      "\"\<safeXMLExportProtectedCharacterApos\>\""}]}], "\n", "\t\t", 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"48b4dbb3-08ca-4f7f-9f0b-284681c997c5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildSafeExportXML\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"e6e1a189-fb3f-4e54-8dd5-9c9b76dd7d46"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildSafeExportXML", "[", "xml_", "]"}], ":=", "\n", "\t", 
  RowBox[{"StringReplace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"ExportString", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"xml", "/.", "\n", "\t", "\t\t\t", 
       RowBox[{
        RowBox[{"el", ":", 
         RowBox[{"XMLElement", "[", 
          RowBox[{"$WebSiteBuildSafeExportXMLElements", ",", " ", "__"}], 
          "]"}]}], ":>", "\n", "\t", "\t\t\t", 
        RowBox[{"(", 
         RowBox[{"el", "/.", 
          RowBox[{"s_String", "\[RuleDelayed]", 
           RowBox[{"StringReplace", "[", 
            RowBox[{"s", ",", " ", "$WebSiteBuildSafeExportXMLMap"}], 
            "]"}]}]}], ")"}]}]}], ",", "\n", "\t", "\t\t", "\"\<XML\>\""}], 
     "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{"Reverse", "/@", "$WebSiteBuildSafeExportXMLMap"}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"67ba5c36-5362-4fb3-ad74-b0f1549d6234"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildAttachExtension\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"2b02ad5a-c95e-4ae8-86e5-a99825e03c61"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildAttachExtension", "[", "s_", "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"MemberQ", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<html\>\"", ",", " ", "\"\<xml\>\""}], "}"}], ",", " ", 
       RowBox[{"ToLowerCase", "@", 
        RowBox[{"FileExtension", "@", "s"}]}]}], "]"}]}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"StringTrim", "[", 
      RowBox[{"s", ",", " ", 
       RowBox[{"\"\<.\>\"", "<>", 
        RowBox[{"FileExtension", "[", "s", "]"}]}]}], "]"}], "<>", 
     "\"\<.html\>\""}], ",", "\n", "\t\t", "s"}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"fcd7a343-0ff6-4220-ba33-c0d6072df430"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateProcessFonts\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"5a455cf3-ebf6-4eb1-8db6-4fe9ea825870"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]HTML Reps\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723256236639769*^9, 3.7232562387976093`*^9}, {
  3.723258072701812*^9, 
  3.723258073212553*^9}},ExpressionUUID->"84272232-eec3-4e12-a12f-\
9bc75d10cf20"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchDumbSpecialCharListLong\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"f9329c2a-e459-4823-955e-59fcd266026a"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListLong", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
    "\"\<AliasDelimiter\>\"", ",", "\"\<AliasIndicator\>\"", ",", 
     "\"\<Alpha\>\"", ",", "\"\<AltKey\>\"", ",", "\"\<And\>\"", ",", 
     "\"\<AquariusSign\>\"", ",", "\n", "\t", "\t", "\"\<AriesSign\>\"", ",", 
     "\"\<AutoPlaceholder\>\"", ",", "\"\<Backslash\>\"", ",", 
     "\"\<BeamedEighthNote\>\"", ",", "\"\<BeamedSixteenthNote\>\"", ",", 
     "\"\<Beta\>\"", ",", "\n", "\t", "\t", "\"\<BlackBishop\>\"", ",", 
     "\"\<BlackKing\>\"", ",", "\"\<BlackKnight\>\"", ",", 
     "\"\<BlackPawn\>\"", ",", "\"\<BlackQueen\>\"", ",", "\"\<BlackRook\>\"",
      ",", "\n", "\t", "\t", "\"\<CancerSign\>\"", ",", "\"\<Cap\>\"", ",", 
     "\"\<CapitalDifferentialD\>\"", ",", "\"\<CapitalDigamma\>\"", ",", 
     "\"\<CapitalKoppa\>\"", ",", "\"\<CapitalSampi\>\"", ",", "\n", "\t", 
     "\t", "\"\<CapitalStigma\>\"", ",", "\"\<CapricornSign\>\"", ",", 
     "\"\<Cent\>\"", ",", "\"\<CenterDot\>\"", ",", "\"\<CenterEllipsis\>\"", 
     ",", "\"\<Checkmark\>\"", ",", "\n", "\t", "\t", "\"\<Chi\>\"", ",", 
     "\"\<CircleDot\>\"", ",", "\"\<CircleMinus\>\"", ",", 
     "\"\<CirclePlus\>\"", ",", "\"\<CircleTimes\>\"", ",", 
     "\"\<ClockwiseContourIntegral\>\"", ",", "\n", "\t", "\t", 
     "\"\<CommandKey\>\"", ",", "\"\<Conditioned\>\"", ",", 
     "\"\<Conjugate\>\"", ",", "\"\<ConjugateTranspose\>\"", ",", 
     "\"\<ConstantC\>\"", ",", "\"\<Continuation\>\"", ",", "\n", "\t", "\t", 
     "\"\<ContourIntegral\>\"", ",", "\"\<ControlKey\>\"", ",", 
     "\"\<CounterClockwiseContourIntegral\>\"", ",", "\"\<Cross\>\"", ",", 
     "\"\<Cup\>\"", ",", "\"\<CurlyCapitalUpsilon\>\"", ",", "\n", "\t", 
     "\t", "\"\<CurlyEpsilon\>\"", ",", "\"\<CurlyKappa\>\"", ",", 
     "\"\<CurlyPhi\>\"", ",", "\"\<CurlyPi\>\"", ",", "\"\<CurlyRho\>\"", 
     ",", "\"\<CurlyTheta\>\"", ",", "\n", "\t", "\t", "\"\<DeleteKey\>\"", 
     ",", "\"\<DifferenceDelta\>\"", ",", "\"\<DifferentialD\>\"", ",", 
     "\"\<Digamma\>\"", ",", "\"\<DirectedEdge\>\"", ",", 
     "\"\<DiscreteRatio\>\"", ",", "\n", "\t", "\t", "\"\<DiscreteShift\>\"", 
     ",", "\"\<DiscretionaryPageBreakAbove\>\"", ",", 
     "\"\<DiscretionaryPageBreakBelow\>\"", ",", "\"\<Distributed\>\"", ",", 
     "\"\<Divide\>\"", ",", "\"\<DotEqual\>\"", ",", "\n", "\t", "\t", 
     "\"\<DotlessJ\>\"", ",", "\"\<DottedSquare\>\"", ",", 
     "\"\<DoubleDagger\>\"", ",", "\"\<DoubledGamma\>\"", ",", 
     "\"\<DoubledPi\>\"", ",", "\"\<DoubleDownArrow\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubledPi\>\"", ",", "\"\<DoubleLeftArrow\>\"", ",", 
     "\"\<DoubleLeftRightArrow\>\"", ",", "\"\<DoubleLeftTee\>\"", ",", 
     "\"\<DoubleLongLeftArrow\>\"", ",", "\"\<DoubleLongLeftRightArrow\>\"", 
     ",", "\n", "\t", "\t", "\"\<DoubleLongRightArrow\>\"", ",", 
     "\"\<DoubleRightArrow\>\"", ",", "\"\<DoubleStruckA\>\"", ",", 
     "\"\<DoubleStruckB\>\"", ",", "\"\<DoubleStruckC\>\"", ",", 
     "\"\<DoubleStruckA\>\"", ",", "\n", "\t", "\t", "\"\<DoubleStruckB\>\"", 
     ",", "\"\<DoubleStruckC\>\"", ",", "\"\<DoubleStruckCapitalA\>\"", ",", 
     "\"\<DoubleStruckCapitalB\>\"", ",", "\"\<DoubleStruckCapitalC\>\"", 
     ",", "\"\<DoubleStruckCapitalD\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalE\>\"", ",", "\"\<DoubleStruckCapitalF\>\"", 
     ",", "\"\<DoubleStruckCapitalG\>\"", ",", "\"\<DoubleStruckCapitalH\>\"",
      ",", "\"\<DoubleStruckCapitalI\>\"", ",", 
     "\"\<DoubleStruckCapitalJ\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalK\>\"", ",", "\"\<DoubleStruckCapitalL\>\"", 
     ",", "\"\<DoubleStruckCapitalM\>\"", ",", "\"\<DoubleStruckCapitalN\>\"",
      ",", "\"\<DoubleStruckCapitalO\>\"", ",", 
     "\"\<DoubleStruckCapitalP\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalQ\>\"", ",", "\"\<DoubleStruckCapitalR\>\"", 
     ",", "\"\<DoubleStruckCapitalS\>\"", ",", "\"\<DoubleStruckCapitalT\>\"",
      ",", "\"\<DoubleStruckCapitalU\>\"", ",", 
     "\"\<DoubleStruckCapitalV\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalW\>\"", ",", "\"\<DoubleStruckCapitalX\>\"", 
     ",", "\"\<DoubleStruckCapitalY\>\"", ",", "\"\<DoubleStruckCapitalZ\>\"",
      ",", "\"\<DoubleStruckD\>\"", ",", "\"\<DoubleStruckE\>\"", ",", "\n", 
     "\t", "\t", "\"\<DoubleStruckEight\>\"", ",", "\"\<DoubleStruckF\>\"", 
     ",", "\"\<DoubleStruckFive\>\"", ",", "\"\<DoubleStruckFour\>\"", ",", 
     "\"\<DoubleStruckG\>\"", ",", "\"\<DoubleStruckH\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckI\>\"", ",", "\"\<DoubleStruckJ\>\"", ",", 
     "\"\<DoubleStruckK\>\"", ",", "\"\<DoubleStruckL\>\"", ",", 
     "\"\<DoubleStruckM\>\"", ",", "\"\<DoubleStruckN\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckNine\>\"", ",", "\"\<DoubleStruckO\>\"", ",", 
     "\"\<DoubleStruckOne\>\"", ",", "\"\<DoubleStruckP\>\"", ",", 
     "\"\<DoubleStruckQ\>\"", ",", "\"\<DoubleStruckR\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckS\>\"", ",", "\"\<DoubleStruckSeven\>\"", ",", 
     "\"\<DoubleStruckSix\>\"", ",", "\"\<DoubleStruckT\>\"", ",", 
     "\"\<DoubleStruckThree\>\"", ",", "\"\<DoubleStruckTwo\>\"", ",", "\n", 
     "\t", "\t", "\"\<DoubleStruckU\>\"", ",", "\"\<DoubleStruckV\>\"", ",", 
     "\"\<DoubleStruckW\>\"", ",", "\"\<DoubleStruckX\>\"", ",", 
     "\"\<DoubleStruckY\>\"", ",", "\"\<DoubleStruckZ\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckZero\>\"", ",", "\"\<DoubleUpArrow\>\"", ",", 
     "\"\<DoubleUpDownArrow\>\"", ",", "\"\<DownArrowBar\>\"", ",", 
     "\"\<DownArrow\>\"", ",", "\"\<DownBreve\>\"", ",", "\n", "\t", "\t", 
     "\"\<DownLeftRightVector\>\"", ",", "\"\<DownLeftTeeVector\>\"", ",", 
     "\"\<DownLeftVector\>\"", ",", "\"\<DownLeftVectorBar\>\"", ",", 
     "\"\<DownPointer\>\"", ",", "\"\<DownRightTeeVector\>\"", ",", "\n", 
     "\t", "\t", "\"\<DownRightVector\>\"", ",", "\"\<DownRightVectorBar\>\"",
      ",", "\"\<DownTeeArrow\>\"", ",", "\"\<Earth\>\"", ",", 
     "\"\<EighthNote\>\"", ",", "\"\<Element\>\"", ",", "\n", "\t", "\t", 
     "\"\<Ellipsis\>\"", ",", "\"\<EmptyRectangle\>\"", ",", 
     "\"\<EmptySet\>\"", ",", "\"\<EnterKey\>\"", ",", "\"\<EntityEnd\>\"", 
     ",", "\"\<EntityStart\>\"", ",", "\n", "\t", "\t", "\"\<Epsilon\>\"", 
     ",", "\"\<Equal\>\"", ",", "\"\<Equilibrium\>\"", ",", 
     "\"\<Equivalent\>\"", ",", "\"\<ErrorIndicator\>\"", ",", 
     "\"\<EscapeKey\>\"", ",", "\n", "\t", "\t", "\"\<Eta\>\"", ",", 
     "\"\<Euro\>\"", ",", "\"\<ExponentialE\>\"", ",", 
     "\"\<FilledSmallCircle\>\"", ",", "\"\<FinalSigma\>\"", ",", 
     "\"\<FirstPage\>\"", ",", "\n", "\t", "\t", "\"\<FormalA\>\"", ",", 
     "\"\<FormalAlpha\>\"", ",", "\"\<FormalB\>\"", ",", "\"\<FormalBeta\>\"",
      ",", "\"\<FormalC\>\"", ",", "\"\<FormalCapitalA\>\"", ",", "\n", "\t", 
     "\t", "\"\<FormalCapitalAlpha\>\"", ",", "\"\<FormalCapitalB\>\"", ",", 
     "\"\<FormalCapitalBeta\>\"", ",", "\"\<FormalCapitalC\>\"", ",", 
     "\"\<FormalCapitalChi\>\"", ",", "\"\<FormalCapitalD\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalDelta\>\"", ",", 
     "\"\<FormalCapitalDigamma\>\"", ",", "\"\<FormalCapitalE\>\"", ",", 
     "\"\<FormalCapitalEpsilon\>\"", ",", "\"\<FormalCapitalEta\>\"", ",", 
     "\"\<FormalCapitalF\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCapitalG\>\"", ",", "\"\<FormalCapitalGamma\>\"", ",", 
     "\"\<FormalCapitalH\>\"", ",", "\"\<FormalCapitalI\>\"", ",", 
     "\"\<FormalCapitalIota\>\"", ",", "\"\<FormalCapitalJ\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalK\>\"", ",", "\"\<FormalCapitalKappa\>\"", 
     ",", "\"\<FormalCapitalKoppa\>\"", ",", "\"\<FormalCapitalL\>\"", ",", 
     "\"\<FormalCapitalLambda\>\"", ",", "\"\<FormalCapitalM\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalMu\>\"", ",", "\"\<FormalCapitalN\>\"", 
     ",", "\"\<FormalCapitalNu\>\"", ",", "\"\<FormalCapitalO\>\"", ",", 
     "\"\<FormalCapitalOmega\>\"", ",", "\"\<FormalCapitalOmicron\>\"", ",", 
     "\n", "\t", "\t", "\"\<FormalCapitalP\>\"", ",", 
     "\"\<FormalCapitalPhi\>\"", ",", "\"\<FormalCapitalPi\>\"", ",", 
     "\"\<FormalCapitalPsi\>\"", ",", "\"\<FormalCapitalQ\>\"", ",", 
     "\"\<FormalCapitalR\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCapitalRho\>\"", ",", "\"\<FormalCapitalS\>\"", ",", 
     "\"\<FormalCapitalSampi\>\"", ",", "\"\<FormalCapitalSigma\>\"", ",", 
     "\"\<FormalCapitalStigma\>\"", ",", "\"\<FormalCapitalT\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalTau\>\"", ",", 
     "\"\<FormalCapitalTheta\>\"", ",", "\"\<FormalCapitalU\>\"", ",", 
     "\"\<FormalCapitalUpsilon\>\"", ",", "\"\<FormalCapitalV\>\"", ",", 
     "\"\<FormalCapitalW\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCapitalX\>\"", ",", "\"\<FormalCapitalXi\>\"", ",", 
     "\"\<FormalCapitalY\>\"", ",", "\"\<FormalCapitalZ\>\"", ",", 
     "\"\<FormalCapitalZeta\>\"", ",", "\"\<FormalChi\>\"", ",", "\n", "\t", 
     "\t", "\"\<FormalCurlyCapitalUpsilon\>\"", ",", 
     "\"\<FormalCurlyEpsilon\>\"", ",", "\"\<FormalCurlyKappa\>\"", ",", 
     "\"\<FormalCurlyPhi\>\"", ",", "\"\<FormalCurlyPi\>\"", ",", 
     "\"\<FormalCurlyRho\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCurlyTheta\>\"", ",", "\"\<FormalD\>\"", ",", 
     "\"\<FormalDelta\>\"", ",", "\"\<FormalDigamma\>\"", ",", 
     "\"\<FormalE\>\"", ",", "\"\<FormalEpsilon\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalEta\>\"", ",", "\"\<FormalF\>\"", ",", 
     "\"\<FormalFinalSigma\>\"", ",", "\"\<FormalG\>\"", ",", 
     "\"\<FormalGamma\>\"", ",", "\"\<FormalH\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalI\>\"", ",", "\"\<FormalIota\>\"", ",", "\"\<FormalJ\>\"", 
     ",", "\"\<FormalK\>\"", ",", "\"\<FormalKappa\>\"", ",", 
     "\"\<FormalKoppa\>\"", ",", "\n", "\t", "\t", "\"\<FormalL\>\"", ",", 
     "\"\<FormalLambda\>\"", ",", "\"\<FormalM\>\"", ",", "\"\<FormalMu\>\"", 
     ",", "\"\<FormalN\>\"", ",", "\"\<FormalNu\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalO\>\"", ",", "\"\<FormalOmega\>\"", ",", 
     "\"\<FormalOmicron\>\"", ",", "\"\<FormalP\>\"", ",", 
     "\"\<FormalPhi\>\"", ",", "\"\<FormalPi\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalPsi\>\"", ",", "\"\<FormalQ\>\"", ",", "\"\<FormalR\>\"", 
     ",", "\"\<FormalRho\>\"", ",", "\"\<FormalS\>\"", ",", 
     "\"\<FormalSampi\>\"", ",", "\n", "\t", "\t", "\"\<FormalSigma\>\"", 
     ",", "\"\<FormalStigma\>\"", ",", "\"\<FormalT\>\"", ",", 
     "\"\<FormalTau\>\"", ",", "\"\<FormalTheta\>\"", ",", "\"\<FormalU\>\"", 
     ",", "\n", "\t", "\t", "\"\<FormalUpsilon\>\"", ",", "\"\<FormalV\>\"", 
     ",", "\"\<FormalW\>\"", ",", "\"\<FormalX\>\"", ",", "\"\<FormalXi\>\"", 
     ",", "\"\<FormalY\>\"", ",", "\n", "\t", "\t", "\"\<FormalZ\>\"", ",", 
     "\"\<FormalZeta\>\"", ",", "\"\<FreakedSmiley\>\"", ",", 
     "\"\<Function\>\"", ",", "\"\<GeminiSign\>\"", ",", "\"\<GothicA\>\"", 
     ",", "\n", "\t", "\t", "\"\<GothicB\>\"", ",", "\"\<GothicC\>\"", ",", 
     "\"\<GothicCapitalA\>\"", ",", "\"\<GothicCapitalB\>\"", ",", 
     "\"\<GothicCapitalC\>\"", ",", "\"\<GothicCapitalD\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalE\>\"", ",", "\"\<GothicCapitalF\>\"", ",", 
     "\"\<GothicCapitalG\>\"", ",", "\"\<GothicCapitalH\>\"", ",", 
     "\"\<GothicCapitalI\>\"", ",", "\"\<GothicCapitalJ\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalK\>\"", ",", "\"\<GothicCapitalL\>\"", ",", 
     "\"\<GothicCapitalM\>\"", ",", "\"\<GothicCapitalN\>\"", ",", 
     "\"\<GothicCapitalO\>\"", ",", "\"\<GothicCapitalP\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalQ\>\"", ",", "\"\<GothicCapitalR\>\"", ",", 
     "\"\<GothicCapitalS\>\"", ",", "\"\<GothicCapitalT\>\"", ",", 
     "\"\<GothicCapitalU\>\"", ",", "\"\<GothicCapitalV\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalW\>\"", ",", "\"\<GothicCapitalX\>\"", ",", 
     "\"\<GothicCapitalY\>\"", ",", "\"\<GothicCapitalZ\>\"", ",", 
     "\"\<GothicD\>\"", ",", "\"\<GothicE\>\"", ",", "\n", "\t", "\t", 
     "\"\<GothicEight\>\"", ",", "\"\<GothicF\>\"", ",", "\"\<GothicFive\>\"",
      ",", "\"\<GothicFour\>\"", ",", "\"\<GothicG\>\"", ",", 
     "\"\<GothicH\>\"", ",", "\n", "\t", "\t", "\"\<GothicI\>\"", ",", 
     "\"\<GothicJ\>\"", ",", "\"\<GothicK\>\"", ",", "\"\<GothicL\>\"", ",", 
     "\"\<GothicM\>\"", ",", "\"\<GothicN\>\"", ",", "\n", "\t", "\t", 
     "\"\<GothicNine\>\"", ",", "\"\<GothicO\>\"", ",", "\"\<GothicOne\>\"", 
     ",", "\"\<GothicP\>\"", ",", "\"\<GothicQ\>\"", ",", "\"\<GothicR\>\"", 
     ",", "\n", "\t", "\t", "\"\<GothicS\>\"", ",", "\"\<GothicSeven\>\"", 
     ",", "\"\<GothicSix\>\"", ",", "\"\<GothicT\>\"", ",", 
     "\"\<GothicThree\>\"", ",", "\"\<GothicTwo\>\"", ",", "\n", "\t", "\t", 
     "\"\<GothicU\>\"", ",", "\"\<GothicV\>\"", ",", "\"\<GothicW\>\"", ",", 
     "\"\<GothicX\>\"", ",", "\"\<GothicY\>\"", ",", "\"\<GothicZ\>\"", ",", 
     "\n", "\t", "\t", "\"\<GothicZero\>\"", ",", "\"\<GrayCircle\>\"", ",", 
     "\"\<GraySquare\>\"", ",", "\"\<Hacek\>\"", ",", 
     "\"\<HermitianConjugate\>\"", ",", "\"\<ImaginaryI\>\"", ",", "\n", "\t",
      "\t", "\"\<ImaginaryJ\>\"", ",", "\"\<Implies\>\"", ",", 
     "\"\<IndentingNewLine\>\"", ",", "\"\<Iota\>\"", ",", "\"\<Kappa\>\"", 
     ",", "\"\<KernelIcon\>\"", ",", "\n", "\t", "\t", "\"\<Koppa\>\"", ",", 
     "\"\<Lambda\>\"", ",", "\"\<LastPage\>\"", ",", "\"\<LeftArrow\>\"", 
     ",", "\"\<LeftArrowRightArrow\>\"", ",", "\"\<LeftAssociation\>\"", ",", 
     "\n", "\t", "\t", "\"\<LeftBracketingBar\>\"", ",", 
     "\"\<LeftDoubleBracket\>\"", ",", "\"\<LeftDoubleBracketingBar\>\"", 
     ",", "\"\<LeftDownTeeVector\>\"", ",", "\"\<LeftDownVectorBar\>\"", ",", 
     "\"\<LeftModified\>\"", ",", "\n", "\t", "\t", "\"\<LeftRightArrow\>\"", 
     ",", "\"\<LeftRightVector\>\"", ",", "\"\<LeftSkeleton\>\"", ",", 
     "\"\<LeftTeeArrow\>\"", ",", "\"\<LeftTeeVector\>\"", ",", 
     "\"\<LeftTriangleBar\>\"", ",", "\n", "\t", "\t", 
     "\"\<LeftTriangleEqual\>\"", ",", "\"\<LeftUpDownVector\>\"", ",", 
     "\"\<LeftUpTeeVector\>\"", ",", "\"\<LeftUpVectorBar\>\"", ",", 
     "\"\<LeftVector\>\"", ",", "\"\<LeftVectorBar\>\"", ",", "\n", "\t", 
     "\t", "\"\<LeoSign\>\"", ",", "\"\<LightBulb\>\"", ",", "\"\<Limit\>\"", 
     ",", "\"\<LineSeparator\>\"", ",", "\"\<LibraSign\>\"", ",", 
     "\"\<LongDash\>\"", ",", "\n", "\t", "\t", "\"\<LongEqual\>\"", ",", 
     "\"\<LongLeftArrow\>\"", ",", "\"\<LongLeftRightArrow\>\"", ",", 
     "\"\<LongRightArrow\>\"", ",", "\"\<LowerLeftArrow\>\"", ",", 
     "\"\<LowerRightArrow\>\"", ",", "\n", "\t", "\t", "\"\<Mars\>\"", ",", 
     "\"\<MathematicaIcon\>\"", ",", "\"\<MaxLimit\>\"", ",", 
     "\"\<MinLimit\>\"", ",", "\"\<Mu\>\"", ",", "\"\<Natural\>\"", ",", "\n",
      "\t", "\t", "\"\<Neptune\>\"", ",", "\"\<NestedGreaterGreater\>\"", 
     ",", "\"\<NestedLessLess\>\"", ",", "\"\<NeutralSmiley\>\"", ",", 
     "\"\<NotElement\>\"", ",", "\n", "\t", "\t", "\"\<NotEqual\>\"", ",", 
     "\"\<NotEqualTilde\>\"", ",", "\"\<NotGreaterGreater\>\"", ",", 
     "\"\<NotGreaterSlantEqual\>\"", ",", "\"\<NotHumpDownHump\>\"", ",", 
     "\"\<NotHumpEqual\>\"", ",", "\n", "\t", "\t", 
     "\"\<NotLeftTriangleBar\>\"", ",", "\"\<NotLessEqual\>\"", ",", 
     "\"\<NotLessLess\>\"", ",", "\"\<NotLessSlantEqual\>\"", ",", 
     "\"\<NotNestedGreaterGreater\>\"", ",", "\"\<NotNestedLessLess\>\"", ",",
      "\n", "\t", "\t", "\"\<NotPrecedesEqual\>\"", ",", 
     "\"\<NotPrecedesTilde\>\"", ",", "\"\<NotRightTriangleBar\>\"", ",", 
     "\"\<NotSquareSubset\>\"", ",", "\"\<NotSquareSuperset\>\"", ",", 
     "\"\<NotSucceedsEqual\>\"", ",", "\n", "\t", "\t", 
     "\"\<NotSucceedsTilde\>\"", ",", "\"\<NotVerticalBar\>\"", ",", 
     "\"\<NumberSign\>\"", ",", "\"\<Omega\>\"", ",", "\"\<Omicron\>\"", ",", 
     "\"\<OptionKey\>\"", ",", "\n", "\t", "\t", "\"\<OverBracket\>\"", ",", 
     "\"\<ParagraphSeparator\>\"", ",", "\"\<PermutationProduct\>\"", ",", 
     "\"\<Phi\>\"", ",", "\"\<Pi\>\"", ",", "\"\<Piecewise\>\"", ",", "\n", 
     "\t", "\t", "\"\<PiscesSign\>\"", ",", "\"\<Placeholder\>\"", ",", 
     "\"\<Proportional\>\"", ",", "\"\<Psi\>\"", ",", "\n", "\t\t", 
     "\"\<ReturnKey\>\"", ",", "\"\<ReverseElement\>\"", ",", 
     "\"\<ReverseEquilibrium\>\"", ",", "\"\<ReverseUpEquilibrium\>\"", ",", 
     "\"\<Rho\>\"", ",", "\"\<RightAngle\>\"", ",", "\n", "\t", "\t", 
     "\"\<RightArrow\>\"", ",", "\"\<RightArrowBar\>\"", ",", 
     "\"\<RightArrowLeftArrow\>\"", ",", "\"\<RightAssociation\>\"", ",", 
     "\"\<RightBracketingBar\>\"", ",", "\"\<RightCeiling\>\"", ",", "\n", 
     "\t", "\t", "\"\<RightDoubleBracket\>\"", ",", 
     "\"\<RightDoubleBracketingBar\>\"", ",", "\"\<RightDownTeeVector\>\"", 
     ",", "\"\<RightDownVector\>\"", ",", "\"\<RightDownVectorBar\>\"", ",", 
     "\"\<RightModified\>\"", ",", "\n", "\t", "\t", "\"\<RightSkeleton\>\"", 
     ",", "\"\<RightTeeArrow\>\"", ",", "\"\<RightTeeVector\>\"", ",", 
     "\"\<RightTriangleBar\>\"", ",", "\"\<RightUpDownVector\>\"", ",", 
     "\"\<RightUpTeeVector\>\"", ",", "\n", "\t", "\t", 
     "\"\<RightUpVector\>\"", ",", "\"\<RightUpVectorBar\>\"", ",", 
     "\"\<RightVector\>\"", ",", "\"\<RightVectorBar\>\"", ",", 
     "\"\<RoundImplies\>\"", ",", "\"\<RoundSpaceIndicator\>\"", ",", "\n", 
     "\t", "\t", "\"\<Rule\>\"", ",", "\"\<RuleDelayed\>\"", ",", 
     "\"\<SagittariusSign\>\"", ",", "\"\<Sampi\>\"", ",", 
     "\"\<ScorpioSign\>\"", ",", "\"\<ScriptA\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptB\>\"", ",", "\"\<ScriptC\>\"", ",", "\"\<ScriptCapitalA\>\"",
      ",", "\"\<ScriptCapitalB\>\"", ",", "\"\<ScriptCapitalC\>\"", ",", 
     "\"\<ScriptCapitalD\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptCapitalE\>\"", ",", "\"\<ScriptCapitalF\>\"", ",", 
     "\"\<ScriptCapitalG\>\"", ",", "\"\<ScriptCapitalH\>\"", ",", 
     "\"\<ScriptCapitalI\>\"", ",", "\"\<ScriptCapitalJ\>\"", ",", "\n", "\t",
      "\t", "\"\<ScriptCapitalK\>\"", ",", "\"\<ScriptCapitalL\>\"", ",", 
     "\"\<ScriptCapitalM\>\"", ",", "\"\<ScriptCapitalN\>\"", ",", 
     "\"\<ScriptCapitalO\>\"", ",", "\"\<ScriptCapitalP\>\"", ",", "\n", "\t",
      "\t", "\"\<ScriptCapitalQ\>\"", ",", "\"\<ScriptCapitalR\>\"", ",", 
     "\"\<ScriptCapitalS\>\"", ",", "\"\<ScriptCapitalT\>\"", ",", 
     "\"\<ScriptCapitalU\>\"", ",", "\"\<ScriptCapitalV\>\"", ",", "\n", "\t",
      "\t", "\"\<ScriptCapitalW\>\"", ",", "\"\<ScriptCapitalX\>\"", ",", 
     "\"\<ScriptCapitalY\>\"", ",", "\"\<ScriptCapitalZ\>\"", ",", 
     "\"\<ScriptD\>\"", ",", "\"\<ScriptDotlessI\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptDotlessJ\>\"", ",", "\"\<ScriptE\>\"", ",", 
     "\"\<ScriptEight\>\"", ",", "\"\<ScriptF\>\"", ",", "\"\<ScriptFive\>\"",
      ",", "\"\<ScriptFour\>\"", ",", "\n", "\t", "\t", "\"\<ScriptG\>\"", 
     ",", "\"\<ScriptH\>\"", ",", "\"\<ScriptI\>\"", ",", "\"\<ScriptJ\>\"", 
     ",", "\"\<ScriptK\>\"", ",", "\"\<ScriptL\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptM\>\"", ",", "\"\<ScriptN\>\"", ",", "\"\<ScriptNine\>\"", 
     ",", "\"\<ScriptO\>\"", ",", "\"\<ScriptOne\>\"", ",", "\"\<ScriptP\>\"",
      ",", "\n", "\t", "\t", "\"\<ScriptQ\>\"", ",", "\"\<ScriptR\>\"", ",", 
     "\"\<ScriptS\>\"", ",", "\"\<ScriptSeven\>\"", ",", "\"\<ScriptSix\>\"", 
     ",", "\"\<ScriptT\>\"", ",", "\n", "\t", "\t", "\"\<ScriptThree\>\"", 
     ",", "\"\<ScriptTwo\>\"", ",", "\"\<ScriptU\>\"", ",", "\"\<ScriptV\>\"",
      ",", "\"\<ScriptW\>\"", ",", "\"\<ScriptX\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptY\>\"", ",", "\"\<ScriptZ\>\"", ",", "\"\<ScriptZero\>\"", 
     ",", "\"\<SelectionPlaceholder\>\"", ",", "\"\<ShortLeftArrow\>\"", ",", 
     "\"\<ShortRightArrow\>\"", ",", "\n", "\t", "\t", "\"\<Sigma\>\"", ",", 
     "\"\<SpaceKey\>\"", ",", "\"\<SpanFromAbove\>\"", ",", 
     "\"\<SpanFromBoth\>\"", ",", "\"\<SpanFromLeft\>\"", ",", 
     "\"\<SphericalAngle\>\"", ",", "\n", "\t", "\t", "\"\<Sqrt\>\"", ",", 
     "\"\<Square\>\"", ",", "\"\<Sterling\>\"", ",", "\"\<Stigma\>\"", ",", 
     "\"\<SuchThat\>\"", ",", "\"\<Sum\>\"", ",", "\n", "\t", "\t", 
     "\"\<SystemEnterKey\>\"", ",", "\"\<SystemsModelDelay\>\"", ",", 
     "\"\<SZ\>\"", ",", "\"\<TabKey\>\"", ",", "\"\<Tau\>\"", ",", 
     "\"\<TaurusSign\>\"", ",", "\n", "\t", "\t", "\"\<TensorProduct\>\"", 
     ",", "\"\<TensorWedge\>\"", ",", "\"\<Theta\>\"", ",", "\"\<Thorn\>\"", 
     ",", "\"\<Transpose\>\"", ",", "\"\<TripleDot\>\"", ",", "\n", "\t", 
     "\t", "\"\<TwoWayRule\>\"", ",", "\"\<UnderBracket\>\"", ",", 
     "\"\<UndirectedEdge\>\"", ",", "\"\<UnionPlus\>\"", ",", 
     "\"\<UpArrowBar\>\"", ",", "\"\<UpArrowDownArrow\>\"", ",", "\n", "\t", 
     "\t", "\"\<UpEquilibrium\>\"", ",", "\"\<UpperLeftArrow\>\"", ",", 
     "\"\<UpperRightArrow\>\"", ",", "\"\<UpPointer\>\"", ",", 
     "\"\<Upsilon\>\"", ",", "\"\<UpTeeArrow\>\"", ",", "\n", "\t", "\t", 
     "\"\<Uranus\>\"", ",", "\"\<VerticalBar\>\"", ",", 
     "\"\<VerticalSeparator\>\"", ",", "\"\<VirgoSign\>\"", ",", 
     "\"\<WarningSign\>\"", ",", "\"\<WatchIcon\>\"", ",", "\n", "\t", "\t", 
     "\"\<WhiteBishop\>\"", ",", "\"\<WhiteKing\>\"", ",", 
     "\"\<WhiteKnight\>\"", ",", "\"\<WhitePawn\>\"", ",", 
     "\"\<WhiteQueen\>\"", ",", "\"\<WhiteRook\>\"", ",", "\n", "\t", "\t", 
     "\"\<Wolf\>\"", ",", "\"\<WolframLanguageLogo\>\"", ",", 
     "\"\<WolframLanguageLogoCircle\>\"", ",", "\"\<Xi\>\"", ",", 
     "\"\<Xnor\>\"", ",", "\"\<Yen\>\"", ",", "\n", "\t", "\t", 
     "\"\<Zeta\>\""}], "\n", "\t", "\t", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListConv", "=", "\n", "\t", 
   RowBox[{"ToExpression", "@", "\n", "\t\t", 
    RowBox[{"Map", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"\"\<\\\"\\\\[\>\"", "<>", "#", "<>", "\"\<]\\\"\>\""}], "&"}],
       ",", "\n", "\t\t\t", "$XMLFontPatchDumbSpecialCharListLong"}], "\n", 
     "\t\t\t", "]"}]}]}], ";"}]}], "CodeInput",
 CellChangeTimes->{{3.7232581633696337`*^9, 3.723258299326816*^9}, 
   3.7232584782700663`*^9, {3.723258525790472*^9, 3.723258538640119*^9}, {
   3.7232595701116743`*^9, 3.723259654447546*^9}, 3.7232597699983387`*^9, {
   3.7232599091135406`*^9, 3.723259922319975*^9}, {3.723260041404097*^9, 
   3.7232600812411833`*^9}, {3.723261298034605*^9, 3.7232613049516993`*^9}, {
   3.7232613507512417`*^9, 3.7232613514632874`*^9}, {3.723261592615275*^9, 
   3.723261600664452*^9}, {3.723489481175343*^9, 
   3.723489484439087*^9}},ExpressionUUID->"0a36944b-8c59-4975-988d-\
c627cfd822d3"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchKeyboardElements\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"465e0649-9ef9-49e1-bcf6-91eb3ae7d4a8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLKBDPatchStyles", "=", "\n", "\t", 
   RowBox[{"{", 
    RowBox[{
    "\"\<style\>\"", "\[Rule]", 
     "\"\<color: gray; font-size: 10px; border: solid 1px gray;\>\""}], 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"52ae8549-100f-4142-bb93-47681a81afc4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"xmlFontPatchKBDEl", "[", "k_", "]"}], ":=", "\n", "\t", 
   RowBox[{"XMLElement", "[", 
    RowBox[{"\"\<span\>\"", ",", "\n", "\t\t", 
     RowBox[{"Flatten", "@", 
      RowBox[{"{", 
       RowBox[{"$XMLKBDPatchStyles", ",", " ", "$XMLFontPatchFlag"}], "}"}]}],
      ",", "\n", "\t\t", 
     RowBox[{"{", 
      RowBox[{"XMLElement", "[", 
       RowBox[{"\"\<kbd\>\"", ",", 
        RowBox[{"{", "$XMLFontPatchFlag", "}"}], ",", 
        RowBox[{"{", "k", "}"}]}], "]"}], "}"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"4767dca0-aa21-4fc4-acd4-3793cef8824a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLFontPatchKeyboardElements", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"\"\<\\\\[AltKey]\>\"", "|", "\"\<\[AltKey]\>\""}], "\[Rule]", 
      "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<ALT\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[CommandKey]\>\"", "|", "\"\<\[CommandKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "[", "\"\<CMD\>\"", "]"}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[ControlKey]\>\"", "|", "\"\<\[ControlKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<CTRL\>\""}]}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[DeleteKey]\>\"", "|", "\"\<\[DeleteKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<DEL\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[EnterKey]\>\"", "|", "\"\<\[EnterKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<ENTER\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[EscapeKey]\>\"", "|", "\"\<\[EscapeKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<ESC\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[OptionKey]\>\"", "|", "\"\<\[OptionKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<OPTION\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[ReturnKey]\>\"", "|", "\"\<\[ReturnKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<RET\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[ShiftKey]\>\"", "|", "\"\<\[ShiftKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<SHIFT\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[SpaceKey]\>\"", "|", "\"\<\[SpaceKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<SPACE\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{
      "\"\<\\\\[SystemEnterKey]\>\"", "|", "\"\<\[SystemEnterKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<RET\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[TabKey]\>\"", "|", "\"\<\[TabKey]\>\""}], "\[Rule]", 
      "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<TAB\>\""}]}]}], "\n", "\t\t", 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"9d45318c-dedb-43a9-8d92-8220784191e0"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchManualUnicodeReassignments\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"14d04a13-3195-4a3a-8de4-33a9a128e6eb"],

Cell[BoxData[
 RowBox[{"\n", 
  RowBox[{
   RowBox[{"$XMLFontPatchManualUnicodeReassignments", "=", "\n", "\t", 
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"\"\<\\\\[KeyBar]\>\"", "|", "\"\<\[KeyBar]\>\""}], "\[Rule]", 
       "\n", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"$XMLFontPatchFlag", ",", " ", 
            RowBox[{
            "\"\<style\>\"", "\[Rule]", 
             "\"\<font-weight: bold; font-size: 8px;\>\""}]}], "}"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"{", "\"\<\:2011\>\"", "}"}]}], "\n", "\t\t\t\t", "]"}]}], 
      ",", "\n", "\t\t", 
      RowBox[{
       RowBox[{"\"\<\\\\[RightPointer]\>\"", "|", "\"\<\[RightPointer]\>\""}],
        "\[Rule]", "\n", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"$XMLFontPatchFlag", ",", " ", 
            RowBox[{
            "\"\<style\>\"", "\[Rule]", 
             "\"\<font-weight: bold; font-size: 8px;\>\""}]}], "}"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"{", "\"\<\[FilledRightTriangle]\>\"", "}"}]}], "\n", 
        "\t\t\t\t", "]"}]}], ",", "\n", "\t\t", 
      RowBox[{
       RowBox[{"\"\<\\\\[LeftPointer]\>\"", "|", "\"\<\[LeftPointer]\>\""}], 
       "\[Rule]", "\n", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"$XMLFontPatchFlag", ",", " ", 
            RowBox[{
            "\"\<style\>\"", "\[Rule]", 
             "\"\<font-weight: bold; font-size: 8px;\>\""}]}], "}"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"{", "\"\<\[FilledLeftTriangle]\>\"", "}"}]}], "\n", 
        "\t\t\t\t", "]"}]}]}], "\n", "\t\t", "}"}]}], 
   ";"}]}]], \
"CodeInput",ExpressionUUID->"5c7c8b18-d1fb-4ce7-b2ee-238a2613b057"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchStringToXMLElementRules\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"b821743f-e09a-4fcb-8d26-6f6278c1c163"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLFontPatchFlag", "=", "\n", "\t", 
   RowBox[{"\"\<-fake-attr-fonts-patched\>\"", "\[Rule]", "\"\<true\>\""}]}], 
  ";"}]], "CodeInput",
 CellChangeTimes->{{3.723489972755496*^9, 
  3.72348998372502*^9}},ExpressionUUID->"e4ef4e00-bbc5-43b7-a3f5-\
51b78b7e8f87"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListLong", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "$XMLFontPatchDumbSpecialCharListLong"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListConv", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "$XMLFontPatchDumbSpecialCharListConv"}]}], 
  ";"}]}], "CodeInput",
 CellChangeTimes->{{3.723258358010404*^9, 3.7232583671918163`*^9}, {
  3.723489459974172*^9, 
  3.723489486262783*^9}},ExpressionUUID->"43e26f5a-022b-4e80-8e25-\
450669e90f85"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLFontPatchStringToXMLElementRules", "=", "\n", "\t", 
   RowBox[{"Flatten", "@", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "$XMLFontPatchKeyboardElements", ",", "\n", "\t\t\t", 
      "$XMLFontPatchManualUnicodeReassignments", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"\"\<\\\\[\>\"", "~~", 
        RowBox[{"s", ":", 
         RowBox[{"(", "$XMLFontPatchDumbSpecialCharListLong", ")"}]}], "~~", 
        "\"\<]\>\""}], ":>", "\n", "\t", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"\"\<class\>\"", "\[Rule]", 
            RowBox[{"\"\<special-character \>\"", "<>", "s"}]}], ",", "\n", 
           "\t", "\t\t\t\t\t", "$XMLFontPatchFlag"}], "\n", "\t", 
          "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"ToExpression", "[", 
           RowBox[{"\"\<\\\"\\\\[\>\"", "<>", "s", "<>", "\"\<]\\\"\>\""}], 
           "]"}], "\n", "\t", "\t\t\t\t\t", "}"}]}], "\n", "\t", "\t\t\t\t", 
        "]"}]}], ",", "\n", "\t", "\t\t", 
      RowBox[{
       RowBox[{"char", ":", "$XMLFontPatchDumbSpecialCharListConv"}], ":>", 
       "\n", "\t", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"\"\<class\>\"", "\[Rule]", 
            RowBox[{"\"\<special-character \>\"", "<>", 
             RowBox[{"CharacterName", "[", "char", "]"}]}]}], ",", " ", "\n", 
           "\t", "\t\t\t\t\t", "$XMLFontPatchFlag"}], "\n", "\t", 
          "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{
         "{", "\n", "\t", "\t\t\t\t\t", "char", "\n", "\t", "\t\t\t\t\t", 
          "}"}]}], "\n", "\t", "\t\t\t\t", "]"}]}]}], "\n", "\t", "\t\t", 
     "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"ecbc7746-c53a-4486-9c36-216f1e067078"]
}, Open  ]]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplatePreProcess\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712633214138015*^9, 3.712633223527268*^9}, 
   3.71268299564373*^9},ExpressionUUID->"5790e13e-94a3-485d-90c9-\
12e6dada52cb"],

Cell[BoxData[
 RowBox[{"$WebSiteTemplateAttachIDElements", "=", "\n", "\t", 
  RowBox[{"{", "\n", "\t\t", 
   RowBox[{
   "\"\<pre\>\"", ",", " ", "\"\<h1\>\"", ",", " ", "\"\<h2\>\"", ",", " ", 
    "\n", "\t\t", "\"\<img\>\"", ",", " ", "\"\<p\>\""}], "\n", "\t\t", 
   "}"}]}]], \
"CodeInput",ExpressionUUID->"2c7c4884-4b11-4b08-a5da-1d057f17b0f7"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessAttachIDs\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"1bd1c2fe-44d3-4b7a-8097-23536ebf0b9f"],

Cell[BoxData[
 RowBox[{"$WebSiteTemplateAttachIDElements", "=", "\n", "\t", 
  RowBox[{"{", 
   RowBox[{
   "\"\<pre\>\"", ",", " ", "\"\<p\>\"", ",", " ", "\"\<blockquote\>\"", ",", 
    " ", "\"\<img\>\"", ",", " ", "\"\<h1\>\"", ",", " ", "\"\<h2\>\"", ",", 
    " ", "\"\<h3\>\""}], 
   "}"}]}]], \
"CodeInput",ExpressionUUID->"12026465-ec8d-4a83-9749-9fa7a138e30b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessAttachIDs", "[", "xml_", "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"$$id", "=", "1"}], "}"}], ",", "\n", "\t\t", 
    RowBox[{"ReplaceRepeated", "[", "\n", "\t\t\t", 
     RowBox[{"xml", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"el", ":", 
          RowBox[{
          "Alternatives", "@@", "$WebSiteTemplateAttachIDElements"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"c_", "?", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"#", ",", "\"\<id\>\"", ",", "None"}], "]"}], "===", 
             "None"}], "&"}], ")"}]}], ",", "\n", "\t\t\t\t", "e_"}], "\n", 
        "\t\t\t\t", "]"}], ":>", "\n", "\t\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"el", ",", " ", 
         RowBox[{"Append", "[", 
          RowBox[{"c", ",", " ", 
           RowBox[{"\"\<id\>\"", "\[Rule]", 
            RowBox[{"el", "<>", 
             RowBox[{"ToString", "[", 
              RowBox[{"$$id", "++"}], "]"}]}]}]}], "]"}], ",", " ", "e"}], 
        "]"}]}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"0afac672-c0e9-4ba5-9742-0cc5d9b30b19"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessPrettyPrint\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"5ee87c1e-ef6b-404c-8c2e-95065d53a325"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"webSiteTemplatePreProcessCodeHighlighting", "[", 
    RowBox[{"tag_", ",", " ", "lang_"}], "]"}], "[", "xml_", "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"nullang", "=", "\n", "\t\t\t\t", 
       RowBox[{"Switch", "[", 
        RowBox[{
        "tag", ",", " ", "\n", "\t\t\t\t\t", "\"\<prettyprint\>\"", ",", " ", 
         "\"\<lang-none\>\"", ",", " ", "\n", "\t\t\t\t\t", 
         "\"\<highlight\>\"", ",", " ", "\"\<highlight-source-none\>\"", ",", 
         "\n", "\t\t\t\t\t", "_", ",", " ", "\"\<language-none\>\""}], "\n", 
        "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
      RowBox[{"langTag", "=", "\n", "\t\t\t\t", 
       RowBox[{"Switch", "[", 
        RowBox[{
        "tag", ",", " ", "\n", "\t\t\t\t\t", "\"\<prettyprint\>\"", ",", " ", 
         "\"\<lang-\>\"", ",", " ", "\n", "\t\t\t\t\t", "\"\<highlight\>\"", 
         ",", " ", "\"\<highlight-source-\>\"", ",", "\n", "\t\t\t\t\t", "_", 
         ",", " ", "\"\<language-\>\""}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n",
      "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"ReplaceRepeated", "[", "\n", "\t\t\t", 
     RowBox[{"xml", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t", 
         RowBox[{"c_", "?", 
          RowBox[{"(", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"StringFreeQ", "[", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{"#", ",", "\"\<class\>\"", ",", "\"\<\>\""}], "]"}], 
               ",", " ", 
               RowBox[{"tag", "|", "nullang"}]}], "]"}], ")"}], "\n", 
            "\t\t\t\t\t\t", "&"}], ")"}]}], ",", "\n", "\t\t\t\t", "e_"}], 
        "\n", "\t\t\t\t", "]"}], ":>", "\n", "\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t", 
          RowBox[{"ReplacePart", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Association", "@", "c"}], ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{"StringTrim", "@", "\n", "\t\t\t\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
               RowBox[{
               "\"\<`base` `tag` `lang`\>\"", ",", "\n", 
                "\t\t\t\t\t\t\t\t\t\t", 
                RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"\"\<base\>\"", "->", 
                   RowBox[{"Lookup", "[", 
                    RowBox[{
                    "c", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                    "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"\"\<tag\>\"", "\[Rule]", "tag"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                  "\"\<lang\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringQ", "@", "lang"}], "&&", 
                    RowBox[{"StringFreeQ", "[", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    "c", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                    "]"}], ",", " ", "langTag"}], "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"langTag", "<>", "lang"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "\"\<\>\""}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t\t", "|>"}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}]}], "\n", "\t\t\t\t\t\t\t", 
           "]"}]}], ",", "\n", "\t\t\t\t\t", "e"}], "\n", "\t\t\t\t\t", 
        "]"}]}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"3a7088f8-44e6-4115-86bb-a822af9e0ad9"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessFonts\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"a26ca9c9-e2fd-492a-a280-0c39374722a4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessFonts", "[", "xml_", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"ReplaceRepeated", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"ReplaceRepeated", "[", "\n", "\t\t\t", 
     RowBox[{"xml", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"a_", ",", " ", 
         RowBox[{"b_", "?", 
          RowBox[{"(", 
           RowBox[{"FreeQ", "[", "$XMLFontPatchFlag", "]"}], ")"}]}], ",", 
         " ", "d_"}], "]"}], ":>", "\n", "\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"a", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Append", "[", 
          RowBox[{"b", ",", " ", "$XMLFontPatchFlag"}], "]"}], ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{"d", ",", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"s_String", ":>", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"StringExpression", "[", "expr___", "]"}], 
               "\[RuleDelayed]", "expr"}], "]"}], "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"StringReplace", "[", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
              "s", ",", "\n", "\t\t\t\t\t\t\t\t", 
               "$XMLFontPatchStringToXMLElementRules"}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", "1", "}"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", 
        "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"XMLElement", "[", 
      RowBox[{"a_", ",", " ", 
       RowBox[{"b_", "?", 
        RowBox[{"(", 
         RowBox[{"MemberQ", "[", "$XMLFontPatchFlag", "]"}], ")"}]}], ",", 
       " ", "c_"}], "]"}], ":>", "\n", "\t\t\t", 
     RowBox[{"XMLElement", "[", 
      RowBox[{"a", ",", " ", 
       RowBox[{"Most", "[", "b", "]"}], ",", " ", "c"}], "]"}]}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"e4b3528f-bdc9-421d-b2ea-29e906313b36"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessInOut\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6e6378de-e3c5-4151-b9b5-6133fdc21fdb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "$WebSiteTemplatePreProcessInOutToken", "=", "\n", "\t", 
   "\"\<(*Out:*)\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "$WebSiteTemplatePreProcessInOutInTag", "=", "\n", "\t", 
   "\"\<mma-input\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "$WebSiteTemplatePreProcessInOutOutTag", "=", "\n", "\t", 
   "\"\<mma-output\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"a4e78f22-fbbb-4eea-9832-53fbbfd863fe"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessSplitOutput\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"300e6a04-d220-4f2a-93dd-1f9687aa218c"],

Cell["\<\
\[LeftCeiling]
\twebSiteTemplatePreProcessProcessSplitString
\t\tdoes the actual dirty work of splitting the cells
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"cbb4f766-f680-492a-955c-53c97f0a6106"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessProcessSplitString", "[", 
   RowBox[{
   "splits_", ",", " ", "pc_", ",", " ", "cc_", ",", " ", "head_", ",", " ", 
    "tail_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "@", 
      RowBox[{"DeleteCases", "[", 
       RowBox[{"splits", ",", " ", "\"\<\>\""}], "]"}]}], "\[Equal]", "0"}], 
    ",", "\n", "\t\t", "Nothing", ",", "\n", "\t\t", 
    RowBox[{"Sequence", "@@", "\n", "\t\t\t", 
     RowBox[{"Flatten", "@", 
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"StringLength", "@", 
             RowBox[{"splits", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ">", "0"}], "||", 
           RowBox[{
            RowBox[{"Length", "@", "head"}], ">", "0"}]}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"XMLElement", "[", 
           RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
             "\t\t\t\t\t\t\t", 
             RowBox[{"Prepend", "[", 
              RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Lookup", "[", 
                   RowBox[{
                   "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                   "]"}], "<>", "\"\< \>\"", "<>", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", 
                  "$WebSiteTemplatePreProcessInOutInTag"}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"List", "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"XMLElement", "[", 
              RowBox[{
              "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", "cc", ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Flatten", "@", 
                RowBox[{"{", 
                 RowBox[{"head", ",", " ", 
                  RowBox[{"splits", "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], "}"}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t", "]"}], ",",
           "\n", "\t\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t\t", "]"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "splits"}], ">", "2"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"StringLength", "@", "#"}], ">", "0"}], ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"XMLElement", "[", 
                RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", 
                  "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Prepend", "[", 
                   RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                    "]"}], "<>", "\"\< \>\"", "<>", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"List", "@", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"XMLElement", "[", 
                   RowBox[{
                   "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "cc", 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", "#", "}"}]}], "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t\t\t\t", "]"}], 
             "&"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Most", "@", 
             RowBox[{"Rest", "@", "splits"}]}]}], "\n", "\t\t\t\t\t\t", "]"}],
           ",", "\n", "\t\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t\t", "]"}], 
        ",", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Length", "@", "splits"}], ">", "1"}], "&&", 
             RowBox[{
              RowBox[{"StringLength", "@", 
               RowBox[{"Last", "@", "splits"}]}], ">", "0"}]}], ")"}], "||", 
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"Flatten", "@", 
              RowBox[{"{", "tail", "}"}]}]}], ">", "0"}]}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"XMLElement", "[", 
           RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
             "\t\t\t\t\t\t\t", 
             RowBox[{"Prepend", "[", 
              RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Lookup", "[", 
                   RowBox[{
                   "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                   "]"}], "<>", "\"\< \>\"", "<>", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", 
                  "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"List", "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"XMLElement", "[", 
              RowBox[{
              "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", "cc", ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Flatten", "@", 
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Length", "@", "splits"}], ">", "1"}], "&&", 
                    RowBox[{
                    RowBox[{"StringLength", "@", 
                    RowBox[{"Last", "@", "splits"}]}], ">", "0"}]}], ")"}], 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Last", "@", "splits"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", "Nothing"}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}], ",", " ", "\n", 
                  "\t\t\t\t\t\t\t\t\t", "tail"}], "\n", "\t\t\t\t\t\t\t\t\t", 
                 "}"}]}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", "Nothing"}], "\n", 
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "}"}]}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"1d655464-7e18-41cc-9fe3-8eec4d65b692"],

Cell["\<\
\[LeftCeiling]
\twebSiteTemplatePreProcessSplitOutput
\t\tthe more general function that delegates to the lower-level splitter
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"726a0465-3eee-4f54-9218-ba58132abb0b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessSplitOutput", "[", 
   RowBox[{
   "pc_", ",", " ", "cc_", ",", " ", "head_", ",", " ", "c_", ",", " ", 
    "tail_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"splits", "=", "\n", "\t\t\t\t", 
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"groupUpFlag", "=", "False"}], "}"}], ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"SplitBy", "[", 
          RowBox[{
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "tail", "}"}]}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"If", "[", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"MatchQ", "[", 
                RowBox[{"#", ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"_String", "?", 
                  RowBox[{"(", 
                   RowBox[{
                   "StringContainsQ", "[", 
                    "$WebSiteTemplatePreProcessInOutToken", "]"}], ")"}]}]}], 
                "\n", "\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"groupUpFlag", "=", 
                RowBox[{"Not", "@", "groupUpFlag"}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t\t\t\t", 
             "groupUpFlag"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
          "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"firstSplit", "=", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"StringStartsQ", "[", 
           RowBox[{"c", ",", " ", "$WebSiteTemplatePreProcessInOutToken"}], 
           "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Prepend", "[", "\"\<\>\"", "]"}], ",", "\n", "\t\t\t\t\t", 
          "Identity"}], "\n", "\t\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t", 
        RowBox[{"StringTrim", "@", 
         RowBox[{"StringSplit", "[", 
          RowBox[{"c", ",", " ", "$WebSiteTemplatePreProcessInOutToken"}], 
          "]"}]}]}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", 
         RowBox[{"DeleteCases", "[", 
          RowBox[{"splits", ",", " ", 
           RowBox[{"{", "}"}]}], "]"}]}], "==", "0"}], "&&", 
       RowBox[{
        RowBox[{"Length", "@", 
         RowBox[{"DeleteCases", "[", 
          RowBox[{"firstSplit", ",", " ", "\"\<\>\""}], "]"}]}], "\[Equal]", 
        "0"}]}], ",", "\n", "\t\t\t", "Nothing", ",", "\n", "\t\t\t", 
      RowBox[{"Sequence", "@@", "\n", "\t\t\t\t", 
       RowBox[{"Flatten", "@", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"Length", "@", "splits"}], "==", "0"}], "||", 
             RowBox[{"StringQ", "@", 
              RowBox[{"splits", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", " ", "1"}], "]"}], "]"}]}]}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"webSiteTemplatePreProcessProcessSplitString", "[", 
             RowBox[{
             "firstSplit", ",", " ", "\n", "\t\t\t\t\t\t\t", "pc", ",", " ", 
              "cc", ",", " ", "head", ",", " ", 
              RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"sp", "=", 
                RowBox[{"splits", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"splits", "=", 
                RowBox[{"Rest", "@", "splits"}]}], ";", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"webSiteTemplatePreProcessProcessSplitString", "[", 
                RowBox[{
                "firstSplit", ",", " ", "\n", "\t\t\t\t\t\t\t\t", "pc", ",", 
                 " ", "cc", ",", " ", 
                 RowBox[{"Join", "[", 
                  RowBox[{"head", ",", " ", "sp"}], "]"}]}], "\n", 
                "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t", 
             "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{
             "webSiteTemplatePreProcessProcessSplitString", "[", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"StringQ", "@", 
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"(*", 
                  RowBox[{
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"StringStartsQ", "[", 
                    RowBox[{
                    RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                    "$WebSiteTemplatePreProcessInOutToken"}], "]"}], ",", 
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Prepend", "[", "\"\<\>\"", "]"}], ",", "\n", 
                    "\t", "\t", "\t", "\t", "\t\t\t\t\t", "Identity"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], "@"}], "*)"}], "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"StringSplit", "[", 
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                   "$WebSiteTemplatePreProcessInOutToken"}], "]"}], ",", "\n",
                  "\t\t\t\t\t\t\t\t", 
                 RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", 
               " ", "\n", "\t\t\t\t\t\t\t", "pc", ",", " ", "\n", 
               "\t\t\t\t\t\t\t", "cc", ",", " ", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"{", "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"StringQ", "@", 
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                 RowBox[{"Rest", "@", "#"}], ",", " ", "#"}], "]"}]}], "\n", 
              "\t\t\t\t\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t\t\t\t", 
            "splits"}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
         "}"}]}]}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"c4f2043e-98dc-4af3-9445-320d3a6db2ca"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessInOut\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"0367bb86-8635-43bc-b1b3-c98173b6f7f3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessInOut", "[", "xml_", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"ReplaceRepeated", "[", "\n", "\t\t", 
   RowBox[{"xml", ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{
        "\"\<pre\>\"", ",", "\n", "\t", "\t\t\t", "pc_", ",", "\n", "\t", 
         "\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t", 
          RowBox[{"___", ",", "\n", "\t", "\t\t\t\t", 
           RowBox[{"XMLElement", "[", 
            RowBox[{
            "\"\<code\>\"", ",", "\n", "\t", "\t\t\t\t\t", "cc_", ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"head", ":", 
                RowBox[{"Shortest", "[", "___", "]"}]}], ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"c_String", "?", 
                RowBox[{"(", 
                 RowBox[{
                 "StringContainsQ", "[", 
                  "$WebSiteTemplatePreProcessInOutToken", "]"}], ")"}]}], ",",
                "\n", "\t\t\t\t\t\t\t", "tail___"}], "\n", "\t\t\t\t\t\t\t", 
              "}"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
           "\t\t\t\t", "___"}], "\n", "\t", "\t\t\t\t", "}"}]}], "\n", "\t", 
        "\t\t\t", "]"}], ":>", "\n", "\t", "\t\t\t", 
       RowBox[{"webSiteTemplatePreProcessSplitOutput", "[", 
        RowBox[{"pc", ",", " ", "cc", ",", " ", 
         RowBox[{"{", "head", "}"}], ",", " ", "c", ",", " ", 
         RowBox[{"{", "tail", "}"}]}], "]"}]}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t", 
         RowBox[{"pc_", "?", 
          RowBox[{"(", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"StringFreeQ", "[", 
             RowBox[{
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}],
                "]"}], ",", " ", "\n", "\t\t\t\t\t\t", 
              RowBox[{
              "$WebSiteTemplatePreProcessInOutInTag", "|", "\n", 
               "\t\t\t\t\t\t", "$WebSiteTemplatePreProcessInOutOutTag"}]}], 
             "\n", "\t\t\t\t\t\t", "]"}], "&"}], "\n", "\t\t\t\t\t", ")"}]}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"c", ":", 
          RowBox[{"{", "\n", "\t\t\t\t\t", 
           RowBox[{"___", ",", "\n", "\t\t\t\t\t", 
            RowBox[{"XMLElement", "[", 
             RowBox[{
             "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t", "_", ",", "\n", 
              "\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"_String", "?", 
                RowBox[{"(", 
                 RowBox[{
                 "StringFreeQ", "[", "$WebSiteTemplatePreProcessInOutToken", 
                  "]"}], ")"}]}], "\n", "\t\t\t\t\t\t\t", "}"}]}], "\n", 
             "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", "___"}], "\n", 
           "\t\t\t\t\t", "}"}]}]}], "\n", "\t\t\t\t", "]"}], ":>", "\n", 
       "\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"Prepend", "[", 
           RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{"StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{
                "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                "]"}], "<>", "\"\< \>\"", "<>", "\n", "\t", 
               "\t\t\t\t\t\t\t\t\t", "$WebSiteTemplatePreProcessInOutInTag"}],
               "\n", "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t", 
           "]"}]}], ",", "\n", "\t\t\t\t\t", "c"}], "\n", "\t\t\t\t\t", 
        "]"}]}]}], "\n", "\t\t\t", "}"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"a8e3bf81-8121-4c02-bfb0-332bbe476ddb"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteTemplatePreProcess\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"45eb2671-d5b0-423d-953c-f8c3fb17c6bc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteTemplatePreProcess", "[", 
   RowBox[{"fileContent_", ",", "args_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"ids", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<AttachIDs\>\""}], "]"}]}], ",", "\n", 
      "\t\t\t", "idtags", ",", "\n", "\t\t\t", 
      RowBox[{"lang", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<CodeLanguage\>\""}], "]"}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"highlight", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<CodeHighlighting\>\""}], "]"}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"prettyprint", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<PrettyPrint\>\""}], "]"}]}], ",", "\n",
       "\t", "\t\t", 
      RowBox[{"patchfonts", "=", "\n", "\t", "\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<PatchFonts\>\""}], "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"splitout", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<SplitInOut\>\""}], "]"}]}], ",", "\n", 
      "\t\t\t", "splittags", ",", "\n", "\t\t\t", 
      RowBox[{"srcbase", "=", "\n", "\t\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{
         RowBox[{"Lookup", "[", 
          RowBox[{"args", ",", " ", "\"\<SiteURL\>\""}], "]"}], ",", " ", 
         RowBox[{
          RowBox[{"Except", "[", "_String", "]"}], "\[RuleDelayed]", 
          "\"\<\>\""}]}], "]"}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringQ", "@", "ids"}], ",", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"idtags", "=", "ids"}], ";", "\n", "\t\t\t", 
        RowBox[{"ids", "=", "True"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"idtags", "=", "$WebSiteTemplateAttachIDElements"}]}], "\n", 
      "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"OptionQ", "@", "splitout"}], ",", "\n", "\t\t\t", 
       RowBox[{"splittags", "=", "\n", "\t\t\t\t", 
        RowBox[{"MapThread", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"StringQ", "@", "#"}], ",", " ", "#", ",", " ", "#2"}], 
            "]"}], "&"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"{", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Lookup", "[", 
             RowBox[{"splitout", ",", " ", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
               "\"\<Token\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<OutTag\>\"", ",", "\n", "\t", "\t", "\t\t\t\t\t\t", 
                "\"\<InTag\>\""}], "\n", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
             "$WebSiteTemplatePreProcessInOutToken", ",", "\n", 
              "\t\t\t\t\t\t\t", "$WebSiteTemplatePreProcessInOutInTag", ",", 
              "\n", "\t\t\t\t\t\t\t", 
              "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", 
             "\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t", "}"}]}], "\n", 
         "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"splittags", "=", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
         "$WebSiteTemplatePreProcessInOutToken", ",", "\n", "\t\t\t\t\t", 
          "$WebSiteTemplatePreProcessInOutInTag", ",", "\n", "\t\t\t\t\t", 
          "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", "\t\t\t\t\t", 
         "}"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"StringQ", "[", "srcbase", "]"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"ReplaceAll", "[", "\n", "\t\t\t\t", 
          RowBox[{"#", ",", "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"\"\<src\>\"", "\[Rule]", "f_"}], ")"}], 
            "\[RuleDelayed]", "\n", "\t\t\t\t\t", 
            RowBox[{"(", 
             RowBox[{"\"\<src\>\"", "\[Rule]", 
              RowBox[{"StringReplace", "[", 
               RowBox[{"f", ",", " ", 
                RowBox[{"\"\<{filename}\>\"", "\[Rule]", "srcbase"}]}], 
               "]"}]}], ")"}]}]}], "\n", "\t\t\t\t", "]"}], "&"}], ",", "\n", 
        "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "ids"}], ",", "\n", "\t\t\t", 
         RowBox[{"Block", "[", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t", 
            RowBox[{"$WebSiteTemplateAttachIDElements", "=", "idtags"}], "\n",
             "\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t", 
           "webSiteTemplatePreProcessAttachIDs"}], "\n", "\t\t\t\t", "]"}], 
         ",", "\n", "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", 
       "\t\t", 
       RowBox[{
        RowBox[{"If", "[", "\n", "\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"TrueQ", "[", "prettyprint", "]"}], "||", "\n", "\t\t\t\t", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"StringQ", "[", "lang", "]"}], "&&", 
             RowBox[{"!", 
              RowBox[{"TrueQ", "[", "highlight", "]"}]}], "&&", 
             RowBox[{"!", 
              RowBox[{"StringQ", "[", "highlight", "]"}]}], "&&", 
             RowBox[{"prettyprint", "=!=", "False"}]}], ")"}]}], ",", "\n", 
          "\t\t\t", 
          RowBox[{
          "webSiteTemplatePreProcessCodeHighlighting", "[", "\n", "\t\t\t\t", 
           
           RowBox[{"\"\<prettyprint\>\"", ",", "\n", "\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"StringQ", "@", "lang"}], ",", " ", "lang", ",", " ", 
              "None"}], "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t",
           "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"TrueQ", "[", "highlight", "]"}], ",", "\n", "\t\t\t", 
           RowBox[{
           "webSiteTemplatePreProcessCodeHighlighting", "[", "\n", "\t\t\t\t", 
            RowBox[{"\"\<highlight\>\"", ",", "\n", "\t\t\t\t", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"StringQ", "@", "lang"}], ",", " ", "lang", ",", " ", 
               "None"}], "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", 
           "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"StringQ", "[", "highlight", "]"}], ",", "\n", "\t\t\t", 
            RowBox[{
            "webSiteTemplatePreProcessCodeHighlighting", "[", "\n", 
             "\t\t\t\t", 
             RowBox[{"highlight", ",", "\n", "\t\t\t\t", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"StringQ", "@", "lang"}], ",", " ", "lang", ",", " ", 
                "None"}], "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", 
            "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
          
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"TrueQ", "[", "patchfonts", "]"}], ",", "\n", "\t\t\t", 
             "webSiteTemplatePreProcessFonts", ",", "\n", "\t\t\t", 
             "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"TrueQ", "[", "splitout", "]"}], ",", "\n", "\t\t\t", 
              RowBox[{
               RowBox[{"Block", "[", "\n", "\t\t\t\t", 
                RowBox[{
                 RowBox[{"{", "\n", "\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"$WebSiteTemplatePreProcessInOutToken", "=", 
                    RowBox[{"splittags", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", "\t\t\t\t\t", 
                   RowBox[{"$WebSiteTemplatePreProcessInOutInTag", "=", 
                    RowBox[{"splittags", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], ",", "\n", "\t\t\t\t\t", 
                   RowBox[{"$WebSiteTemplatePreProcessInOutOutTag", "=", 
                    RowBox[{"splittags", "[", 
                    RowBox[{"[", "3", "]"}], "]"}]}]}], "\n", "\t\t\t\t\t", 
                  "}"}], ",", "\n", "\t\t\t\t", 
                 RowBox[{"webSiteTemplatePreProcessInOut", "[", "#", "]"}]}], 
                "\n", "\t\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t", 
              "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t\t", 
            RowBox[{"FirstCase", "[", "\n", "\t\t\t\t", 
             RowBox[{"fileContent", ",", "\n", "\t\t\t\t", 
              RowBox[{
               RowBox[{"XMLElement", "[", 
                RowBox[{"\"\<body\>\"", ",", "_", ",", "b_"}], "]"}], 
               "\[RuleDelayed]", "\n", "\t\t\t\t\t", "b"}], ",", "\n", 
              "\t\t\t\t", "fileContent", ",", "\n", "\t\t\t\t", 
              "\[Infinity]"}], "\n", "\t\t\t\t", "]"}]}]}]}]}]}]}]}]}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"833b78ee-1c86-42e6-991f-4fcdaded7366"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateGatherArgs\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a239289f-a0d2-44d7-a2d2-fbb4585dc31f"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteSummaryBaseUnits\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"70d9858b-d25f-4b30-ab7a-aa7622ba6048"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteSummaryBaseUnits", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
    "\"\<Characters\>\"", ",", "\"\<Words\>\"", ",", "\"\<Characters\>\"", 
     ",", "\n", "\t\t", "\"\<Sentences\>\"", ",", "\"\<Paragraphs\>\"", ",", 
     "\"\<Lines\>\""}], "\n", "\t\t", "}"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"f31bd88e-826d-48ae-ac78-e903262d55cc"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteSummaryIndependentUnits\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"be719014-5a89-40d2-82e2-554141bdec43"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteSummaryIndependentUnits", ":=", "\n", "\t", 
   RowBox[{"$WebSiteSummaryIndependentUnits", "=", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Quantity", "/@", "$WebSiteSummaryBaseUnits"}], "//", 
     "QuantityUnit"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"3944351b-8fd3-419e-a1de-aeabad7b139e"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteSummaryUnits\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"01bb4b77-042a-4b89-b917-fee24809256a"],

Cell[BoxData[
 RowBox[{"$WebSiteSummaryUnits", ":=", "\n", "\t", 
  RowBox[{"$WebSiteSummaryUnits", "=", "\n", "\t\t", 
   RowBox[{"Alternatives", "@@", "\n", "\t\t\t", 
    RowBox[{"Join", "[", 
     RowBox[{
     "$WebSiteSummaryBaseUnits", ",", "$WebSiteSummaryIndependentUnits"}], 
     "]"}]}]}]}]], \
"CodeInput",ExpressionUUID->"859778ea-388d-45cb-a446-01c356f911e4"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplateGatherSummary\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"e2911d5d-802b-4914-ac15-bf57ef5fd57d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplateGatherSummary", "[", 
   RowBox[{"len_", ",", " ", "content_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"sl", ",", "\n", "\t\t\t", "cont"}], "\n", "\t\t\t", "}"}], ",", 
    "\n", "\t\t", 
    RowBox[{
     RowBox[{"sl", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{"len", ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"i_Integer", "?", "Positive"}], ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", 
            RowBox[{"i", ",", " ", "\"\<Characters\>\""}], "}"}]}], ",", "\n",
           "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"_", "[", 
            RowBox[{
             RowBox[{"i_Integer", "?", "Positive"}], ",", " ", 
             RowBox[{"u", ":", 
              RowBox[{"Alternatives", "@@", "$WebSiteSummaryBaseUnits"}]}]}], 
            "]"}], ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", 
            RowBox[{"i", ",", " ", "u"}], "}"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"_", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", 
            RowBox[{"3", ",", " ", "\"\<Lines\>\""}], "}"}]}]}], "\n", 
         "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"cont", "=", 
      RowBox[{"ImportString", "[", 
       RowBox[{"content", ",", " ", "\"\<HTML\>\""}], "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"Replace", "[", 
      RowBox[{"sl", ",", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"{", "\n", "\t\t\t\t\t", 
           RowBox[{"i_", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{"\"\<Characters\>\"", "|", 
             RowBox[{"IndependentUnit", "[", "\"\<characters\>\"", "]"}]}]}], 
           "\n", "\t", "\t\t\t\t", "}"}], ":>", "\n", "\t", "\t\t\t\t", 
          RowBox[{
           RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"If", "[", "\n", "\t", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"StringLength", "[", "#", "]"}], ">", "i"}], ",", "\n",
               "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"StringTake", "[", 
                RowBox[{"#", ",", 
                 RowBox[{"i", "-", "3"}]}], "]"}], "<>", "\"\<...\>\""}], ",",
               "\n", "\t", "\t\t\t\t\t\t", "#"}], "\n", "\t", "\t\t\t\t\t\t", 
             "]"}], "\n", "\t", "\t\t\t\t\t", "]"}], "@", "\n", "\t", 
           "\t\t\t\t\t", 
           RowBox[{"StringReplace", "[", 
            RowBox[{"cont", ",", 
             RowBox[{"Whitespace", "\[Rule]", "\"\< \>\""}]}], "]"}]}]}], ",",
          "\n", "\t", "\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t", "\t\t\t\t", 
           RowBox[{"i_", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{"\"\<Lines\>\"", "|", 
             RowBox[{"IndependentUnit", "[", 
              RowBox[{"\"\<lines\>\"", "|", "\"\<lines of code\>\""}], 
              "]"}]}]}], "\n", "\t", "\t\t\t\t", "}"}], ":>", "\n", "\t", 
          "\t\t\t\t", 
          RowBox[{"StringRiffle", "@", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Take", "[", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"StringSplit", "[", 
              RowBox[{"cont", ",", "\"\<\\n\>\""}], "]"}], ",", "\n", "\t", 
             "\t\t\t\t\t\t", 
             RowBox[{"UpTo", "[", "i", "]"}]}], "\n", "\t", "\t\t\t\t\t\t", 
            "]"}]}]}], ",", "\n", "\t", "\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t", "\t\t\t\t", 
           RowBox[{"i_", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"IndependentUnit", "[", "t_", "]"}], "|", "t_String"}]}],
            "\n", "\t", "\t\t\t\t", "}"}], ":>", "\n", "\t", "\t\t\t\t", 
          RowBox[{"StringRiffle", "[", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"TextCases", "[", 
             RowBox[{"cont", ",", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"ToUpperCase", "[", 
                  RowBox[{"StringTake", "[", 
                   RowBox[{"#", ",", "1"}], "]"}], "]"}], "<>", "\n", "\t", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{"StringDrop", "[", 
                  RowBox[{"#", ",", "1"}], "]"}]}], "&"}], "@", "t"}], ",", 
              "\n", "\t", "\t\t\t\t\t\t", "i"}], "]"}], ",", "\n", "\t", 
            "\t\t\t\t\t", "\"\< \>\""}], "\n", "\t\t\t\t\t\t", "]"}]}]}], 
        "\n", "\t\t\t\t", "}"}]}], "\n", "\t\t", "]"}]}]}], "\n", "\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"6d546be1-374b-4956-839b-492721faec72"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteTemplateGatherArgs\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"b1bb0eb9-126d-4524-a0fc-83c3193a01ac"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteTemplateGatherArgs", "[", 
   RowBox[{"fileContent_", ",", " ", "args_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "url", ",", "\n", "\t\t\t", "slug", ",", "\n", "\t\t\t", "fp", ",", "\n",
       "\t\t\t", "title", ",", "\n", "\t\t\t", "content", ",", "\n", "\t\t\t",
       "summary", ",", "\n", "\t\t\t", "date", ",", "\n", "\t\t\t", 
      "modified", ",", "\n", "\t\t\t", "siteURL", ",", "\n", "\t\t\t", 
      "siteName"}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"url", "=", 
      RowBox[{"Lookup", "[", 
       RowBox[{"args", ",", " ", "\"\<URL\>\""}], "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"slug", "=", 
      RowBox[{"Lookup", "[", 
       RowBox[{"args", ",", " ", "\"\<Slug\>\""}], "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"fp", "=", 
      RowBox[{"Lookup", "[", 
       RowBox[{"args", ",", " ", "\"\<FilePath\>\""}], "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"content", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", 
       RowBox[{"fileContent", ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"l", ":", 
            RowBox[{"{", "__XMLElement", "}"}]}], "\[RuleDelayed]", "\n", 
           "\t\t\t\t\t\t", 
           RowBox[{"StringRiffle", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"WebSiteBuildSafeExportXML", "/@", "l"}], ",", "\n", 
             "\t\t\t\t\t\t\t", "\"\<\\n\>\""}], "\n", "\t\t\t\t\t\t\t", 
            "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"x_XMLElement", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"WebSiteBuildSafeExportXML", "[", "x", "]"}]}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{
          "None", "->", "\n", "\t\t\t\t\t\t", 
           "\"\<<html><body>No content...</body><html>\>\""}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"e", ":", 
            RowBox[{"Except", "[", "_String", "]"}]}], ":>", "\n", 
           "\t\t\t\t\t\t", 
           RowBox[{"(", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"WebSiteBuildLogError", "[", 
              RowBox[{"fp", ",", " ", "\"\<BadContent\>\"", ",", " ", "e"}], 
              "]"}], ";", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"\"\<SiteBuilder\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"Evaluate", "[", 
                RowBox[{"WebSiteBuild", "::", "nocnt"}], "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Short", "[", "e", "]"}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "]"}]}], "\n", "\t\t\t\t\t\t\t", ")"}]}]}], "\n", "\t\t\t\t\t", 
         "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"title", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"FirstCase", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"StringQ", "[", "fileContent", "]"}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"ImportString", "[", 
             RowBox[{"fileContent", ",", " ", 
              RowBox[{"{", 
               RowBox[{"\"\<HTML\>\"", ",", " ", "\"\<XMLObject\>\""}], 
               "}"}]}], "]"}], ",", "\n", "\t\t\t\t\t\t", "fileContent"}], 
           "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"t", ":", 
            RowBox[{"XMLElement", "[", 
             RowBox[{"\"\<title\>\"", ",", " ", "_", ",", " ", "_"}], "]"}]}],
            "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", 
           RowBox[{
           "System`Convert`XMLDump`getSymbolicXMLPlaintext", "@", "\n", 
            "\t\t\t\t\t\t\t", 
            RowBox[{"XMLElement", "[", 
             RowBox[{"\"\<body\>\"", ",", 
              RowBox[{"{", "}"}], ",", " ", "t"}], "]"}]}]}], ",", "\n", 
          "\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "\[Infinity]"}], 
         "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"Except", "[", "_String", "]"}], "\[Rule]", "\n", 
           "\t\t\t\t\t\t", "None"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"s_String", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", "s"}]}],
          "\n", "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"summary", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", " ", "\"\<Summary\>\""}], "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{
         RowBox[{"Except", "[", 
          RowBox[{"_String", "?", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"StringLength", "[", "#", "]"}], ">", "0"}], "&"}], 
            ")"}]}], "]"}], ":>", "\n", "\t\t\t\t\t", 
         RowBox[{"webSiteTemplateGatherSummary", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Lookup", "[", 
            RowBox[{"args", ",", " ", "\"\<SummaryLength\>\""}], "]"}], ",", 
           "\n", "\t\t\t\t\t\t", "content"}], "\n", "\t\t\t\t\t\t", "]"}]}]}],
        "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"date", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", "\"\<Date\>\"", ",", "Now"}], "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"s_String", "\[RuleDelayed]", 
         RowBox[{"Quiet", "@", 
          RowBox[{"Check", "[", 
           RowBox[{
            RowBox[{"DateObject", "[", "s", "]"}], ",", " ", "s"}], 
           "]"}]}]}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"modified", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", "\"\<Modified\>\"", ",", "Now"}], "]"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"s_String", "\[RuleDelayed]", 
         RowBox[{"Quiet", "@", 
          RowBox[{"Check", "[", 
           RowBox[{
            RowBox[{"DateObject", "[", "s", "]"}], ",", " ", "s"}], 
           "]"}]}]}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"siteURL", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", " ", "\"\<SiteURL\>\"", ",", " ", "Automatic"}],
          "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t", 
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"bit", "=", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"Length", "@", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Lookup", "[", 
                 RowBox[{
                 "args", ",", " ", "\"\<URL\>\"", ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                  "FileNameSplit", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"Lookup", "[", 
                    RowBox[{
                    "args", ",", " ", "\"\<FilePath\>\"", ",", " ", 
                    "\"\<??\>\""}], "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 "]"}], ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"URLParse", "[", 
                  RowBox[{"s", ",", "\"\<Path\>\""}], "]"}]}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t", "}"}], 
           ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"bit", ",", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"1", "\[Rule]", "\"\<.\>\""}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"n_", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"URLBuild", "@", 
                 RowBox[{"ConstantArray", "[", 
                  RowBox[{"\"\<..\>\"", ",", 
                   RowBox[{"n", "-", "1"}]}], "]"}]}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
          "\n", "\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t", "]"}]}], ";", 
     "\n", "\t\t", 
     RowBox[{"siteName", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", "\"\<SiteName\>\"", ",", "Automatic"}], "]"}], 
        ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"URLParse", "[", 
             RowBox[{"s", ",", "\"\<Path\>\""}], "]"}], "[", 
            RowBox[{"[", 
             RowBox[{"-", "1"}], "]"}], "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", 
           "\t\t\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"args", ",", " ", "\"\<SiteURL\>\""}], "]"}], ",", "\n",
              "\t\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"URLParse", "[", 
                  RowBox[{"s", ",", "\"\<Path\>\""}], "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"-", "1"}], "]"}], "]"}]}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"Replace", "[", 
                 RowBox[{
                  RowBox[{"Lookup", "[", 
                   RowBox[{"args", ",", " ", "\"\<SiteDirectory\>\""}], "]"}],
                   ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", 
                   "\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"Replace", "[", 
                    RowBox[{"$WolframID", ",", 
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "s_String", ":>", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"StringSplit", "[", 
                    RowBox[{"s", ",", "\"\<@\>\""}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"_", "\[Rule]", "$UserName"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", 
         "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"Merge", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{"args", ",", "\n", "\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"StringQ", "@", "title"}], ",", " ", 
           RowBox[{"\"\<Title\>\"", "->", "title"}], ",", " ", "Nothing"}], 
          "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<Summary\>\"", "\[Rule]", "summary"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<Date\>\"", "->", "date"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<Modified\>\"", "\[Rule]", "modified"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<SiteName\>\"", "\[Rule]", "siteName"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<SiteURL\>\"", "\[Rule]", "siteURL"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"StringQ", "@", "url"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", "url"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringQ", "@", "slug"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"StringQ", "[", "fp", "]"}], ",", "\n", "\t", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"URLBuild", "@", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{"Append", "[", 
                RowBox[{
                 RowBox[{"Most", "@", 
                  RowBox[{"FileNameSplit", "[", "fp", "]"}]}], ",", " ", 
                 RowBox[{"WebSiteBuildAttachExtension", "@", "slug"}]}], 
                "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"WebSiteBuildAttachExtension", "@", "slug"}]}], "\n", 
             "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringQ", "@", "title"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"StringQ", "[", "fp", "]"}], ",", "\n", "\t", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"URLBuild", "@", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{"Append", "[", 
                RowBox[{
                 RowBox[{"Most", "@", 
                  RowBox[{"FileNameSplit", "[", "fp", "]"}]}], ",", " ", 
                 RowBox[{"WebSiteBuildAttachExtension", "@", "title"}]}], 
                "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"WebSiteBuildAttachExtension", "@", "title"}]}], "\n", 
             "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringQ", "[", "fp", "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"URLBuild", "@", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{"Append", "[", 
              RowBox[{
               RowBox[{"Most", "@", 
                RowBox[{"FileNameSplit", "[", "fp", "]"}]}], ",", " ", "\n", 
               "\t\t\t\t\t\t\t\t\t", 
               RowBox[{"WebSiteBuildAttachExtension", "@", 
                RowBox[{"FileNameTake", "@", "fp"}]}]}], "]"}]}]}], ",", "\n",
            "\t\t\t\t\t", "True", ",", "\t", "\n", "\t\t\t\t\t\t", 
           "Nothing"}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{
         "\"\<Content\>\"", "->", "\n", "\t", "\t\t\t\t", "content"}]}], "\n",
         "\t", "\t\t\t", "}"}], ",", "\n", "\t", "\t\t", "Last"}], "\n", "\t",
       "\t\t", "]"}]}]}], "\n", "\t", "\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"17b78b98-9484-4a98-800f-2bbd2202e38f"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateApply\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712538068908094*^9, 3.712538071089961*^9}, {
  3.712682964322591*^9, 
  3.7126829648491917`*^9}},ExpressionUUID->"a510ab9f-da42-4727-819d-\
b2d01bb4b969"],

Cell[BoxData[
 RowBox[{"WebSiteTemplateApply", "//", "ClearAll"}]], "CodeInput",
 CellChangeTimes->{{3.712597244415457*^9, 3.712597249303433*^9}, 
   3.712674844639879*^9},ExpressionUUID->"f8a010e6-b68e-42a8-b384-\
2ef96c68d37d"],

Cell["\<\
\[LeftCeiling]
\tIteratively apply templates to the provided content, unwrapping from or \
reexporting to XML as necessary. Generally only one template will be used and \
imports will be handled within the template.
\[RightFloor]\
\>", "Text",
 Evaluatable->True,
 CellChangeTimes->{{3.712626047703267*^9, 3.71262609854807*^9}, {
  3.723039315773836*^9, 
  3.723039322445921*^9}},ExpressionUUID->"f37a2712-891f-4765-97df-\
68730b2fb5ef"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "nocnt"}], "=", "\n", "\t", 
   "\"\<Can't export content `` to string\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteTemplateApply", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"root", ":", 
     RowBox[{
      RowBox[{"_String", "?", "DirectoryQ"}], "|", 
      RowBox[{"{", 
       RowBox[{"__String", "?", "DirectoryQ"}], "}"}]}]}], ",", "\n", "\t", 
    RowBox[{"content", ":", 
     RowBox[{"_String", "|", "_File", "|", "None"}]}], ",", "\n", "\t", 
    RowBox[{"templates", ":", 
     RowBox[{
      RowBox[{"{", "__String", "}"}], "|", "_String"}]}], ",", "\n", "\t", 
    RowBox[{"info", ":", "_Association", ":", 
     RowBox[{"<|", "|>"}]}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"AssociationQ", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
    "\t\t", 
    RowBox[{"Module", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
       "cname", ",", "\n", "\t\t\t\t", "fils", ",", "\n", "\t\t\t\t", 
        "args"}], "\n", "\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"cname", "=", 
        RowBox[{"webSitePrepContentName", "[", 
         RowBox[{"content", ",", " ", "root"}], "]"}]}], ";", "\n", 
       "\t\t\t\t", 
       RowBox[{"fils", "=", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"With", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"dp", "=", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"Map", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"FileNameJoin", "@*", "FileNameSplit"}], ",", "\n",
                    "\t", "\t", "\t\t\t\t\t\t\t\t", 
                   RowBox[{"Append", "[", 
                    RowBox[{
                    "root", ",", " ", "\n", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{
                    "$WebSiteTemplateLibDirectory", ",", " ", 
                    "\"\<templates\>\""}], "}"}]}]}], "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t", 
                  "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t", 
                "}"}], ",", "\n", "\t", "\t\t\t\t\t\t", 
               RowBox[{"SortBy", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"FileNames", "[", 
                  RowBox[{"#", ",", " ", "dp"}], "]"}], ",", "\n", "\t", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Position", "[", 
                   RowBox[{"dp", ",", " ", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"FileNameSplit", "@", 
                    RowBox[{"DirectoryName", "@", "#"}]}]}]}], "]"}], "&"}]}],
                 "\n", "\t", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
              "\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"f_", ",", " ", "___"}], "}"}], "\[RuleDelayed]", 
               "f"}], "\n", "\t", "\t\t\t\t\t\t", "}"}]}], "\n", "\t", 
            "\t\t\t\t\t", "]"}], "&"}], "/@", 
          RowBox[{"Flatten", "@", 
           RowBox[{"List", "@", "templates"}]}]}], "//", "Flatten"}]}], ";", 
       "\n", "\t\t\t", 
       RowBox[{"args", "=", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"MemberQ", "[", 
             RowBox[{
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<Templates\>\"", ",", " ", 
                RowBox[{"{", "}"}]}], "]"}], ",", " ", 
              "\"\<article.html\>\""}], "]"}], ",", "\n", "\t\t\t\t\t", 
            RowBox[{"Merge", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t\t\t\t\t\t", 
               RowBox[{"#", ",", "\n", "\t\t\t\t\t\t", 
                RowBox[{"\"\<Categories\>\"", "\[Rule]", 
                 RowBox[{"{", "\"\<misc\>\"", "}"}]}]}], "\n", "\t\t\t\t\t\t",
                "}"}], ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{"l_List", ",", "l2_List"}], "}"}], ":>", "\n", 
                  "\t\t\t\t\t\t\t\t", 
                  RowBox[{"DeleteDuplicates", "@", 
                   RowBox[{"Flatten", "@", 
                    RowBox[{"{", 
                    RowBox[{"l", ",", "l2"}], "}"}]}]}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"{", "e_", "}"}], "\[RuleDelayed]", "e"}]}], "\n", 
                "\t\t\t\t\t\t\t", "}"}], "]"}]}], "\n", "\t\t\t\t\t\t", "]"}],
             ",", "\n", "\t\t\t\t\t", "#"}], "\n", "\t\t\t\t\t", "]"}], "&"}],
          "@", "\n", "\t\t\t\t", 
         RowBox[{"Merge", "[", 
          RowBox[{"(*", " ", 
           RowBox[{
           "Collect", " ", "the", " ", "arguments", " ", "to", " ", "pass", 
            " ", "to", " ", "the", " ", "template"}], " ", "*)"}], "\n", 
          "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{
            "$WebSiteBuildAggStack", ",", "\n", "\t\t\t\t\t\t", "info", ",", 
             "\n", "\t\t\t\t\t\t", 
             RowBox[{"(*", " ", 
              RowBox[{"Include", " ", "extracted", " ", "attributes"}], " ", 
              "*)"}], "\n", "\t\t\t\t\t\t", 
             RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "$WebSiteBuildContentStack", ",", " ", "\n", 
                 "\t\t\t\t\t\t\t\t", "cname", ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], ",",
                "\n", "\t\t\t\t\t\t\t", "\"\<Attributes\>\"", ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
            "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", "Last"}], "\n", 
          "\t\t\t\t\t", "]"}]}]}], ";", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"Allows", " ", "for", " ", "custom", " ", "slugs"}], " ", 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Fold", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"#", ",", " ", "#2", ",", " ", 
               RowBox[{"<|", "|>"}]}], "]"}], "&"}], ",", "\n", "\t\t\t\t\t", 
            "$WebSiteBuildContentStack", ",", "\n", "\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"cname", ",", " ", "\"\<Attributes\>\""}], "}"}]}], "\n",
            "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "\"\<Slug\>\"", ",", 
          "\n", "\t\t\t\t", "Automatic"}], "\n", "\t\t\t\t", "]"}], "->", 
        "\n", "\t\t\t\t", 
        RowBox[{"Fold", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"WebSiteXMLTemplateApply", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
            "root", ",", "\n", "\t\t\t\t\t\t", "#2", ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"WebSiteTemplateGatherArgs", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"#", ",", "\n", "\t\t\t\t\t\t\t", "args"}], "\n", 
              "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], "&"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"cname", "=!=", "None"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"$WebSiteBuildContentStack", "[", 
             RowBox[{"cname", ",", " ", "\"\<Content\>\""}], "]"}], ",", "\n",
             "\t\t\t\t\t\t", "None"}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
           "\t\t\t\t\t", "fils"}], "\n", "\t\t\t\t\t", "]"}]}]}]}], "\n", 
     "\t\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t", 
      RowBox[{"Automatic", ",", "\n", "\t\t\t", 
       RowBox[{"Evaluate", "[", 
        RowBox[{"WebSiteBuild", "::", "nost"}], "]"}]}], "\n", "\t\t\t", 
      "]"}], ";", "\n", "\t\t", "$Failed"}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"1c73590a-13c0-48f6-bb83-ffafae910f6a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateExport\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"f7154cc7-51f5-4b3d-9ebb-961b525925c0"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteTemplateExport", "[", "\n", "\t", 
    RowBox[{
    "failinput_", ",", "\n", "\t", "fout_", ",", "\n", "\t", "root_", ",", 
     "\n", "\t", "content_", ",", "\n", "\t", "templates_", ",", "\n", "\t", 
     "config_"}], "\n", "\t", "]"}], ":=", "\t", "\n", "\t", 
   RowBox[{"Replace", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"WebSiteTemplateApply", "[", "\n", "\t\t\t", 
      RowBox[{
      "root", ",", "\n", "\t\t\t", "content", ",", "\n", "\t\t\t", 
       "templates", ",", "\n", "\t\t\t", "config"}], "\n", "\t\t\t", "]"}], 
     ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"f_", "->", "html_String"}], ")"}], ":>", "\n", "\t\t\t\t", 
        RowBox[{"With", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t\t\t\t\t\t", 
           RowBox[{"fil", "=", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"Replace", "[", 
             RowBox[{"f", ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"WebSiteBuildAttachExtension", "@", "fout"}]}], ",", 
                "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                 "FileNameJoin", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Append", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{"Most", "@", 
                    RowBox[{"FileNameSplit", "[", "fout", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"WebSiteBuildAttachExtension", "@", "s"}]}], "\n",
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t", "}"}]}], "]"}]}], "\n", "\t\t\t\t\t\t\t",
            "}"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{"!", 
              RowBox[{"FileExistsQ", "[", "fil", "]"}]}], "||", 
             RowBox[{"(*", " ", 
              RowBox[{
              "to", " ", "preserve", " ", "the", " ", "modification", " ", 
               "date"}], " ", "*)"}], "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"(", 
              RowBox[{"html", "=!=", 
               RowBox[{
                RowBox[{
                "System`Convert`TextDump`PlaintextImport", "[", "fil", "]"}], 
                "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], ")"}]}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Quiet", "@", 
              RowBox[{"Close", "[", "fil", "]"}]}], ";", "\n", "\t\t\t\t\t\t", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"!", 
                RowBox[{"DirectoryQ", "@", 
                 RowBox[{"DirectoryName", "[", "fil", "]"}]}]}], ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"CreateDirectory", "[", 
                RowBox[{
                 RowBox[{"DirectoryName", "[", "fil", "]"}], ",", " ", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                 "CreateIntermediateDirectories", "\[Rule]", "True"}]}], "\n",
                 "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], 
             ";", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Export", "[", 
              RowBox[{"fil", ",", " ", "html", ",", " ", "\"\<Text\>\""}], 
              "]"}]}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
         "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"e_", ":>", "\n", "\t\t\t\t", 
        RowBox[{"(", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"WebSiteBuildLogError", "[", 
           RowBox[{
           "failinput", ",", " ", "\"\<GenerationFailed\>\"", ",", " ", "e"}],
            "]"}], ";", " ", "\n", "\t\t\t\t\t", 
          RowBox[{"Message", "[", 
           RowBox[{
            RowBox[{"WebSiteBuild", "::", "genfl"}], ",", " ", "failinput"}], 
           "]"}], ";", "$Failed"}], "\n", "\t\t\t\t\t", ")"}]}]}], "\n", 
      "\t\t\t", "}"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"a4acfcfa-a2aa-4e40-bf79-a25ab7cf40d6"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateExportPaginated\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723297611292035*^9, 
  3.7232976176106663`*^9}},ExpressionUUID->"af70628b-c990-4a6b-ada1-\
655618cce021"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteTemplateExportPaginated", "]"}], "=", "\n",
    "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteTemplateExportPaginated", "[", "\n", "\t", 
    RowBox[{
    "failInput_", ",", "\n", "\t", "baseName_", ",", "\n", "\t", "dir_", ",", 
     " ", "outDir_", ",", "\n", "\t", "root_", ",", "\n", "\t", "content_", 
     ",", "\n", "\t", "templates_", ",", "\n", "\t", "config_", ",", "\n", 
     "\t", "articles_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"pageSize", "=", "\n", "\t\t\t\t", 
        RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"page", "=", "\"\<\>\""}]}], "\n", "\t\t\t", "}"}], ",", "\n", 
     "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", 
          RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "Monitor",
          ",", " ", 
         RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"IntegerQ", "[", "pageSize", "]"}], "&&", 
            RowBox[{"pageSize", ">", "0"}], "&&", "\n", "\t\t\t\t\t", 
            RowBox[{"MemberQ", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"\"\<html\>\"", ",", " ", "\"\<\>\""}], "}"}], ",", 
              " ", 
              RowBox[{"FileExtension", "[", "baseName", "]"}]}], "]"}]}], ",",
            "\n", "\t\t\t\t\t", 
           RowBox[{"Table", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"failInput", "<>", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"i", ">", "1"}], ",", " ", 
                  RowBox[{"\"\<, page \>\"", "<>", 
                   RowBox[{"ToString", "[", "i", "]"}]}], ",", " ", 
                  "\"\<\>\""}], "]"}]}], ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"StringTrim", "[", 
                    RowBox[{"baseName", ",", " ", "\"\<.html\>\""}], "]"}], "<>",
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", ">", "1"}], ",", " ", 
                    RowBox[{"ToString", "[", "i", "]"}], ",", " ", 
                    "\"\<\>\""}], "]"}], "<>", "\"\<.html\>\""}]}], "\n", 
                 "\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", "\t\t\t\t\t\t\t", 
               "root", ",", "\n", "\t\t\t\t\t\t\t", "None", ",", "\n", 
               "\t\t\t\t\t\t\t", "templates", ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"config", ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Set", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"page", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"baseName", "<>", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", ">", "1"}], ",", " ", 
                    RowBox[{"ToString", "[", "i", "]"}], ",", " ", 
                    "\"\<\>\""}], "]"}], "<>", "\"\<.html\>\""}]}], "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], ",", 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<IndexListing\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Take", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "articles", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"1", "+", 
                    RowBox[{"pageSize", "*", 
                    RowBox[{"(", 
                    RowBox[{"i", "-", "1"}], ")"}]}]}], ",", " ", 
                    RowBox[{"UpTo", "[", 
                    RowBox[{"pageSize", "*", "i"}], "]"}]}], "}"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"\"\<PageNumber\>\"", "\[Rule]", "i"}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<PageNumberTotal\>\"", "\[Rule]", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Ceiling", "[", 
                    RowBox[{
                    RowBox[{"Length", "[", "articles", "]"}], "/", 
                    "pageSize"}], "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"\"\<PageSize\>\"", "\[Rule]", "pageSize"}], ",", 
                   "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<PreviousPageURL\>\"", "->", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", ">", "1"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"baseName", "<>", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"i", "-", "1"}], ">", "1"}], ",", " ", 
                    RowBox[{"ToString", "[", 
                    RowBox[{"i", "-", "1"}], "]"}], ",", " ", "\"\<\>\""}], 
                    "]"}], "<>", "\"\<.html\>\""}]}], "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", "\t", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<NextPageURL\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", "<", 
                    RowBox[{"Ceiling", "[", 
                    RowBox[{
                    RowBox[{"Length", "[", "articles", "]"}], "/", 
                    "pageSize"}], "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"baseName", "<>", 
                    RowBox[{"ToString", "[", 
                    RowBox[{"i", "+", "1"}], "]"}], "<>", "\"\<.html\>\""}]}],
                     "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                  "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                 "Last"}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], "\n", 
              "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"{", 
              RowBox[{"i", ",", " ", 
               RowBox[{"Ceiling", "[", 
                RowBox[{
                 RowBox[{"Length", "[", "articles", "]"}], "/", "pageSize"}], 
                "]"}]}], "}"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{"failInput", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"FileNameJoin", "@", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"WebSiteBuildAttachExtension", "@", "baseName"}]}], 
               "\n", "\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", "\t\t\t\t\t\t", 
             "root", ",", "\n", "\t\t\t\t\t\t", "None", ",", "\n", 
             "\t\t\t\t\t\t", "templates", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Merge", "[", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"config", ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                 "\"\<IndexListing\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                  "articles"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Set", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"page", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildAttachExtension", "@", "baseName"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
               "Last"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
            "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t", 
         RowBox[{"TemplateApply", "[", 
          RowBox[{"\"\<Generating ``\>\"", ",", " ", "page"}], "]"}]}]}], 
       "\n", "\t\t\t\t", "]"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"03db8ccf-9122-4b23-9fdc-6634afb3da88"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ImportMeta\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712582203353249*^9, 
  3.712582212388088*^9}},ExpressionUUID->"7ca76f4e-1777-40ff-9b2e-\
b9207af3dc6e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteImportMeta", "[", 
    RowBox[{"xml", ":", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"XMLObject", "[", "___", "]"}], "[", "___", "]"}], "|", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<html\>\"", ",", "___"}], "]"}]}], ")"}]}], "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"WebSiteImportMeta", "/@", "\n", "\t\t", 
    RowBox[{"Cases", "[", 
     RowBox[{"xml", ",", "\n", "\t", "\t\t", 
      RowBox[{"XMLElement", "[", 
       RowBox[{"\"\<meta\>\"", ",", "__"}], "]"}], ",", "\n", "\t\t\t", 
      "\[Infinity]"}], "\n", "\t\t\t", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteImportMeta", "[", "\n", "\t", 
    RowBox[{"XMLElement", "[", 
     RowBox[{"\"\<meta\>\"", ",", "info_", ",", "_"}], "]"}], "\n", "\t", 
    "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Lookup", "[", "\n", "\t\t\t", 
      RowBox[{"info", ",", "\n", "\t", "\t\t", 
       RowBox[{"{", 
        RowBox[{"\"\<name\>\"", ",", " ", "\"\<content\>\""}], "}"}], ",", 
       "\n", "\t\t\t", "Nothing"}], "\n", "\t\t\t", "]"}], ",", 
     RowBox[{"{", "\n", "\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"n_", ",", "c_"}], "}"}], "\[RuleDelayed]", "\n", "\t\t\t", 
        RowBox[{"n", "\[Rule]", "\n", "\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"MemberQ", "[", 
             RowBox[{"$DefaultWebSiteAggregationTypes", ",", " ", "n"}], 
             "]"}], "||", "\n", "\t\t\t\t\t", 
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"c", ",", " ", "\n", "\t\t\t\t\t\t", 
              RowBox[{"Repeated", "[", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"__", "~~", 
                 RowBox[{"Except", "[", 
                  RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}], 
                 "~~", "\"\<,\>\"", "~~", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"Except", "[", 
                  RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}]}], 
                ",", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"{", "2", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
             "\n", "\t\t\t\t\t\t", "]"}], "||", "\n", "\t\t\t\t\t", 
            RowBox[{"StringMatchQ", "[", 
             RowBox[{"c", ",", " ", "\n", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"WordCharacter", ".."}], "~~", 
               RowBox[{"Except", "[", 
                RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}], 
               "~~", "\"\<,\>\"", "~~", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"Except", "[", 
                RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}], "~~", 
               RowBox[{"WordCharacter", ".."}]}]}], "\n", "\t\t\t\t\t\t", 
             "]"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringTrim", "@", 
            RowBox[{"StringSplit", "[", 
             RowBox[{"c", ",", "\"\<,\>\""}], "]"}]}], ",", "\n", 
           "\t\t\t\t\t", "c"}], "\n", "\t\t\t\t\t", "]"}]}]}], ",", "\n", 
       "\t\t", 
       RowBox[{"_", "\[Rule]", "Nothing"}]}], "\n", "\t\t", "}"}]}], "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"e3aca857-e027-499a-ab12-0c55d97791da"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ContentStackPrep\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723325303136363*^9, 
  3.723325305307074*^9}},ExpressionUUID->"a44eb5c3-072c-4e51-8577-\
ee22a0b46476"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteContentStackPrep", "[", "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"AssociationQ", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"$WebSiteBuildContentDataStack", "=", "\n", "\t\t\t", 
      RowBox[{"Association", "@", "\n", "\t\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"\"\<Attributes\>\"", ",", " ", "\"\<URL\>\""}], "]"}], "->",
            "#"}], "&"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Values", "@", "$WebSiteBuildContentStack"}]}], "\n", 
        "\t\t\t\t\t", "]"}]}]}], ";", "\n", "\t\t", 
     RowBox[{"$WebSiteBuildAggStack", "=", "\n", "\t\t\t", 
      RowBox[{"<|", "\n", "\t\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "A", " ", "function", " ", "for", " ", "getting", " ", "object", " ", 
         "attributes", " ", "by", " ", "file", " ", "name"}], " ", "*)"}], 
       "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"\"\<ContentStack\>\"", "->", "\n", "\t\t\t\t\t", 
         RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{"Lookup", "[", 
           RowBox[{
           "$WebSiteBuildContentStack", ",", " ", "#", ",", "\n", 
            "\t\t\t\t\t\t\t", 
            RowBox[{"Lookup", "[", 
             RowBox[{
             "$WebSiteBuildContentDataStack", ",", " ", "#", ",", " ", 
              "None"}], "]"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], "\n", 
          "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{
         "This", " ", "is", " ", "filled", " ", "in", " ", "later", " ", "by",
           " ", "the", " ", "aggregation", " ", "generator", " ", 
          RowBox[{"(", 
           RowBox[{"if", " ", "aggregations", " ", "turned", " ", "on"}], 
           ")"}]}], " ", "*)"}], "\n", "\t\t\t\t", 
        RowBox[{"\"\<AggregationStack\>\"", "->", "\n", "\t\t\t\t\t", 
         RowBox[{"Function", "@", 
          RowBox[{"PackageThrowMessage", "[", 
           RowBox[{
           "\"\<SiteBuilder\>\"", ",", " ", 
            "\"\<Aggregations not turned on\>\""}], "]"}]}]}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{
         "A", " ", "function", " ", "for", " ", "getting", " ", "object", " ",
           "attributes", " ", "by", " ", "file", " ", "name"}], " ", "*)"}], 
        "\n", "\t", "\t", "\t", "\t", 
        RowBox[{"\"\<ContentData\>\"", "->", "\n", "\t\t\t\t\t", 
         RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
             "$WebSiteBuildContentDataStack", ",", " ", "#", ",", "\n", 
              "\t\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{"$WebSiteBuildContentStack", ",", " ", "#", ",", " ", 
                RowBox[{"<|", "|>"}]}], "]"}]}], "\n", "\t\t\t\t\t\t\t\t", 
             "]"}], ",", "\n", "\t\t\t\t\t\t\t", "\"\<Attributes\>\"", ",", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], "\n", 
          "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{
         "A", " ", "function", " ", "for", " ", "choosing", " ", "objects", 
          " ", "by", " ", "the", " ", "template", " ", "used"}], " ", "*)"}], 
        "\n", "\t\t\t\t", 
        RowBox[{"\"\<SelectObjects\>\"", "->", "\n", "\t", "\t\t\t\t", 
         RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"type", "=", 
              RowBox[{
               RowBox[{"StringTrim", "[", 
                RowBox[{
                 RowBox[{"ToLowerCase", "[", "#", "]"}], ",", " ", 
                 "\"\<.html\>\""}], "]"}], "<>", "\"\<.html\>\""}]}], "}"}], 
            ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"Select", "[", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Values", "@", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{"$WebSiteBuildContentStack", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", " ", "\"\<Attributes\>\""}], "]"}], 
                "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{
                 RowBox[{"#", "[", "\"\<Templates\>\"", "]"}], ",", " ", 
                 "type"}], "]"}], "&"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], 
           "\n", "\t", "\t", "\t", "\t\t\t\t", "]"}], "\n", "\t\t\t\t\t\t", 
          "]"}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{
         "A", " ", "function", " ", "for", " ", "getting", " ", "objects", 
          " ", "sorted", " ", "by", " ", "some", " ", "function"}], " ", 
         "*)"}], "\n", "\t\t\t\t", 
        RowBox[{"\"\<SortedObjectsBy\>\"", "->", "\n", "\t\t\t\t\t", 
         RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"order", "=", "#"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"pageType", "=", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Length", "@", 
                   RowBox[{"{", "##", "}"}]}], ">", "1"}], ",", " ", 
                 RowBox[{
                  RowBox[{"{", "##", "}"}], "[", 
                  RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
                 "\"\<article\>\""}], "]"}]}]}], "\n", "\t\t\t\t\t\t\t", 
             "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"SortBy", "[", "order", "]"}], "@", "\n", 
             "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
              "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", "]"}], 
              "[", "pageType", "]"}]}]}], "\n", "\t\t\t\t\t\t\t", "]"}], "\n",
           "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{
         "A", " ", "function", " ", "for", " ", "getting", " ", "the", " ", 
          "next", " ", "object", " ", "by", " ", "some", " ", "function"}], 
         " ", "*)"}], "\n", "\t\t\t\t", 
        RowBox[{"\"\<NextObjectBy\>\"", "->", "\n", "\t\t\t\t\t", 
         RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"self", "=", "#"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"order", "=", "#2"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"pageType", "=", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Length", "@", 
                   RowBox[{"{", "##", "}"}]}], ">", "2"}], ",", " ", 
                 RowBox[{
                  RowBox[{"{", "##", "}"}], "[", 
                  RowBox[{"[", "3", "]"}], "]"}], ",", " ", 
                 "\"\<article\>\""}], "]"}]}]}], "\n", "\t\t\t\t\t\t\t", 
             "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"With", "[", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{"sorted", "=", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"SortBy", "[", "order", "]"}], "@", "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{
                  "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", 
                   "]"}], "[", "pageType", "]"}]}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"With", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"pos", "=", 
                  RowBox[{"1", "+", 
                   RowBox[{
                    RowBox[{"FirstPosition", "[", 
                    RowBox[{"sorted", ",", " ", "self"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"pos", "\[LessEqual]", 
                   RowBox[{"Length", "@", "sorted"}]}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"sorted", "[", 
                   RowBox[{"[", "pos", "]"}], "]"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t\t\t", 
               "]"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], "\n", 
           "\t\t\t\t\t\t\t", "]"}], "\n", "\t\t\t\t\t\t", "]"}]}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{
         "A", " ", "function", " ", "for", " ", "getting", " ", "the", " ", 
          "previous", " ", "object", " ", "by", " ", "some", " ", 
          "function"}], " ", "*)"}], "\n", "\t\t\t\t", 
        RowBox[{"\"\<PreviousObjectBy\>\"", "->", "\n", "\t\t\t\t\t", 
         RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"self", "=", "#"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"order", "=", "#2"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"pageType", "=", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Length", "@", 
                   RowBox[{"{", "##", "}"}]}], ">", "2"}], ",", " ", 
                 RowBox[{
                  RowBox[{"{", "##", "}"}], "[", 
                  RowBox[{"[", "3", "]"}], "]"}], ",", " ", 
                 "\"\<article\>\""}], "]"}]}]}], "\n", "\t\t\t\t\t\t\t", 
             "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"With", "[", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{"sorted", "=", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"SortBy", "[", "order", "]"}], "@", "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{
                  "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", 
                   "]"}], "[", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                  "pageType", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                  "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
              "\t\t\t\t\t\t\t\t", 
              RowBox[{"With", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"pos", "=", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"FirstPosition", "[", 
                    RowBox[{"sorted", ",", " ", "self"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "1"}]}], "}"}], ",", 
                "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"pos", ">", "0"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"sorted", "[", 
                   RowBox[{"[", "pos", "]"}], "]"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t\t\t", 
               "]"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], "\n", 
           "\t\t\t\t\t\t\t", "]"}], "\n", "\t\t\t\t\t\t", "]"}]}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{"The", " ", "pages"}], " ", "*)"}], "\n", "\t", "\t", "\t", 
        "\t", 
        RowBox[{"\"\<Pages\>\"", ":>", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
          "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", "]"}], "[", 
          "\"\<page.html\>\"", "]"}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{"The", " ", "articles"}], " ", "*)"}], "\n", "\t", "\t", 
        "\t", "\t", 
        RowBox[{"\"\<Articles\>\"", ":>", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
          "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", "]"}], "[", 
          "\"\<article.html\>\"", "]"}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"(*", " ", 
         RowBox[{"The", " ", "archives"}], " ", "*)"}], "\n", "\t", "\t", 
        "\t", "\t", 
        RowBox[{"\"\<Archives\>\"", ":>", "\n", "\t\t\t\t\t", 
         RowBox[{"Reverse", "@", "\n", "\t\t\t\t\t\t", 
          RowBox[{"GatherBy", "[", "\n", "\t", "\t", "\t", "\t\t\t\t", 
           RowBox[{
            RowBox[{"Values", "@", "\n", "\t", "\t", "\t", "\t\t\t\t\t", 
             RowBox[{"$WebSiteBuildContentStack", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", "\"\<Attributes\>\""}], "]"}], "]"}]}], 
            ",", "\n", "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"#", "[", "\"\<Date\>\"", "]"}], "&"}]}], "\n", 
           "\t\t\t\t\t\t\t", "]"}]}]}]}], "\n", "\t\t\t\t", "|>"}]}], ";"}]}],
    "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"67e92e48-6057-4852-a32a-19a7e853202f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ExtractPageData\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712671619319853*^9, 
  3.712671623070841*^9}},ExpressionUUID->"229cb5b0-4509-46d8-81e2-\
a2909e9e8748"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteExtractFileData\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"84a25cc2-4846-4539-8500-dc1fde8e0714"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "nost"}], "=", 
   "\"\<$WebSiteBuildContentStack not initialzed\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteExtractFileData", "[", 
    RowBox[{"root_", ",", " ", "content_", ",", " ", "config_"}], "]"}], ":=",
    "\n", "\t", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"AssociationQ", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
     "\t\t", 
     RowBox[{"Module", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
        "fileContent", ",", "\n", "\t\t\t\t", "args", ",", "\n", "\t\t\t\t", 
         "cname"}], "\n", "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"fileContent", "=", "\n", "\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{"content", ",", 
           RowBox[{"{", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_File", "|", "_String"}], ")"}], "?", "FileExistsQ"}],
              "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Switch", "[", 
              RowBox[{
               RowBox[{"FileExtension", "[", "content", "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t", "\"\<md\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
               
               RowBox[{"MarkdownToXML", "[", 
                RowBox[{"Import", "[", 
                 RowBox[{"content", ",", "\"\<Text\>\""}], "]"}], "]"}], ",", 
               "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"\"\<html\>\"", "|", "\"\<xml\>\""}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Import", "[", 
                RowBox[{"content", ",", " ", 
                 RowBox[{"{", 
                  RowBox[{"\"\<HTML\>\"", ",", "\"\<XMLObject\>\""}], "}"}]}],
                 "]"}]}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", 
            "\t\t\t\t\t", "}"}]}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"cname", "=", 
         RowBox[{"webSitePrepContentName", "[", 
          RowBox[{"content", ",", " ", "root"}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"args", "=", "\n", "\t\t\t\t", 
         RowBox[{"Merge", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"config", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Replace", "[", 
              RowBox[{"fileContent", ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"XMLObject", "[", "___", "]"}], "[", "___", "]"}],
                     "|", 
                    RowBox[{"XMLElement", "[", 
                    RowBox[{"\"\<html\>\"", ",", "___"}], "]"}]}], ")"}], 
                  "\[RuleDelayed]", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"KeyDrop", "[", 
                   RowBox[{
                    RowBox[{"WebSiteImportMeta", "[", "fileContent", "]"}], 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "\"\<URL\>\""}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"_", "\[Rule]", 
                  RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t\t\t", "}"}]}], 
              "\n", "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"\"\<SourceFile\>\"", "\[Rule]", "content"}]}], "\n", 
            "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", "Last"}], "\n", 
          "\t\t\t\t\t", "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"cname", "=!=", "None"}], ",", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"$WebSiteBuildContentStack", "[", "cname", "]"}], "=", 
            "\n", "\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t", 
             RowBox[{"\"\<Attributes\>\"", "->", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"WebSiteTemplateGatherArgs", "[", 
               RowBox[{"fileContent", ",", " ", "args"}], "]"}]}], "\n", 
             "\t\t\t\t\t\t", "|>"}]}], ";", "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{"$WebSiteBuildContentStack", "[", 
             RowBox[{"cname", ",", " ", "\"\<Content\>\""}], "]"}], "=", "\n",
             "\t\t\t\t\t", 
            RowBox[{"WebSiteTemplatePreProcess", "[", 
             RowBox[{"fileContent", ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"$WebSiteBuildContentStack", "[", 
               RowBox[{"cname", ",", " ", "\"\<Attributes\>\""}], "]"}]}], 
             "\n", "\t\t\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t\t\t\t", "]"}], 
        ";"}]}], "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Message", "[", 
       RowBox[{"WebSiteBuild", "::", "nost"}], "]"}], ";", "\n", "\t\t", 
      "$Failed"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"17b9a487-d09f-4da2-a795-74f7f49e1260"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteExtractPageData\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"38182936-c7e8-4272-a4f1-8ad1004cc192"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteExtractPageData", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Monitor", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "None"}]}], "\n", "\t\t", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteExtractPageData", "[", 
    RowBox[{"rootDir_", ",", " ", "files_", ",", "config_", ",", " ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"extractfile", "=", "\"\<\>\""}], ",", "\n", "\t\t\t", 
       RowBox[{"lb", "=", 
        RowBox[{"OptionValue", "[", "\"\<LastBuild\>\"", "]"}]}]}], "\n", 
      "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "Monitor", 
        ",", " ", 
        RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"Module", "[", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"fname", "=", "\n", "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{"#", ",", "\n", "\t", "\t", "\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"f", ":", 
                  RowBox[{"Except", "[", 
                   RowBox[{"_String", "|", "_File"}], "]"}]}], 
                 "\[RuleDelayed]", "\n", "\t", "\t", "\t", "\t\t\t\t\t", 
                 RowBox[{"ExpandFileName", "@", 
                  RowBox[{"First", "[", "f", "]"}]}]}]}], "\n", "\t", 
               "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
             RowBox[{"templates", "=", "\n", "\t", "\t\t\t\t\t", 
              RowBox[{"Flatten", "@", 
               RowBox[{"List", "@", "\n", "\t", "\t\t\t\t\t", 
                RowBox[{"Replace", "[", 
                 RowBox[{"#", ",", 
                  RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"r", ":", 
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}]}], 
                    "\[RuleDelayed]", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"Last", "[", "r", "]"}]}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t", 
                    RowBox[{"_", "\[Rule]", "\"\<base.html\>\""}]}], "\n", 
                   "\t\t\t\t\t\t\t", "}"}]}], "]"}]}]}]}], ",", "\n", 
             "\t\t\t\t\t", "cname"}], "\n", "\t\t\t\t\t", "}"}], ",", "\n", 
           "\t\t\t\t", 
           RowBox[{
            RowBox[{"extractfile", "=", "fname"}], ";", "\n", "\t\t\t\t", 
            RowBox[{"cname", "=", 
             RowBox[{"webSitePrepContentName", "[", 
              RowBox[{"fname", ",", " ", "rootDir"}], "]"}]}], ";", "\n", 
            "\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"KeyFreeQ", "[", 
                RowBox[{"$WebSiteBuildContentStack", ",", " ", "cname"}], 
                "]"}], "||", "\n", "\t\t\t\t\t\t", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"!", 
                  RowBox[{"DateObjectQ", "[", "lb", "]"}]}], "||", 
                 RowBox[{"lb", "<=", 
                  RowBox[{"FileDate", "[", 
                   RowBox[{"fname", ",", " ", "\"\<Modification\>\""}], 
                   "]"}]}]}], ")"}]}], ",", "\n", "\t\t\t\t\t", 
              RowBox[{"WebSiteExtractFileData", "[", "\n", "\t\t\t\t\t\t", 
               RowBox[{
               "rootDir", ",", "\n", "\t\t\t\t\t\t", "fname", ",", "\n", 
                "\t\t\t\t\t\t", 
                RowBox[{"Merge", "[", "\n", "\t", "\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
                   RowBox[{"config", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<Templates\>\"", "->", "\n", "\t", "\t\t\t\t\t\t\t\t",
                     "templates"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<FilePath\>\"", "->", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{"WebSiteBuildFilePath", "[", 
                    RowBox[{"fname", ",", " ", "rootDir"}], "]"}]}]}], "\n", 
                   "\t", "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                  "\t\t\t\t\t\t", "Last"}], "\n", "\t", "\t\t\t\t\t\t", 
                 "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
             "]"}]}]}], "\n", "\t\t\t\t", "]"}], "&"}], "/@", "files"}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t", 
        RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "\"\<Extracting data from ``\>\"", ",", "\n", "\t\t\t\t\t", 
          "extractfile"}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", 
      "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"9b5d4437-c058-4b6a-bbb6-5c639823803d"]\

}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]CopyTheme\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712537745851767*^9, 
  3.712537747002632*^9}},ExpressionUUID->"f7eeef78-b6a3-463c-98aa-\
ff66d85ff4db"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteCopyTheme\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellLabel->
  "In[123]:=",ExpressionUUID->"83e11a67-0e03-4573-914e-b8e4f0016ce9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteCopyTheme", "[", 
   RowBox[{"outDir_", ",", " ", "thm_", ",", " ", "mon_"}], "]"}], ":=", "\n",
   "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"fils", "=", 
      RowBox[{
       RowBox[{"Select", "[", 
        RowBox[{"Not", "@*", "DirectoryQ"}], "]"}], "@", 
       RowBox[{"FileNames", "[", 
        RowBox[{"\"\<*\>\"", ",", "thm", ",", "\[Infinity]"}], "]"}]}]}], 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{"Block", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{"copyfile", ",", "\n", "\t\t\t\t", "newfile"}], "\n", 
       "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "mon"}], ",", " ", "Monitor", ",", " ", 
         RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"With", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"{", "\n", "\t\t\t\t\t\t", 
             RowBox[{"newf", "=", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"FileNameJoin", "@", 
               RowBox[{"{", 
                RowBox[{
                "outDir", ",", " ", "\"\<theme\>\"", ",", "\n", "\t", "\t", 
                 "\t", "\t\t\t\t\t", 
                 RowBox[{"FileNameDrop", "[", 
                  RowBox[{"#", ",", " ", 
                   RowBox[{"FileNameDepth", "[", "thm", "]"}]}], "]"}]}], 
                "\n", "\t", "\t", "\t", "\t\t\t\t\t", "}"}]}]}], "\n", 
             "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"!", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"FileExistsQ", "[", "newf", "]"}], "&&", 
                  RowBox[{
                   RowBox[{"FileHash", "[", "#", "]"}], "==", 
                   RowBox[{"FileHash", "[", "newf", "]"}]}]}], ")"}]}], ",", 
               "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"copyfile", "=", "#"}], ";", "\n", "\t\t\t\t\t\t", 
                RowBox[{"newfile", "=", "newf"}], ";", "\n", "\t\t\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"!", 
                   RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "newf"}]}]}], ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t", 
                  RowBox[{"CreateDirectory", "[", 
                   RowBox[{
                    RowBox[{"DirectoryName", "@", "newf"}], ",", "\n", "\t", 
                    "\t", "\t\t\t\t\t\t", 
                    RowBox[{
                    "CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
                   "\n", "\t", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                 "\t", "\t\t\t\t\t", "]"}], ";", "\n", "\t", "\t", "\t\t\t\t", 
                RowBox[{"CopyFile", "[", 
                 RowBox[{"#", ",", "newf", ",", 
                  RowBox[{"OverwriteTarget", "\[Rule]", "True"}]}], "]"}]}]}],
               "\n", "\t\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t\t", 
             RowBox[{"copyfile", "=."}], ";", "\n", "\t\t\t\t\t", 
             RowBox[{"newfile", "=."}], ";"}]}], "\n", "\t\t\t\t\t", "]"}], 
          "&"}], "/@", "fils"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"AllTrue", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"copyfile", ",", "newfile"}], "}"}], ",", "StringQ"}], 
            "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"TemplateApply", "[", 
            RowBox[{"\"\<Copying `` to ``\>\"", ",", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"copyfile", ",", "\n", "\t\t\t\t\t\t\t\t", "newfile"}], 
              "\n", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", 
            "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
            "\"\<Copying theme ``\>\"", ",", "\n", "\t\t\t\t\t\t\t", "thm"}], 
            "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], 
       "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"d8d3fb97-c09b-402c-9400-aaf2e59a4184"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCopyTheme\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"af87b05a-ad92-4b60-bd63-67e4cab21be3"],

Cell[BoxData[
 RowBox[{"WebSiteCopyTheme", "//", "Clear"}]], "CodeInput",
 CellChangeTimes->{{3.7206493467372713`*^9, 
  3.720649347545315*^9}},ExpressionUUID->"fc63eda0-4729-4203-851c-\
099a4c2c2583"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteCopyTheme", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"Monitor", "\[Rule]", "True"}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteCopyTheme", "[", 
   RowBox[{"dir_", ",", "outDir_", ",", " ", "theme_", ",", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"thm", "=", "\n", "\t\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", "\n", "\t", "\t\t\t\t", 
         RowBox[{
          RowBox[{"WebSiteFindTheme", "[", 
           RowBox[{"dir", ",", " ", "theme", ",", " ", 
            RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}], 
          ",", "\n", "\t", "\t", "\t\t\t", "\"\<static\>\""}], "\n", 
         "\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t\t\t", 
      RowBox[{"common", "=", "\n", "\t\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
         "$WebSiteTemplateLibDirectory", ",", "\n", "\t\t\t\t\t", 
          "\"\<static\>\""}], "\n", "\t\t\t\t\t", "}"}]}]}]}], "\n", "\t\t\t",
      "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Quiet", "@", 
      RowBox[{"CreateDirectory", "[", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"outDir", ",", " ", "\"\<theme\>\""}], "}"}]}], "]"}]}], ";",
      "\n", "\t\t", 
     RowBox[{"webSiteCopyTheme", "[", 
      RowBox[{"outDir", ",", " ", "common", ",", " ", 
       RowBox[{"TrueQ", "@", 
        RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "]"}], ";", "\n", 
     "\t\t", 
     RowBox[{"webSiteCopyTheme", "[", 
      RowBox[{"outDir", ",", " ", "thm", ",", " ", 
       RowBox[{"TrueQ", "@", 
        RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "]"}], ";", "\n", 
     "\t\t", 
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"outDir", ",", "\"\<theme\>\""}], "}"}]}]}]}], "\n", "\t", 
   "\t", "]"}]}]}], \
"CodeInput",ExpressionUUID->"8594c8bc-30fb-44be-81a4-6fd0fcbbc6a4"]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]CopyContent\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7125936627358007`*^9, 
  3.7125936645108232`*^9}},ExpressionUUID->"5a70d496-cd19-4b6b-bcf7-\
adcf5aa631ad"],

Cell[BoxData[
 RowBox[{"WebSiteCopyContent", "//", "Clear"}]], "CodeInput",
 CellChangeTimes->{{3.720649351986136*^9, 
  3.720649353136948*^9}},ExpressionUUID->"6ca97a4e-f4a1-4c26-a702-\
509836318988"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteCopyContent", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"Monitor", "\[Rule]", "True"}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteCopyContent", "[", "\n", "\t", 
   RowBox[{"dir_", ",", "outDir_", ",", "\n", "\t", 
    RowBox[{"sel", ":", 
     RowBox[{"Except", "[", 
      RowBox[{"_", "?", "OptionQ"}], "]"}], ":", "Automatic"}], ",", "\n", 
    "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{
      RowBox[{"selPat", "=", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{"sel", ",", "\n", "\t\t\t\t", 
         RowBox[{"Automatic", "\[RuleDelayed]", 
          RowBox[{"Except", "[", 
           RowBox[{"\"\<posts\>\"", "|", "\"\<pages\>\""}], "]"}]}]}], "\n", 
        "\t\t\t\t", "]"}]}], ",", "\n", "\t\t", 
      RowBox[{"contDir", "=", "\n", "\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"dir", ",", "\"\<content\>\""}], "}"}]}]}], ",", "\n", 
      "\t\t", 
      RowBox[{"monitor", "=", "\n", "\t\t\t", 
       RowBox[{"TrueQ", "@", 
        RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}]}], "\n", "\t\t", 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"With", "[", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t", 
        RowBox[{"fils", "=", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Select", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"MatchQ", "[", 
             RowBox[{
              RowBox[{"FileNameTake", "[", 
               RowBox[{"#", ",", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"FileNameDepth", "[", "contDir", "]"}], "+", "1"}], 
                 "}"}]}], "]"}], ",", "selPat"}], "]"}], "&"}], "\n", 
           "\t\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Select", "[", 
            RowBox[{"Not", "@*", "DirectoryQ"}], "]"}], "@", "\n", "\t", "\t",
            "\t\t\t\t", 
           RowBox[{"FileNames", "[", 
            RowBox[{"\"\<*\>\"", ",", "contDir", ",", "\[Infinity]"}], 
            "]"}]}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", "\n", "\t\t\t\t", 
          RowBox[{"copyfile", ",", "\n", "\t\t\t\t", "newfile"}], "\n", 
          "\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{"monitor", ",", " ", "Monitor", ",", " ", 
            RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"With", "[", 
              RowBox[{
               RowBox[{"{", "\n", "\t\t\t\t\t\t", 
                RowBox[{"newf", "=", "\n", "\t", "\t", "\t\t\t\t\t", 
                 RowBox[{"FileNameJoin", "@", 
                  RowBox[{"{", 
                   RowBox[{"outDir", ",", "\n", "\t", "\t", "\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"FileNameDepth", "[", "contDir", "]"}]}], "]"}]}],
                    "\n", "\t", "\t", "\t\t\t\t\t\t", "}"}]}]}], "\n", "\t", 
                "\t", "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t", "\t\t\t\t", 
               
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"!", 
                   RowBox[{"FileExistsQ", "[", "newf", "]"}]}], "||", 
                  RowBox[{
                   RowBox[{"FileHash", "[", "#", "]"}], "=!=", 
                   RowBox[{"FileHash", "[", "newf", "]"}]}]}], ",", "\n", 
                 "\t", "\t", "\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"!", 
                    RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "newf"}]}]}], ",", "\n", 
                    "\t", "\t", "\t\t\t\t\t\t", 
                    RowBox[{"CreateDirectory", "[", 
                    RowBox[{
                    RowBox[{"DirectoryName", "@", "newf"}], ",", "\n", "\t", 
                    "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                   "\t", "\t\t\t\t\t\t", "]"}], ";", "\n", "\t", "\t", 
                  "\t\t\t\t\t", 
                  RowBox[{"CopyFile", "[", 
                   RowBox[{"#", ",", "newf", ",", 
                    RowBox[{"OverwriteTarget", "\[Rule]", "True"}]}], 
                   "]"}]}]}], "\n", "\t", "\t", "\t\t\t\t\t", "]"}]}], "\n", 
              "\t", "\t", "\t\t\t\t", "]"}], "&"}], "/@", "fils"}], ",", "\n",
            "\t\t\t\t\t", 
           RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"AllTrue", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"copyfile", ",", "newfile"}], "}"}], ",", 
                "StringQ"}], "]"}], ",", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", 
               RowBox[{
               "\"\<Copying `` to ``\>\"", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                
                RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                 "copyfile", ",", "\n", "\t", "\t\t\t\t\t\t\t\t", "newfile"}],
                  "\n", "\t", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
               "\"\<Copying content from ``\>\"", ",", "\n", 
                "\t\t\t\t\t\t\t\t", "contDir"}], "\n", "\t\t\t\t\t\t\t\t", 
               "]"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t",
           "]"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", 
     "\n", "\t\t", "outDir"}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"921c6c3b-771f-45a2-ba78-a7a5411fe24a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateAggregationPages\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712664403157797*^9, 3.7126644060687113`*^9}, {
   3.7126644483009977`*^9, 3.712664450555676*^9}, 3.7126658795980988`*^9, 
   3.7126809235504093`*^9},ExpressionUUID->"e66fd583-700a-4816-8572-\
ebac246a4f61"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteGenerateAggregationPages", "//", "ClearAll"}], 
  ";"}]], "CodeInput",
 CellChangeTimes->{{3.712666323483973*^9, 
  3.712666343287422*^9}},ExpressionUUID->"f8b7319d-0795-4426-bb60-\
72abe943a96e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$DefaultWebSiteAggregationTypes", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t\t", 
    RowBox[{
    "\"\<Authors\>\"", ",", "\n", "\t\t\t", "\"\<Categories\>\"", ",", "\n", 
     "\t\t\t", "\"\<Tags\>\""}], "\n", "\t\t\t", "}"}]}], ";"}]], "CodeInput",
 
 CellChangeTimes->{{3.712705943659857*^9, 3.712705952957896*^9}, 
   3.733680714076387*^9},ExpressionUUID->"48a70de4-788c-42a8-9bdf-\
39689f52625c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteGenerateAggregationPages", ":=", "\n", "\t", 
   RowBox[{"AssociationMap", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t", 
         RowBox[{
          RowBox[{"singular", "=", "\n", "\t\t\t\t", 
           RowBox[{"ToLowerCase", "@", 
            RowBox[{"Switch", "[", 
             RowBox[{
             "#", ",", "\n", "\t\t\t\t\t", "\"\<Categories\>\"", ",", "\n", 
              "\t\t\t\t\t\t", "\"\<Category\>\"", ",", "\n", "\t\t\t\t\t", 
              "_", ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"StringTrim", "[", 
               RowBox[{"#", ",", "\"\<s\>\""}], "]"}]}], "\n", "\t\t\t\t\t", 
             "]"}]}]}], ",", "\n", "\t\t\t", 
          RowBox[{"plural", "=", 
           RowBox[{"ToLowerCase", "[", "#", "]"}]}]}], "\n", "\t\t\t", "}"}], 
        ",", "\n", "\t\t\t", 
        RowBox[{"<|", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"\"\<AggregationTemplates\>\"", "\[Rule]", 
           RowBox[{"plural", "<>", "\"\<.html\>\""}]}], ",", "\n", "\t", 
          "\t\t\t", 
          RowBox[{"\"\<AggregationFile\>\"", "\[Rule]", 
           RowBox[{"plural", "<>", "\"\<.html\>\""}]}], ",", "\n", "\t\t\t\t", 
          RowBox[{"\"\<Templates\>\"", "->", 
           RowBox[{"singular", "<>", "\"\<.html\>\""}]}], ",", "\n", "\t", 
          "\t\t\t", 
          RowBox[{"\"\<File\>\"", "\[Rule]", 
           RowBox[{"Function", "@", 
            RowBox[{"{", 
             RowBox[{"plural", ",", " ", 
              RowBox[{
               RowBox[{"ToLowerCase", "[", "#", "]"}], "<>", 
               "\"\<.html\>\""}]}], "}"}]}]}]}], "\n", "\t\t\t\t", "|>"}]}], 
       "\n", "\t\t\t", "]"}], "&"}], ",", "\n", "\t\t", 
     "$WebSiteAggregationTypes"}], "\n", "\t\t", "]"}]}], ";"}]], "CodeInput",
 
 CellChangeTimes->{{3.71266514945728*^9, 3.7126651860668383`*^9}, {
   3.712665217439394*^9, 3.7126652341440487`*^9}, {3.712665304813098*^9, 
   3.712665428035041*^9}, {3.712665820160141*^9, 3.712665997496722*^9}, {
   3.712666029859069*^9, 3.712666072930785*^9}, 3.712666106464913*^9, {
   3.712666344321274*^9, 3.71266635599087*^9}, {3.712666433920295*^9, 
   3.7126664953914213`*^9}, {3.712666527956365*^9, 3.7126666573618298`*^9}, {
   3.712666718700697*^9, 3.712666844960993*^9}, {3.7126668754405527`*^9, 
   3.712666928789379*^9}, {3.712667120971504*^9, 3.712667127604598*^9}, {
   3.712667218115181*^9, 3.712667240576004*^9}, {3.71266727175488*^9, 
   3.712667284035528*^9}, {3.712667338725422*^9, 3.7126674668569603`*^9}, {
   3.712667540498931*^9, 3.712667723958869*^9}, {3.7126678308875837`*^9, 
   3.712667974003702*^9}, {3.7126680713811483`*^9, 3.712668090906543*^9}, {
   3.712668122843464*^9, 3.7126681342228823`*^9}, {3.712670116674231*^9, 
   3.712670132930787*^9}, {3.7126701995660133`*^9, 3.712670215441181*^9}, {
   3.7126702552547092`*^9, 3.7126702562391033`*^9}, {3.712670727512183*^9, 
   3.712670801565055*^9}, 3.712670833219757*^9, {3.712670922503469*^9, 
   3.712670956287449*^9}, {3.7126710571253643`*^9, 3.712671088301495*^9}, {
   3.712671148908391*^9, 3.7126712578300858`*^9}, 3.7126715967553673`*^9, {
   3.712674875166005*^9, 3.712674875173706*^9}, {3.7126810289175043`*^9, 
   3.712681035579097*^9}, {3.712702414645706*^9, 3.712702416467229*^9}, {
   3.712702795080298*^9, 3.712702796916643*^9}, {3.71270286078234*^9, 
   3.712702861684805*^9}, 3.712703141508515*^9, {3.712703232060111*^9, 
   3.712703236673512*^9}, {3.712703305842944*^9, 3.712703318983124*^9}, {
   3.712703354391477*^9, 3.712703369105493*^9}, {3.7127035916567993`*^9, 
   3.7127035984471207`*^9}, {3.7127041854870777`*^9, 
   3.7127042196636753`*^9}, {3.712704270845909*^9, 3.712704329291606*^9}, {
   3.712704361760964*^9, 3.712704363693431*^9}, {3.712704415708521*^9, 
   3.712704433747364*^9}, {3.712704509184999*^9, 3.712704598835371*^9}, {
   3.7127046727669764`*^9, 3.7127046906090593`*^9}, {3.712704721687557*^9, 
   3.712704813152484*^9}, {3.712704876106822*^9, 3.712704918979272*^9}, 
   3.712704956613119*^9, {3.712705543757841*^9, 3.7127055510485983`*^9}, {
   3.712705599726549*^9, 3.712705620908826*^9}, {3.712705665729251*^9, 
   3.712705677020603*^9}, {3.7127057192498703`*^9, 3.712705743660692*^9}, 
   3.712705942219935*^9, 3.712705978452525*^9, {3.712706253572679*^9, 
   3.712706322942292*^9}, {3.712706358611857*^9, 3.712706411080462*^9}, {
   3.712707117106607*^9, 3.7127071781295147`*^9}, {3.7127074323146772`*^9, 
   3.712707506300933*^9}, 3.712707773204713*^9, {3.712708420610333*^9, 
   3.712708421044088*^9}, 3.7127085364888983`*^9, {3.712708576528717*^9, 
   3.7127086082550297`*^9}, {3.712708658709816*^9, 3.712708660341799*^9}, {
   3.71270871738135*^9, 3.712708731028211*^9}, {3.712708790548338*^9, 
   3.712708846797104*^9}, 3.712708881601253*^9, {3.712708954540971*^9, 
   3.712708966018165*^9}, {3.712709440863057*^9, 3.712709498349432*^9}, {
   3.712709531329755*^9, 3.71270956485249*^9}, {3.71270960498212*^9, 
   3.712709629997939*^9}, {3.7127096903116007`*^9, 3.712709753268268*^9}, {
   3.712709876179242*^9, 3.712709877687233*^9}, {3.712709932969009*^9, 
   3.712710062043097*^9}, {3.712710094952511*^9, 3.712710153113101*^9}, {
   3.712710194604219*^9, 3.712710203574037*^9}, {3.71271023532255*^9, 
   3.71271026069308*^9}, {3.712710317351536*^9, 3.712710335970428*^9}, 
   3.712710383790448*^9, {3.7127104242309113`*^9, 3.712710451576961*^9}, {
   3.712710717817768*^9, 3.7127107382210093`*^9}, {3.720649260973762*^9, 
   3.720649265321301*^9}, 3.723298935982943*^9, 3.733673939702389*^9, 
   3.733680813480165*^9},ExpressionUUID->"9f3e70f3-23cb-4d60-aa6b-\
848af4d8c3df"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCollectAggPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.733680862336738*^9, 
  3.733680881736965*^9}},ExpressionUUID->"10b4c494-03ea-4d70-8836-\
c1e016c3ea77"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteCollectAggPages", "[", "aggthing_", "]"}], ":=", "\n", "\t", 
  RowBox[{"KeySort", "@", 
   RowBox[{
    RowBox[{"Map", "[", 
     RowBox[{"Flatten", "@*", "List"}], "]"}], "@", "\n", "\t\t", 
    RowBox[{
     RowBox[{"GroupBy", "[", 
      RowBox[{"First", "\[Rule]", "Last"}], "]"}], "@", "\n", "\t\t\t", 
     RowBox[{"Flatten", "[", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"Thread", "@*", "Reverse"}], "/@", "\n", "\t\t\t\t\t", 
       RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t", 
        RowBox[{"DeleteCases", "[", "\n", "\t\t\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<Attributes\>\"", ",", " ", 
                RowBox[{"<|", "|>"}]}], "]"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
              "aggthing", ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], "&"}], "/@",
            "$WebSiteBuildContentStack"}], ",", "\n", "\t\t\t\t\t\t\t", 
          RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
      "\t\t\t\t", 
      "]"}]}]}]}]}]], \
"CodeInput",ExpressionUUID->"19112d96-c958-43a1-b561-d690f8f28430"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateAggregationPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.733680862336738*^9, 
  3.733680886994101*^9}},ExpressionUUID->"cb3fc59b-6ef3-4bc9-85dc-\
f6c90204d787"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "badagg"}], "=", 
   "\"\<Can't deal with aggregation type ``\>\""}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.733704808046063*^9, 
  3.7337048146851892`*^9}},ExpressionUUID->"3d0c8a0c-9009-45f7-9e2e-\
abb696985662"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Options", "[", "WebSiteGenerateAggregationPages", "]"}], "=", "\n",
   "\t", 
  RowBox[{"{", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Monitor", "\[Rule]", "True"}], ",", "\n", "\t\t", 
    RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}]}], "\n", "\t\t", 
   "}"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateAggregationPages", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", "\n", "\t", "aggpages_", ",", "\n", "\t", "outDir_", ",", 
     "\n", "\t", "theme_", ",", "\n", "\t", "config_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"longDir", "=", 
        RowBox[{"ExpandFileName", "@", "dir"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}]}], 
      "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Block", "[", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t", 
         RowBox[{
         "aggbit", ",", "\n", "\t\t\t", "outfile", ",", "\n", "\t\t\t", 
          RowBox[{"$WebSiteAggregationTypes", "=", "\n", "\t\t\t\t", 
           RowBox[{"Join", "[", "\n", "\t\t\t\t\t", 
            RowBox[{
            "$DefaultWebSiteAggregationTypes", ",", " ", "\n", "\t\t\t\t\t", 
             RowBox[{"(*", "\n", "\t\t\t\t", 
              RowBox[{
              "Include", " ", "custom", " ", "aggregation", " ", "types", " ",
                "from", " ", "templates", " ", 
               RowBox[{"dir", ":", "\n", "\t\t\t\t\t", "TODO", ":", " ", 
                RowBox[{
                "link", " ", "to", " ", "custom", " ", "agg", " ", "pages", 
                 " ", "in", " ", "later", " ", "bit", " ", "and", " ", 
                 "check", " ", "metainfo", " ", "for", " ", "key"}]}]}], 
              "\t\t", "\n", "\t\t\t\t", "*)"}], "\n", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", 
                 RowBox[{"\"\<aggregations\>\"", ",", " ", 
                  RowBox[{"FileBaseName", "[", "#", "]"}]}], "}"}]}], "&"}], "/@",
               "\n", "\t\t\t\t\t\t", 
              RowBox[{"FileNames", "[", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"\"\<*.html\>\"", "|", "\"\<*.xml\>\""}], ",", "\n", 
                "\t\t\t\t\t\t\t", 
                RowBox[{"FileNameJoin", "@", 
                 RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "thm", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                   "\"\<templates\>\"", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                   "\"\<aggregations\>\""}], "\n", "\t\t\t\t\t\t\t\t", 
                  "}"}]}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
            "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{
         RowBox[{"KeyValueMap", "[", 
          RowBox[{"(*", 
           RowBox[{
           "Map", " ", "over", " ", "aggregation", " ", "types", " ", "and", 
            " ", "templates"}], "*)"}], "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t\t\t\t\t", 
               RowBox[{
                RowBox[{"aggthing", "=", "#"}], ",", "\n", "\t\t\t\t\t", 
                RowBox[{"aggdata", "=", "#2"}], ",", "\n", "\t\t\t\t\t", 
                RowBox[{"aggsingular", "=", 
                 RowBox[{"(*", " ", 
                  RowBox[{
                   RowBox[{
                   "this", " ", "should", " ", "be", " ", "a", " ", "little", 
                    " ", "top"}], "-", 
                   RowBox[{"level", " ", "function"}]}], " ", "*)"}], "\n", 
                 "\t\t\t\t\t\t", 
                 RowBox[{"Switch", "[", 
                  RowBox[{
                  "#", ",", "\n", "\t\t\t\t\t\t\t", "\"\<Categories\>\"", ",",
                    "\n", "\t\t\t\t\t\t\t\t", "\"\<Category\>\"", ",", "\n", 
                   "\t\t\t\t\t\t\t", 
                   RowBox[{
                   "Alternatives", "@@", "\n", "\t\t\t\t\t\t\t\t", 
                    "$DefaultWebSiteAggregationTypes"}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t", 
                   RowBox[{"StringTrim", "[", 
                    RowBox[{"#", ",", "\"\<s\>\""}], "]"}], ",", "\n", 
                   "\t\t\t\t\t\t\t", "_", ",", "\n", "\t\t\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{"$WebSiteAggregationTypes", ",", " ", 
                    RowBox[{"StringTrim", "[", 
                    RowBox[{"#", ",", "\"\<s\>\""}], "]"}]}], "]"}], ",", 
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"StringTrim", "[", 
                    RowBox[{"#", ",", "\"\<s\>\""}], "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t", 
                  "]"}]}]}], "\n", "\t\t\t\t\t", "}"}], ",", "\n", 
              "\t\t\t\t\t", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"aggsingular", "===", "None"}], ",", "\n", 
                "\t\t\t\t\t\t", 
                RowBox[{"(*", " ", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                   "Dunno", " ", "what", " ", "to", " ", "do", " ", "here"}], 
                   " ", "..."}], ".."}], " ", "*)"}], "\n", "\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "\"\<SiteBuilder\>\"", ",", "\n", "\t\t\t\t\t\t\t", 
                   RowBox[{"Evaluate", "[", 
                    RowBox[{"WebSiteBuild", "::", "badagg"}], "]"}], ",", 
                   "\n", "\t\t\t\t\t\t\t", "aggthing"}], "\n", 
                  "\t\t\t\t\t\t\t", "]"}], ";"}], ",", "\n", "\t\t\t\t\t\t", 
                RowBox[{"Block", "[", 
                 RowBox[{
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
                   RowBox[{"(*", " ", 
                    RowBox[{
                    "Files", " ", "to", " ", "be", " ", "collected", " ", 
                    "and", " ", "passed", " ", "to", " ", "combined", " ", 
                    "aggregation"}], " ", "*)"}], "\n", "\t", "\t\t\t\t\t\t", 
                   
                   RowBox[{
                    RowBox[{"$aggregationFiles", "=", 
                    RowBox[{"<|", "|>"}]}], ",", "\n", "\t", "\t\t\t\t\t\t", 
                    RowBox[{"(*", 
                    RowBox[{
                    "Collect", " ", "type", " ", "name", " ", "and", " ", 
                    "templates"}], "*)"}], "\n", "\t\t\t\t\t\t\t", 
                    RowBox[{"agglist", "=", "\n", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteCollectAggPages", "[", "aggthing", "]"}]}]}], 
                   "\n", "\t", "\t\t\t\t\t\t", 
                   RowBox[{"(*", 
                    RowBox[{
                    "Gather", " ", "elements", " ", "in", " ", "the", " ", 
                    "content", " ", "stack", "  ", "by", " ", "type", " ", 
                    "in", " ", "the", " ", "aggregation"}], "*)"}], "\n", 
                   "\t", "\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                  "\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"KeyValueMap", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"(*", 
                    RowBox[{
                    RowBox[{
                    "Map", " ", "over", " ", "aggregated", " ", "elements"}], 
                    ",", " ", 
                    RowBox[{"e", ".", "g", "."}], ",", " ", 
                    RowBox[{
                    "over", " ", "each", " ", "tag", " ", "or", " ", 
                    "category"}]}], "*)"}], "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"With", "[", 
                    RowBox[{
                    RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"fout", "=", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"(*", 
                    RowBox[{
                    "The", " ", "file", " ", "to", " ", "export", " ", "the", 
                    " ", "aggregation", " ", "file", " ", "to"}], "*)"}], 
                    "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildSlug", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"Flatten", "@", 
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "outDir", ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"aggdata", "[", "\"\<File\>\"", "]"}], "@", 
                    "#"}]}], "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    "}"}]}]}]}]}], ",", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "templates", "=", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"(*", 
                    RowBox[{
                    "The", " ", "template", " ", "file", " ", "to", " ", 
                    "use"}], "*)"}], "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Flatten", "@", 
                    RowBox[{"List", "@", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "aggdata", "[", "\"\<Templates\>\"", "]"}]}]}]}]}], "\n", 
                    "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"$aggregationFiles", "[", "#", "]"}], "=", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"aggsingular", "\[Rule]", "#"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<File\>\"", "->", "fout"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Articles\>\"", "\[Rule]", "#2"}], ",", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<URL\>\"", "->", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"fout", ",", " ", 
                    RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}]}], 
                    "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", "|>"}]}], ";", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{"aggbit", "=", 
                    RowBox[{"ToLowerCase", "[", 
                    RowBox[{"aggthing", "<>", "\"\</\>\"", "<>", "#"}], 
                    "]"}]}], ";", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{"(*", " ", 
                    RowBox[{
                    "Make", " ", "sure", " ", "directory", " ", "exists"}], 
                    " ", "*)"}], "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"!", 
                    RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "fout"}]}]}], ",", "\n", 
                    "\t", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                    RowBox[{"CreateDirectory", "@", 
                    RowBox[{"DirectoryName", "@", "fout"}]}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], ";", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"(*", " ", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Export", " ", "aggregation", " ", "file"}], ",", 
                    " ", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"e", ".", "g", ".", " ", "tags"}], "/", 
                    RowBox[{"mathematica", ".", "html"}]}], " ", "passing", 
                    " ", "the", " ", "\n", "\t", "\t\t\t\t\t\t\t", "list", 
                    " ", "of", " ", "file", " ", "URLs", " ", "as", " ", 
                    "the", " ", "aggregation", " ", "name"}], ",", " ", 
                    RowBox[{"e", ".", "g", ".", " ", "Tags"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t", "*)"}], "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "WebSiteTemplateExportPaginated", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"aggbit", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileBaseName", "[", "fout", "]"}], ",", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameTake", "[", 
                    RowBox[{"fout", ",", " ", 
                    RowBox[{"{", 
                    RowBox[{"1", ",", " ", 
                    RowBox[{"-", "2"}]}], "}"}]}], "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "outDir", ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"thm", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", "longDir"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", "None", ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "templates", ",", " ", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Append", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"config", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"aggsingular", "\[Rule]", "#"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{"$WebSiteBuildContentStack", ",", "#2", ",", 
                    RowBox[{"<|", "|>"}]}], "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "\"\<Attributes\>\"", ",", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "|>"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FilterRules", "[", 
                    RowBox[{
                    RowBox[{"{", "ops", "}"}], ",", " ", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Options", "@", "WebSiteTemplateExportPaginated"}]}], 
                    "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], ";", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"aggbit", "=."}], ";"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}], "&"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t", "agglist"}], "\n", "\t", 
                    "\t\t\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{"(*", " ", 
                    RowBox[{
                    RowBox[{"If", " ", 
                    RowBox[{"there", "'"}], "s", " ", "a", " ", "overall", 
                    " ", "aggregation", " ", "to", " ", "use"}], ",", " ", 
                    RowBox[{
                    RowBox[{"e", ".", "g", ".", " ", "all"}], " ", "tags", 
                    " ", "or", " ", "categories"}]}], "*)"}], "\n", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"AllTrue", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<AggregationFile\>\"", ",", 
                    "\"\<AggregationTemplates\>\""}], "}"}], ",", "\n", "\t", 
                    "\t", "\t", "\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"KeyMemberQ", "[", 
                    RowBox[{"aggdata", ",", "#"}], "]"}], "&"}]}], "\n", "\t",
                     "\t", "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t", 
                    RowBox[{"With", "[", 
                    RowBox[{
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"fout", "=", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildSlug", "@", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"Flatten", "@", 
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "outDir", ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "aggdata", "[", "\"\<AggregationFile\>\"", "]"}]}], "\n", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t", "}"}]}]}]}]}], ",", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "templates", "=", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Flatten", "@", 
                    RowBox[{"List", "@", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "aggdata", "[", "\"\<AggregationTemplates\>\"", 
                    "]"}]}]}]}]}], "\n", "\t", "\t\t\t\t\t\t\t\t", "}"}], ",",
                     "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"aggbit", "=", 
                    RowBox[{"ToLowerCase", "@", "aggthing"}]}], ";", "\n", 
                    "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"!", 
                    RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "fout"}]}]}], ",", "\n", 
                    "\t", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                    RowBox[{"CreateDirectory", "@", 
                    RowBox[{"DirectoryName", "@", "fout"}]}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], ";", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"TrueQ", "@", 
                    RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", "\n",
                     "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Function", "[", 
                    RowBox[{"Null", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Monitor", "[", 
                    RowBox[{
                    "#", ",", " ", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Internal`LoadingPanel", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "TemplateApply", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<Generating ``\>\"", ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"fout", ",", 
                    RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}], 
                    "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n",
                     "\t", "\t\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "HoldAllComplete"}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "Identity"}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteTemplateExport", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "aggbit", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", "fout", 
                    ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"thm", ",", "\"\<templates\>\""}], "}"}]}], ",", 
                    "longDir"}], "}"}], ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t",
                     "None", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    "templates", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Merge", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "config", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "aggthing", "->", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{"Values", "@", "$aggregationFiles"}]}], ",", "\n",
                     "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<URL\>\"", "->", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Set", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "aggbit", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"fout", ",", 
                    RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}], 
                    "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n",
                     "\t", "\t\t\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "Last"}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "]"}]}], ";", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"aggbit", "=."}], ";"}]}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t",
                     "]"}]}]}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", 
               "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], "&"}], ",",
            "\n", "\t\t\t\t", 
           RowBox[{"Replace", "[", 
            RowBox[{"aggpages", ",", 
             RowBox[{
             "Automatic", "\[RuleDelayed]", 
              "$WebSiteGenerateAggregationPages"}]}], "]"}]}], "\n", 
          "\t\t\t\t", "]"}], ";"}]}], "\n", "\t\t\t", "]"}], ";"}]}], "\n", 
    "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"517ea520-000a-4346-98e0-dd6d1c19b1d6"]\

}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateIndexPages\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7126809292195377`*^9, 3.712680932106715*^9}, 
   3.733711198323041*^9},ExpressionUUID->"d9a264c4-0a3e-439b-bf63-\
5c8cec640759"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGatherIndexTemplates\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"c2ba01f4-6346-4be5-9e92-b4d2ff587c2e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteGatherIndexTemplates", "[", "thm_", "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{
    RowBox[{"FileNameDrop", "[", 
     RowBox[{"#", ",", " ", 
      RowBox[{"1", "+", 
       RowBox[{"FileNameDepth", "[", "thm", "]"}]}]}], "]"}], "&"}], "/@", 
   "\n", "\t\t", 
   RowBox[{"Join", "[", "\n", "\t\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t\t", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
        "thm", ",", " ", "\"\<templates\>\"", ",", " ", 
         "\"\<index.html\>\""}], "}"}], "]"}], "\n", "\t\t\t\t", "}"}], ",", 
     "\n", "\t\t\t", 
     RowBox[{"FileNames", "[", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"\"\<*.html\>\"", "|", "\"\<*.xml\>\""}], ",", " ", "\n", 
       "\t\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{
         "thm", ",", " ", "\"\<templates\>\"", ",", " ", "\"\<indexes\>\""}], 
         "}"}]}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"3914f1c0-21ac-46a1-b01d-09407de773b1"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateIndexPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"64945381-f809-499d-9b5d-023507aeb50a"],

Cell[BoxData[
 RowBox[{"WebSiteGenerateIndexPages", "//", "ClearAll"}]], "CodeInput",
 CellChangeTimes->{{3.712687458977841*^9, 3.7126874598570538`*^9}, 
   3.733704533727862*^9},ExpressionUUID->"2765d003-6349-4aba-9e67-\
4385ec95fa5d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateIndexPages", "]"}], "=", "\n", 
   "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateIndexPages", "[", 
    RowBox[{
    "dir_", ",", " ", "outDir_", ",", " ", "theme_", ",", " ", "config_", ",",
      " ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"longDir", "=", 
        RowBox[{"ExpandFileName", "@", "dir"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", " ", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}]}], 
      "\n", "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"WebSiteTemplateExportPaginated", "[", "\n", "\t\t\t\t", 
        RowBox[{"#", ",", "\n", "\t\t\t\t", 
         RowBox[{"StringReplace", "[", 
          RowBox[{
           RowBox[{"StringTrim", "[", 
            RowBox[{"#", ",", " ", "\"\<.html\>\""}], "]"}], ",", " ", 
           RowBox[{"\"\<indexes\>\"", "\[Rule]", "\"\<index\>\""}]}], "]"}], 
         ",", "\n", "\t\t\t\t", "outDir", ",", " ", "outDir", ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{"thm", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], ",", 
           " ", "\n", "\t\t\t\t\t", "longDir"}], "\n", "\t\t\t\t\t", "}"}], 
         ",", "\n", "\t\t\t\t", "None", ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "#", "}"}], ",", " ", "\n", "\t\t\t\t", "config", ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"$WebSiteBuildAggStack", "[", "\"\<Articles\>\"", "]"}], ",",
          "\n", "\t\t\t\t", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "ops", "}"}], ",", " ", "\n", "\t\t\t\t\t", 
           RowBox[{"Options", "@", "WebSiteTemplateExportPaginated"}]}], "\n",
           "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}], "&"}], "/@", 
      RowBox[{"WebSiteGatherIndexTemplates", "[", "thm", "]"}]}]}], "\n", 
    "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"f339f2ab-a4e8-46be-938a-c120fba97ac3"]\

}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateContent\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"afd11aea-2cf0-480e-bc9f-20fdca7fad33"],

Cell[BoxData[
 RowBox[{"WebSiteGenerateContent", "//", "ClearAll"}]], "CodeInput",
 CellChangeTimes->{{3.712597235663507*^9, 3.712597236408803*^9}, 
   3.712664442599132*^9},ExpressionUUID->"ce08366d-004a-4e30-859e-\
747be703a36c"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "genfl"}], "=", 
   "\"\<Failed to generate HTML for file ``\>\""}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.712626329552887*^9, 
  3.712626343921582*^9}},ExpressionUUID->"c247d788-ac7b-4e31-83f1-\
6c2fa12a5d3d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateContent", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Monitor", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "None"}]}], "\n", "\t\t", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateContent", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", "files_", ",", "\n", "\t", "outDir_", ",", "theme_", ",", 
     "config_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"longDir", "=", 
        RowBox[{"ExpandFileName", "@", "dir"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", " ", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"lb", "=", 
        RowBox[{"OptionValue", "[", "\"\<LastBuild\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", "fname", ",", "\n", "\t\t\t", "cname", ",", "\n", "\t\t\t", 
       "path", ",", "\n", "\t\t\t", "fout", ",", "\n", "\t\t\t", "conf", ",", 
       "\n", "\t\t\t", "mod"}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Block", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t\t", 
         RowBox[{"genfile", ",", "\n", "\t\t\t\t", "outfile"}], "\n", 
         "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"TrueQ", "@", 
            RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", 
           "Monitor", ",", " ", 
           RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"With", "[", "\n", "\t\t\t\t", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"f", "=", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", "\n", 
               "\t\t\t\t", 
               RowBox[{"Function", "[", "\n", "\t\t\t\t\t", 
                RowBox[{"Null", ",", "\n", "\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"mod", "=", "\n", "\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"DateObjectQ", "@", 
                    RowBox[{"conf", "[", "\"\<Modified\>\"", "]"}]}], ",", 
                    " ", "\n", "\t\t\t\t\t\t\t", 
                    RowBox[{"conf", "[", "\"\<Modified\>\"", "]"}], ",", " ", 
                    "\n", "\t\t\t\t\t\t\t", 
                    RowBox[{"FileDate", "[", 
                    RowBox[{"f", ",", " ", "\"\<Modification\>\""}], "]"}]}], 
                    "\n", "\t\t\t\t\t\t\t", "]"}]}], ";", "\n", "\t\t\t\t\t", 
                  
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"!", 
                    RowBox[{"DateObjectQ", "@", "lb"}]}], "||", 
                    RowBox[{"mod", "\[GreaterEqual]", "lb"}]}], ",", "\n", 
                    "\t\t\t\t\t\t", "#", ",", "\n", "\t\t\t\t\t\t", 
                    "Nothing"}], "\n", "\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                 "\t\t\t\t\t", "HoldAllComplete"}], "\n", "\t\t\t\t\t", 
                "]"}]}], "\n", "\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t", 
             RowBox[{"CompoundExpression", "[", "\n", "\t\t\t\t\t", 
              RowBox[{
               RowBox[{"fname", "=", "\n", "\t\t\t\t\t\t", 
                RowBox[{"(*", " ", 
                 RowBox[{
                 "In", " ", "case", " ", "the", " ", "file", " ", "had", " ", 
                  "a", " ", "path", " ", "already"}], " ", "*)"}], "\n", 
                "\t\t\t\t\t\t", 
                RowBox[{"ExpandFileName", "@", "\n", "\t", "\t\t\t\t\t\t", 
                 RowBox[{"Replace", "[", 
                  RowBox[{"#", ",", 
                   RowBox[{
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}], 
                    "\[RuleDelayed]", 
                    RowBox[{"First", "[", "#", "]"}]}]}], "]"}]}]}], ",", 
               "\n", "\t\t\t\t\t", 
               RowBox[{"cname", "=", 
                RowBox[{"webSitePrepContentName", "[", 
                 RowBox[{"fname", ",", " ", "dir"}], "]"}]}], ",", "\n", 
               "\t\t\t\t\t", 
               RowBox[{"path", "=", "\n", "\t\t\t\t\t\t", 
                RowBox[{"(*", " ", 
                 RowBox[{
                  RowBox[{"Use", " ", "path", " ", "if", " ", "provided"}], 
                  ",", " ", 
                  RowBox[{"else", " ", 
                   RowBox[{"base", ".", "html"}]}]}], " ", "*)"}], "\n", "\t",
                 "\t\t\t\t\t", 
                RowBox[{"Flatten", "@", 
                 RowBox[{"List", "@", "\n", "\t", "\t\t\t\t\t\t", 
                  RowBox[{"Replace", "[", 
                   RowBox[{"#", ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", 
                    RowBox[{"{", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}], 
                    "\[RuleDelayed]", 
                    RowBox[{"Last", "[", "#", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"_", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildGetTemplates", "[", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "ExpandFileName", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Replace", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}], 
                    "\[RuleDelayed]", 
                    RowBox[{"First", "[", "#", "]"}]}]}], "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "longDir"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", 
                   "]"}]}]}]}], ",", "\n", "\t\t\t\t\t", 
               RowBox[{"fout", "=", "\n", "\t\t\t\t\t\t", 
                RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Fold", "[", "\n", "\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{"#", ",", " ", "#2", ",", " ", 
                    RowBox[{"<|", "|>"}]}], "]"}], "&"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t", "$WebSiteBuildContentStack", ",", 
                    "\n", "\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", 
                    RowBox[{
                    "fname", ",", " ", "\"\<Attributes\>\"", ",", " ", 
                    "\"\<URL\>\""}], "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}],
                   ",", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{"u_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Flatten", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"outDir", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"URLParse", "[", 
                    RowBox[{"u", ",", " ", "\"\<Path\>\""}], "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}]}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"_", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildAttachExtension", "@", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"outDir", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildSlug", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "Lookup", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    "$WebSiteBuildContentStack", ",", " ", "cname", ",", " ", 
                    
                    RowBox[{"<|", "|>"}]}], "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "\"\<Attributes\>\"", ",",
                     "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "|>"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "\"\<FilePath\>\"", ",", 
                    "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"WebSiteBuildFilePath", "[", 
                    RowBox[{"cname", ",", " ", "outDir"}], "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}]}]}]}], "\n", 
                   "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", 
                 "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"genfile", "=", "fname"}], ";", "\n", "\t\t\t\t\t\t", 
                
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"!", 
                   RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "fout"}]}]}], ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t", 
                  RowBox[{"CreateDirectory", "@", 
                   RowBox[{"DirectoryName", "@", "fout"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{"conf", "=", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"config", ",", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<URL\>\"", "\[Rule]", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"fout", ",", " ", 
                    RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}]}], 
                   "\n", "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t", "Last"}], "\n", "\t\t\t\t\t\t\t\t", 
                 "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
               "WebSiteSetContentAttributes", "[", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"fname", ",", "\n", "\t\t\t\t\t\t\t", 
                 RowBox[{"\"\<URL\>\"", "->", 
                  RowBox[{"conf", "[", "\"\<URL\>\"", "]"}]}]}], "\n", 
                "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{
                "genfile", ",", "\n", "\t\t\t\t\t\t\t", "fout", ",", "\n", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], 
                   ",", "longDir"}], "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
                 "fname", ",", "\n", "\t\t\t\t\t\t\t", "path", ",", "\n", 
                 "\t\t\t\t\t\t\t", "conf"}], "\n", "\t\t\t\t\t\t\t", "]"}], 
               ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"outfile", "=."}], ";"}]}], "\n", "\t\t\t\t\t\t", 
              "]"}]}], "&"}], "/@", "files"}], ",", "\n", "\t\t\t\t", 
          RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"TemplateApply", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"\"\<Exporting ``\>\"", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
             "{", "\n", "\t\t\t\t\t\t\t", "genfile", "\n", "\t\t\t\t\t\t\t", 
              "}"}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t", 
         "]"}]}], "\n", "\t\t\t", "]"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"4714ac49-2708-42f0-bc76-5472c29420c7"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateSearchPage\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"6d579557-8e44-4831-8c2b-ba126903325e"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteGenerateSearchIndex\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"ad4746c8-d889-4473-96a0-e957eaa34944"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteGenerateSearchIndex", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "config_"}], 
   "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"contentData", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{"Values", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
         "\t\t\t\t\t", "\"\<Attributes\>\""}], "\n", "\t\t\t\t\t", "]"}]}], 
      ",", "\n", "\t\t\t", "siteIndexedContent", ",", "\n", "\t\t\t", 
      "selector", ",", "\n", "\t\t\t", "pagesForReal"}], "\n", "\t\t\t", 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"siteIndexedContent", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Except", "[", 
          RowBox[{"{", "__String", "}"}], "]"}], "\[RuleDelayed]", 
         RowBox[{"{", "\"\<Articles\>\"", "}"}]}], "\n", "\t\t\t\t", "]"}], 
       "@", 
       RowBox[{"config", "[", "\"\<SearchedPages\>\"", "]"}]}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"selector", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"Evaluate", "[", "\n", "\t\t\t\t", 
         RowBox[{"holdMemQ", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"#", "[", "\"\<Templates\>\"", "]"}], ",", " ", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"Alternatives", "@@", "\n", "\t\t\t\t\t", 
            RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
             RowBox[{"siteIndexedContent", ",", " ", "\n", "\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                "\"\<Articles\>\"", "\[Rule]", "\"\<article.html\>\""}], ",", 
                "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"\"\<Pages\>\"", "\[Rule]", "\"\<page.html\>\""}], 
                ",", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"\"\<Images\>\"", "|", "\"\<Themes\>\""}], ":>", 
                 "Nothing"}], ",", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"s_String", "\[RuleDelayed]", 
                 RowBox[{
                  RowBox[{"StringTrim", "[", 
                   RowBox[{"s", ",", " ", "\"\<.html\>\""}], "]"}], "<>", 
                  "\"\<.html\>\""}]}]}], "\n", "\t\t\t\t\t\t\t", "}"}], ",", 
              "\n", "\t\t\t\t\t\t", "1"}], "\n", "\t\t\t\t\t\t", "]"}]}]}], 
          "\n", "\t\t\t\t\t", "]"}], "\n", "\t\t\t\t", "]"}], "&"}], "/.", 
       RowBox[{"holdMemQ", "\[Rule]", "MemberQ"}]}]}], ";", "\n", "\t\t", 
     RowBox[{"contentData", "=", "\n", "\t\t\t", 
      RowBox[{"Map", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"AssociationThread", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
            "\"\<title\>\"", ",", " ", "\"\<text\>\"", ",", " ", 
             "\"\<tags\>\"", ",", " ", "\"\<url\>\"", ",", " ", 
             "\"\<note\>\""}], "}"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{
              "#", ",", " ", "\"\<Title\>\"", ",", " ", "\"\<Untitled\>\""}], 
              "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"ImportString", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{
                "#", ",", " ", "\"\<Content\>\"", ",", " ", 
                 "\"\<<p>No content...</p>\>\""}], "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t", "\"\<HTML\>\""}], "\n", "\t\t\t\t\t\t\t", 
              "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"StringRiffle", "[", 
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<Tags\>\"", ",", " ", 
                RowBox[{"{", "}"}]}], "]"}], "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Lookup", "[", 
              RowBox[{
              "#", ",", " ", "\"\<URL\>\"", ",", " ", 
               "\"\<??_y_dough_??.html\>\""}], "]"}], ",", "\n", 
             "\t\t\t\t\t\t", "\"\<\>\""}], 
            RowBox[{"(*", 
             RowBox[{"Lookup", "[", 
              RowBox[{
              "#", ",", " ", "\"\<Summary\>\"", ",", " ", 
               "\"\<No summary...\>\""}], "]"}], "*)"}], "\n", "\t\t\t\t\t\t",
             "}"}]}], "\n", "\t\t\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"Select", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"contentData", ",", "\n", "\t\t\t\t\t", "selector"}], "\n", 
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"Export", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{
         "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", ",",
           " ", "\"\<search_index.json\>\""}], "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"<|", 
        RowBox[{"\"\<pages\>\"", "\[Rule]", 
         RowBox[{"Replace", "[", 
          RowBox[{"contentData", ",", " ", 
           RowBox[{
            RowBox[{"Except", "[", 
             RowBox[{"{", "__Association", "}"}], "]"}], "->", 
            RowBox[{"{", "}"}]}]}], "]"}]}], "|>"}]}], "\n", "\t\t\t", 
      "]"}]}]}], " ", "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"9edf5e2f-3cc1-4579-8a73-4ab78d56ff77"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteGenerateSearchConfig\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"645721fd-5777-485f-a033-b504d08d81d2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteTipueSearchOptions", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<ContextBuffer\>\"", "\[Rule]", "60"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ContextLength\>\"", "\[Rule]", "60"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ContextStart\>\"", "\[Rule]", "90"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Debug\>\"", "\[Rule]", "False"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<DescriptiveWords\>\"", "\[Rule]", "25"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<FooterPages\>\"", "\[Rule]", "3"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<HighlightTerms\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ImageZoom\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<MinimumLength\>\"", "\[Rule]", "3"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<NewWindow\>\"", "\[Rule]", "False"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Show\>\"", "\[Rule]", "10"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowContext\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowRelated\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowTime\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowTitleCount\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowURL\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<WholeWords\>\"", "\[Rule]", "False"}]}], "\n", "\t\t", 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"ac68ad27-bd7e-4ce2-8afa-b9f7f6c97fde"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteGenerateSearchConfig", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "config_"}], 
   "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "stopWords", ",", "\n", "\t\t\t", "reps", ",", "\n", "\t\t\t", "weights",
       ",", "\n", "\t\t\t", "stems", ",", "\n", "\t\t\t", "includes", ",", 
      "\n", "\t\t\t", "related", ",", "\n", "\t\t\t", "ops"}], "\n", "\t\t\t",
      "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"stopWords", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<Stopwords\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"DeleteDuplicates", "@", 
            RowBox[{"ToLowerCase", "@", 
             RowBox[{"WordList", "[", "\"\<Stopwords\>\"", "]"}]}]}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"e", ":", 
            RowBox[{"{", "__String", "}"}]}], ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"DeleteDuplicates", "@", 
            RowBox[{"ToLowerCase", "@", "e"}]}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"reps", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<Replacements\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<word\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<replace_with\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"weights", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<URLWeights\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_Integer"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<url\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<score\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"stems", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<WordStems\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<word\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<stem\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"includes", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<IncludedTerms\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<search\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<related\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<include\>\"", "\[Rule]", "1"}]}], "}"}], "&"}], 
             ",", "\n", "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", 
            "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"related", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<RelatedTerms\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<search\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<related\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"related", "=", "\n", "\t\t\t", 
      RowBox[{"Which", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"ListQ", "@", "related"}], "&&", 
         RowBox[{"ListQ", "@", "includes"}]}], ",", "\n", "\t", "\t\t\t\t", 
        RowBox[{"DeleteDuplicates", "@", 
         RowBox[{"Join", "[", 
          RowBox[{"includes", ",", " ", "related"}], "]"}]}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"ListQ", "@", "related"}], ",", "\n", "\t\t\t\t\t", 
        RowBox[{"DeleteDuplicates", "@", "related"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"ListQ", "@", "includes"}], ",", "\n", "\t\t\t\t\t", 
        RowBox[{"DeleteDuplicates", "@", "includes"}], ",", "\n", "\t\t\t\t", 
        "True", ",", "\n", "\t\t\t\t\t", "None"}], "\n", "\t\t\t\t", "]"}]}], 
     ";", "\n", "\t\t", 
     RowBox[{"ops", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", 
       RowBox[{
        RowBox[{"config", "[", "\"\<Options\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"ToLowerCase", "@", 
                 RowBox[{"StringTake", "[", 
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], 
                "<>", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"StringDrop", "[", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], "->", 
               RowBox[{"#", "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "&"}], ",", "\n", 
             "\t\t\t\t\t\t\t", "$WebSiteTipueSearchOptions"}], "\n", 
            "\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"o", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_"}], ")"}], ".."}], "}"}]}], ":>",
            "\n", "\t\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"ToLowerCase", "@", 
                 RowBox[{"StringTake", "[", 
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], 
                "<>", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"StringDrop", "[", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], "->", 
               RowBox[{"#", "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "&"}], ",", "\n", 
             "\t\t\t\t\t\t\t", "o"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"<|", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"\"\<StopWords\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "stopWords"}], ",", "\n", "\t", "\t\t\t\t\t", 
          
          RowBox[{"Export", "[", "\n", "\t", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stopwords.json\>\""}], "}"}]}], ",", 
            "\n", "\t", "\t\t\t\t\t\t", "stopWords"}], "\n", "\t", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_stopwords.json\>\""}], "}"}]}]}], ",", 
          "\n", "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", 
          "\n", "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stopwords.json\>\""}], "}"}]}], ",", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
         "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<Replacements\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "reps"}], ",", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_replacements.json\>\""}], "}"}]}], ",", 
            "\n", "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "->", "reps"}], "}"}]}], "\n", 
           "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", "\n", "\t\t\t\t\t\t", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_replacements.json\>\""}], "}"}]}]}], ",", 
          "\n", "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", 
          "\n", "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_replacements.json\>\""}], "}"}]}], ",", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "->", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<URLWeights\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "weights"}], ",", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_weights.json\>\""}], "}"}]}], ",", "\n",
             "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<weight\>\"", "\[Rule]", "weights"}], "}"}]}], "\n", 
           "\t", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_weights.json\>\""}], "}"}]}]}], ",", "\n",
           "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n",
           "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_weights.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<weight\>\"", "->", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<WordStems\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "stems"}], ",", "\n", "\t", "\t", "\t\t\t\t", 
          
          RowBox[{"Export", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stems.json\>\""}], "}"}]}], ",", "\n", 
            "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "\[Rule]", "stems"}], "}"}]}], "\n", 
           "\t", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_stems.json\>\""}], "}"}]}]}], ",", "\n", 
          "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stems.json\>\""}], "}"}]}], ",", "\n", 
            "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "\[Rule]", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<RelatedTerms\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "related"}], ",", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_related.json\>\""}], "}"}]}], ",", "\n",
             "\t", "\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<Related\>\"", "\[Rule]", "related"}], "}"}]}], "\n",
            "\t", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_related.json\>\""}], "}"}]}]}], ",", "\n",
           "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n",
           "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_related.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<Related\>\"", "->", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         " ", "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<Options\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "ops"}], ",", "\n", "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_options.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", "ops"}], "\n", "\t\t\t\t\t\t\t", "]"}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_options.json\>\""}], "}"}]}]}], ",", "\n",
           "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n",
           "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_options.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", 
            RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], " ", "\n", 
         "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "|>"}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"6bdd1941-2619-4c6c-a414-e056f9eb83ff"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateSearchPage\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"58c04a96-8781-4bd6-9eab-2e47bc3a8ba0"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateSearchPage", "]"}], "=", "\n", 
   "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<SearchPageOptions\>\"", "\[Rule]", 
      RowBox[{"{", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"\"\<SearchedPages\>\"", "\[Rule]", 
         RowBox[{"{", "\"\<Articles\>\"", "}"}]}], ",", "\n", "\t\t\t", 
        RowBox[{"\"\<Stopwords\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<Replacements\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<URLWeights\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<WordStems\>\"", "\[Rule]", "None"}], ",", "\n", "\t\t\t", 
        RowBox[{"\"\<IncludedTerms\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<RelatedTerms\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{
        "\"\<Options\>\"", "\[Rule]", "$WebSiteTipueSearchOptions"}]}], "\n", 
       "\t\t\t", "}"}]}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteGenerateSearchPage", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "theme_", ",", 
    "\n", "\t", "config_", ",", " ", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"searchOps", "=", "\n", "\t\t\t\t", 
       RowBox[{"Association", "@", "\n", "\t\t\t\t\t", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<SearchPageOptions\>\"", "]"}], ",",
           "\n", "\t", "\t", "\t", "\t\t\t", 
          RowBox[{
           RowBox[{"Except", "[", 
            RowBox[{"_", "?", "OptionQ"}], "]"}], "\[RuleDelayed]", 
           RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], ",", "\n",
       "\t\t\t", 
      RowBox[{"thm", "=", "\n", "\t\t\t\t", 
       RowBox[{"WebSiteFindTheme", "[", 
        RowBox[{"dir", ",", " ", "theme", ",", " ", 
         RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}]}], 
     "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\""}], 
           "}"}]}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CreateDirectory", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\""}], 
           "}"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"CreateIntermediateDirectories", "\[Rule]", "True"}]}], "\n",
         "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"Prepend", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", 
           RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"Function", "[", 
           RowBox[{"Null", ",", " ", "\n", "\t", "\t", "\t", "\t\t\t", 
            RowBox[{"Monitor", "[", 
             RowBox[{"#", ",", " ", 
              RowBox[{
              "Internal`LoadingPanel", "@", 
               "\"\<Generating search config...\>\""}]}], "]"}], ",", " ", 
            "\n", "\t", "\t", "\t", "\t\t\t", "HoldFirst"}], "\n", "\t", "\t",
            "\t", "\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", 
          "Identity"}], "\n", "\t\t\t\t\t", "]"}], "@", 
        RowBox[{"iWebSiteGenerateSearchConfig", "[", 
         RowBox[{"dir", ",", " ", "outDir", ",", " ", "searchOps"}], "]"}]}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"\"\<Index\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"searchOps", "[", "\"\<SearchedPages\>\"", "]"}], "=!=", 
           "None"}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"TrueQ", "@", 
              RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
             "\t", "\t", "\t\t\t\t", 
             RowBox[{"Function", "[", 
              RowBox[{
              "Null", ",", " ", "\n", "\t", "\t", "\t", "\t", "\t\t\t", 
               RowBox[{"Monitor", "[", 
                RowBox[{"#", ",", " ", 
                 RowBox[{
                 "Internal`LoadingPanel", "@", 
                  "\"\<Generating search index...\>\""}]}], "]"}], ",", " ", 
               "\n", "\t", "\t", "\t", "\t", "\t\t\t", "HoldFirst"}], "\n", 
              "\t", "\t", "\t", "\t", "\t\t\t", "]"}], ",", "\n", "\t", "\t", 
             "\t", "\t", "\t\t", "Identity"}], "\n", "\t", "\t", "\t\t\t\t", 
            "]"}], "@", 
           RowBox[{"iWebSiteGenerateSearchIndex", "[", 
            RowBox[{"dir", ",", " ", "outDir", ",", " ", "searchOps"}], 
            "]"}]}], ",", "\n", "\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t", 
         "]"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", 
            "\"\<tipuesearch\>\""}], "}"}]}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CopyDirectory", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"PackageFilePath", "[", 
          RowBox[{
          "\"\<Resources\>\"", ",", " ", "\"\<Themes\>\"", ",", " ", 
           "\"\<template_lib\>\"", ",", " ", "\"\<tipuesearch\>\""}], "]"}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", 
            "\"\<tipuesearch\>\""}], "}"}]}]}], "\n", "\t\t\t\t", "]"}]}], 
      "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
        "\t\t\t\t\t", 
        RowBox[{"Function", "[", 
         RowBox[{"Null", ",", " ", "\n", "\t", "\t", "\t", "\t\t\t", 
          RowBox[{"Monitor", "[", 
           RowBox[{"#", ",", " ", 
            RowBox[{
            "Internal`LoadingPanel", "@", 
             "\"\<Generating search.html\>\""}]}], "]"}], ",", " ", "\n", 
          "\t\t\t\t\t\t", "HoldFirst"}], "\n", "\t", "\t", "\t", "\t\t\t", 
         "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", "Identity"}], "\n", 
       "\t\t\t\t\t", "]"}], "@", "\n", "\t\t\t", 
      RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t", 
       RowBox[{"\"\<search\>\"", ",", "\n", "\t", "\t\t\t", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"outDir", ",", " ", "\"\<search.html\>\""}], "}"}]}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], ",", 
          "\n", "\t\t\t\t\t", "dir"}], "\n", "\t\t\t\t\t", "}"}], ",", "\n", 
        "\t\t\t\t", "None", ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\"\<search.html\>\"", "}"}], ",", "\n", "\t\t\t\t", 
        "config"}], "\n", "\t", "\t\t\t", "]"}]}]}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"b454a146-f827-4914-9fc7-973e5726e337"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Logging\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"5bb7fd3f-9f66-42dc-90d8-d995d9291d0a"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildLogError\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"7f9c43cb-71c3-4870-b479-64fc22146c67"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildLogError", "[", 
   RowBox[{"file_", ",", " ", "key_", ",", " ", "body_"}], "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"KeyExistsQ", "[", 
      RowBox[{"$WebSiteBuildErrors", ",", " ", "file"}], "]"}]}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"$WebSiteBuildErrors", "[", "file", "]"}], "=", 
     RowBox[{"<|", 
      RowBox[{"key", "\[Rule]", "body"}], "|>"}]}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"$WebSiteBuildErrors", "[", 
      RowBox[{"file", ",", " ", "key"}], "]"}], "=", "body"}]}], "\n", "\t\t",
    "]"}]}]], \
"CodeInput",ExpressionUUID->"06f8f14f-8860-40a7-b24b-bd5f201bc66f"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Build\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7125377389844522`*^9, 3.712537740845558*^9}, 
   3.7125939399984217`*^9},ExpressionUUID->"13f3aada-54bd-4b37-85ea-\
dcf8cbdc384d"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteBuildGetFiles\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"86e50bd3-c0b0-48eb-ab43-8bdd305b54e4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteBuildGetFiles", "[", 
   RowBox[{
   "patt_", ",", " ", "dir_", ",", " ", "dirs_", ",", " ", "templates_"}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"temps", "=", "\n", "\t\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
       RowBox[{"templates", ",", "\n", "\t", "\t", "\t\t\t", 
        RowBox[{
         RowBox[{"Except", "[", 
          RowBox[{
           RowBox[{"_", "?", "AssociationQ"}], "|", 
           RowBox[{"_", "?", "OptionQ"}]}], "]"}], "->", "\n", "\t", "\t", 
         "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"\"\<posts\>\"", "\[Rule]", "\"\<article.html\>\""}], ",", 
           "\n", "\t", "\t", "\t", "\t", "\t\t\t", 
           RowBox[{"_", "\[Rule]", "\"\<page.html\>\""}]}], "\n", "\t", "\t", 
          "\t\t\t\t\t", "}"}]}]}], "\n", "\t", "\t", "\t\t\t", "]"}]}], "\n", 
     "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"Join", "@@", "\n", "\t\t\t", 
     RowBox[{"Map", "[", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"Thread", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNames", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{"patt", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<content\>\"", ",", " ", "#"}], 
              "}"}]}], ",", "\n", "\t\t\t\t\t\t", "\[Infinity]"}], "\n", 
           "\t\t\t\t\t\t", "]"}], "\[Rule]", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Function", "[", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"FileExtension", "[", "#", "]"}], "\[Equal]", 
               "\"\<\>\""}], ",", " ", 
              RowBox[{"#", "<>", "\"\<.html\>\""}], ",", " ", "#"}], "]"}], 
            "]"}], "@", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{"Lookup", "[", 
            RowBox[{"temps", ",", " ", "#", ",", " ", "\"\<page.html\>\""}], 
            "]"}]}]}], "\n", "\t\t\t\t\t", "]"}], "&"}], ",", "\n", 
       "\t\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
        RowBox[{"dirs", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
          RowBox[{"{", 
           RowBox[{"\"\<posts\>\"", ",", " ", "\"\<pages\>\""}], "}"}]}]}], 
        "\n", "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"894dfd4f-31b9-442e-a48f-d7114f77ddf5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteBuild\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"b334dcf7-ae72-4e73-b8d4-1a3744ad4b0d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "iWebSiteBuild", "]"}], "=", "\n", "\t", 
   RowBox[{
    RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", "\t\t", 
    RowBox[{"Join", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"\"\<GenerateContent\>\"", "\[Rule]", "True"}], ",", "\n", 
        "\t", "\t", "\t\t", 
        RowBox[{"\"\<GenerateIndex\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
        "\t", "\t", "\t", "\t", 
        RowBox[{"\"\<GenerateAggregations\>\"", "\[Rule]", "Automatic"}], ",",
         "\n", "\t\t\t\t", 
        RowBox[{"\"\<GenerateSearchPage\>\"", "\[Rule]", "False"}], ",", "\n",
         "\t\t\t\t", 
        RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"\"\<UseCache\>\"", "\[Rule]", "True"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "Automatic"}]}], "\n", 
       "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateContent", "]"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateIndex", "]"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateAggregations", "]"}], ",", "\n",
       "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateSearchPage", "]"}]}], "\n", 
     "\t\t\t", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"iWebSiteBuild", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", "\n", "\t", "outDir_", ",", "\n", "\t", "thm_", ",", "\n", 
     "\t", "fileNames_", ",", "\n", "\t", "conf_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteBuildTime", "=", "Now"}], ",", "\n", "\t\t\t", 
       RowBox[{"$WebSiteLastBuild", "=", 
        RowBox[{"OptionValue", "[", "\"\<LastBuild\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "may", " ", "get", " ", "overwritten", " ", "so", " ", "this", " ", 
         "is", " ", "a", " ", "safety", " ", "net"}], " ", "*)"}], "\n", 
       "\t\t\t", 
       RowBox[{"$Path", "=", "$Path"}], ",", "\n", "\t\t\t", 
       RowBox[{"$TemplatePath", "=", "$TemplatePath"}], ",", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"Template", " ", "lib", " ", "vars"}], " ", "*)"}], "\n", 
       "\t\t\t", 
       RowBox[{"Templating`$TemplateArguments", "=", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", "$templateLibLoaded", ",", 
       "\n", "\t\t\t", "Templating`lib`$$templateLib", ",", "\n", "\t\t\t", 
       "Templating`lib`$$", ",", "\n", "\t\t\t", "Templating`lib`$$libdir", 
       ",", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"The", " ", "stacks", " ", "to", " ", "populate"}], " ", 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{"$WebSiteBuildContentStack", "=", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", 
           RowBox[{"OptionValue", "[", "\"\<UseCache\>\"", "]"}]}], ",", "\n",
           "\t\t\t\t\t", 
          RowBox[{"WebSiteLoadCache", "[", "dir", "]"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"$WebSiteBuildContentDataStack", "=", "\n", "\t\t\t\t", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"$WebSiteBuildAggStack", "=", "\n", "\t\t\t\t", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "Template", " ", "cache", " ", "to", " ", "prevent", " ", 
         "reloading"}], " ", "*)"}], "\n", "\t\t\t", 
       RowBox[{"$WebSiteTemplateCache", "=", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", 
           RowBox[{"OptionValue", "[", "\"\<UseCache\>\"", "]"}]}], ",", "\n",
           "\t\t\t\t\t", 
          RowBox[{"WebSiteLoadTemplateCache", "[", "dir", "]"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"Build", " ", "flags"}], " ", "*)"}], "\n", "\t\t\t", 
       RowBox[{"genCont", "=", "\n", "\t\t\t\t", 
        RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"genAggs", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateAggregations\>\"", "]"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"genInd", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateIndex\>\"", "]"}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"genSP", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateSearchPage\>\"", "]"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"newconf", "=", "\n", "\t\t\t\t", 
        RowBox[{"KeyDrop", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"conf", ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Keys", "@", 
           RowBox[{"Options", "[", "iWebSiteBuild", "]"}]}]}], "\n", 
         "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
     
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"AnyTrue", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
           "genCont", ",", " ", "genAggs", ",", " ", "genInd", ",", " ", 
            "genSP"}], "}"}], ",", " ", "TrueQ"}], "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteExtractPageData", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"ExpandFileName", "@", "dir"}], ",", "\n", "\t\t\t\t\t", 
           "fileNames", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"ops", ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                "First"}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"Options", "[", "WebSiteExtractPageData", "]"}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";", "\n", 
         "\t\t\t\t", 
         RowBox[{"Export", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"WebSiteCachePath", "[", "dir", "]"}], ",", "\n", 
           "\t\t\t\t\t", "$WebSiteBuildContentStack"}], "\n", "\t\t\t\t\t", 
          "]"}], ";"}]}], "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"WebSiteContentStackPrep", "[", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genCont", ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteGenerateContent", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
          "dir", ",", "\n", "\t\t\t\t\t", "fileNames", ",", "\n", 
           "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", "thm", ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"Join", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"\"\<SiteDirectory\>\"", "\[Rule]", "dir"}], ",", "\n",
                "\t\t\t\t\t\t\t", 
               RowBox[{"\"\<OutputDirectory\>\"", "\[Rule]", "outDir"}]}], 
              "\n", "\t\t\t\t\t\t\t", "|>"}], ",", "\n", "\t\t\t\t\t\t", 
             "newconf"}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"OptionQ", "@", 
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<PageSize\>\"", "->", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}], 
                    ",", " ", "\"\<Content\>\"", ",", " ", "0"}], "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", "Nothing"}], 
                   "\n", "\t", "\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                  "\t\t\t\t\t\t\t\t", "ops", ",", "\n", "\t", 
                  "\t\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                "First"}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"Options", "[", "WebSiteGenerateContent", "]"}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";", "\n", 
         "\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"FileExistsQ", "@", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<BuildInfo.m\>\""}], "}"}]}]}], 
           ",", "\n", "\t\t\t\t\t", 
           RowBox[{"DeleteFile", "@", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<BuildInfo.m\>\""}], "}"}]}]}]}], 
          "\n", "\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t", 
         RowBox[{"Export", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"dir", ",", " ", "\"\<BuildInfo.wl\>\""}], "}"}]}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "Now"}], "\n", 
            "\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", 
       "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genAggs", ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteGenerateAggregationPages", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
          "dir", ",", "\n", "\t\t\t\t\t", "Automatic", ",", "\n", 
           "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", "thm", ",", "\n", 
           "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"OptionQ", "@", 
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<PageSize\>\"", "->", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}], 
                    ",", " ", "\"\<Aggregations\>\"", ",", " ", "0"}], 
                    "]"}]}], ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    "Nothing"}], "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", "]"}], 
                  ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", "ops", ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", "First"}], "\n", "\t", "\t\t\t\t\t\t\t", 
               "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
             "Options", "[", "WebSiteGenerateAggregationPages", "]"}]}], "\n",
             "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";"}]}], 
       "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genInd", ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteGenerateIndexPages", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
          "dir", ",", "\n", "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", 
           "thm", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"OptionQ", "@", 
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<PageSize\>\"", "->", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}], 
                    ",", " ", "\"\<Index\>\"", ",", " ", "0"}], "]"}]}], ",", 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", "Nothing"}], "\n", 
                   "\t", "\t", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                  "\t", "\t\t\t\t\t\t\t", "ops", ",", "\n", "\t", "\t", 
                  "\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", "First"}], "\n", "\t", "\t\t\t\t\t\t\t", 
               "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Options", "[", "WebSiteGenerateIndexPages", "]"}]}], 
            "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";"}]}],
        "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genSP", ",", "\n", "\t\t\t\t", 
        RowBox[{"WebSiteGenerateSearchPage", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "dir", ",", "\n", "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", 
          "thm", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
          
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"{", "ops", "}"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Options", "[", "WebSiteGenerateSearchPage", "]"}]}], 
           "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
       "\t\t\t\t", "]"}], ";"}]}], "\n", "\t\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"b207c801-bd72-4899-b5b1-0589f6d9b138"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuild\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"efcc99dd-2e70-4bc7-bff1-082222b15964"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "ndcnt"}], "=", 
   "\"\<Can't generate `` without generating content first\>\""}], 
  ";"}]], "CodeInput",
 CellChangeTimes->{{3.7126662241888113`*^9, 3.7126662455222607`*^9}, {
  3.712680873415894*^9, 3.712680889884789*^9}, {3.721060951339415*^9, 
  3.721060954133233*^9}},ExpressionUUID->"8fec229b-371a-4eed-8c64-\
175399f9a3df"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteBuild", "]"}], "=", "\n", "\t", 
   RowBox[{"Join", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Options", "[", "iWebSiteBuild", "]"}], ",", "\n", "\t", "\t", 
     RowBox[{"{", "\n", "\t", "\t\t", 
      RowBox[{
       RowBox[{"\"\<CopyContent\>\"", "\[Rule]", "True"}], ",", "\n", "\t", 
       "\t", "\t", 
       RowBox[{"\"\<CopyTheme\>\"", "\[Rule]", "True"}], ",", "\n", "\t", 
       "\t", "\t", 
       RowBox[{"\"\<ConfigurationOptions\>\"", "\[Rule]", "Automatic"}], ",", 
       "\n", "\t", "\t", "\t", 
       RowBox[{"\"\<ConfigurationFile\>\"", "\[Rule]", "Automatic"}], ",", 
       "\n", "\t", "\t", "\t", 
       RowBox[{"\"\<OutputDirectory\>\"", "\[Rule]", "Automatic"}], ",", "\n",
        "\t", "\t", "\t", 
       RowBox[{"\"\<DefaultTheme\>\"", "->", "\"\<minimal\>\""}], ",", "\n", 
       "\t", "\t", "\t", 
       RowBox[{"\"\<AutoDeploy\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
       "\t", "\t", "\t", 
       RowBox[{"\"\<DeployOptions\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
       "\t", "\t", "\t", 
       RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "Automatic"}], ",", "\n", "\t",
        "\t", "\t", 
       RowBox[{"\"\<ContentDirectories\>\"", "\[Rule]", "Automatic"}], ",", 
       "\n", "\t", "\t", "\t", 
       RowBox[{"\"\<ContentDirectoryTemplates\>\"", "\[Rule]", "Automatic"}], 
       ",", "\n", "\t", "\t\t", 
       RowBox[{"\"\<ContentTypes\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
         "\"\<*.html\>\"", ",", " ", "\"\<*.md\>\"", ",", " ", 
          "\"\<*.xml\>\""}], "}"}]}], ",", "\n", "\t", "\t\t", 
       RowBox[{"\"\<UseCache\>\"", "\[Rule]", "True"}]}], "\n", "\t", "\t\t", 
      "}"}]}], "\n", "\t", "\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     RowBox[{"files", ":", "\n", "\t\t", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"_String", "?", "FileExistsQ"}], "|", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"_String", "?", "FileExistsQ"}], ")"}], "\[Rule]", 
             "_List"}], ")"}]}], ")"}], ".."}], "}"}], "|", "\n", "\t", 
       "\t\t", 
       RowBox[{"s_", "?", 
        RowBox[{"(", "StringPattern`StringPatternQ", ")"}]}], "|", 
       "Automatic"}], ":", "Automatic"}], ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
      "outDir", ",", "\n", "\t\t\t", "fileNames", ",", "\n", "\t\t\t", 
       "config", ",", "\n", "\t\t\t", "confOps", ",", "\n", "\t\t\t", 
       "buildOps", ",", "\n", "\t\t\t", "res"}], "\n", "\t\t\t", "}"}], ",", 
     "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WebSiteBuildErrors", "=", 
       RowBox[{"<|", "|>"}]}], ";", "\n", "\t\t", 
      RowBox[{"config", "=", "\n", "\t\t\t", 
       RowBox[{"Join", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Replace", "[", 
            RowBox[{
             RowBox[{"OptionValue", "[", "\"\<ConfigurationFile\>\"", "]"}], 
             ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{
                RowBox[{"fname_String", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"FileExistsQ", "[", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"dir", ",", " ", "#"}], "}"}]}], "]"}], "&"}], 
                  ")"}]}], ":>", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"FileNameJoin", "@", 
                 RowBox[{"{", 
                  RowBox[{"dir", ",", " ", "fname"}], "}"}]}]}], ",", "\n", 
               "\t", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Except", "[", 
                 RowBox[{"_String", "?", "FileExistsQ"}], "]"}], 
                "\[RuleDelayed]", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"FileExistsQ", "@", 
                   RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"dir", ",", "\"\<SiteConfig.m\>\""}], "}"}]}]}], 
                  ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"dir", ",", "\"\<SiteConfig.m\>\""}], "}"}]}], 
                  ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"dir", ",", "\"\<SiteConfig.wl\>\""}], "}"}]}]}], 
                 "\n", "\t", "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t", 
              "\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
            "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"f_String", "?", "FileExistsQ"}], ":>", "\n", "\t", 
              "\t", "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{
                RowBox[{"Import", "[", "f", "]"}], ",", " ", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"o_", "?", "OptionQ"}], "\[RuleDelayed]", 
                   RowBox[{"Association", "[", "o", "]"}]}], ",", 
                  RowBox[{"_", "\[Rule]", 
                   RowBox[{"<|", "|>"}]}]}], "}"}]}], "]"}]}], ",", "\n", 
             "\t\t\t\t\t\t\t", 
             RowBox[{"_", "\[Rule]", 
              RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t\t\t\t", "}"}]}], "]"}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{
           RowBox[{"Normal", "@", 
            RowBox[{
            "OptionValue", "[", "\"\<ConfigurationOptions\>\"", "]"}]}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"o_", "?", "OptionQ"}], "\[RuleDelayed]", 
              RowBox[{"Association", "@", "o"}]}], ",", "\n", "\t\t\t\t\t\t", 
             
             RowBox[{"_", "\[Rule]", 
              RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t\t\t\t", "}"}]}], "\n", 
          "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"confOps", "=", "\n", "\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"config", ",", " ", "\"\<BuildOptions\>\"", ",", " ", 
         RowBox[{"{", "}"}]}], "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"outDir", "=", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Lookup", "[", 
          RowBox[{
          "confOps", ",", " ", "\n", "\t\t\t\t\t", "\"\<OutputDirectory\>\"", 
           ",", " ", "\n", "\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<OutputDirectory\>\"", "]"}]}], 
          "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<output\>\""}], "}"}]}]}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"p_String", "?", 
             RowBox[{"(", 
              RowBox[{"Not", "@*", "DirectoryQ"}], ")"}]}], ":>", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "p"}], "}"}]}]}]}], "\n", "\t\t\t\t\t",
           "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"fileNames", "=", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{"files", ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"fpat_", "?", 
             RowBox[{"(", "StringPattern`StringPatternQ", ")"}]}], ":>", "\n",
             "\t\t\t\t\t\t", 
            RowBox[{"iWebSiteBuildGetFiles", "[", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
             "fpat", ",", "\n", "\t\t\t\t\t\t\t", "dir", ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectories\>\"", ",", " ", "\n", 
                "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectories\>\"", "]"}]}], 
               "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectoryTemplates\>\"", ",", " ", "\n", "\t", 
                "\t", "\t", "\t", "\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectoryTemplates\>\"", 
                 "]"}]}], "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", "]"}]}], 
             "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"Automatic", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", 
            RowBox[{"iWebSiteBuildGetFiles", "[", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Alternatives", "@@", 
               RowBox[{"OptionValue", "[", "\"\<ContentTypes\>\"", "]"}]}], 
              ",", "\n", "\t\t\t\t\t\t\t", "dir", ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectories\>\"", ",", " ", "\n", 
                "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectories\>\"", "]"}]}], 
               "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectoryTemplates\>\"", ",", " ", "\n", "\t", 
                "\t", "\t", "\t", "\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectoryTemplates\>\"", 
                 "]"}]}], "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", "]"}]}], 
             "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", "}"}]}], 
        "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"buildOps", "=", "\n", "\t\t\t", 
       RowBox[{"Merge", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
          "confOps", ",", "\n", "\t\t\t\t\t", "ops", ",", "\n", "\t\t\t\t\t", 
           
           RowBox[{
            RowBox[{"Replace", "[", 
             RowBox[{
              RowBox[{"Except", "[", 
               RowBox[{"_", "?", "OptionQ"}], "]"}], "\[Rule]", 
              RowBox[{"{", "}"}]}], "]"}], "@", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", 
                 RowBox[{"dir", ",", " ", "\"\<BuildInfo.wl\>\""}], "}"}]}], 
               ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", 
               RowBox[{"{", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"f_String", "?", "FileExistsQ"}], ":>", "\n", "\t", 
                  "\t", "\t", "\t", "\t\t\t\t\t\t", 
                  RowBox[{"Import", "[", "f", "]"}]}], ",", "\n", "\t", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"_String", ":>", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                  "Replace", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"dir", ",", " ", "\"\<BuildInfo.m\>\""}], "}"}]}],
                     ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t", 
                    RowBox[{
                    "{", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"f_String", "?", "FileExistsQ"}], ":>", "\n", 
                    "\t", "\t", "\t", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t", 
                    
                    RowBox[{"Import", "[", "f", "]"}]}], "\n", "\t", "\t", 
                    "\t", "\t", "\t", "\t\t\t\t\t\t\t", "}"}]}], "\n", "\t", 
                   "\t", "\t", "\t", "\t", "\t\t\t\t\t\t", "]"}]}]}], "\n", 
                "\t", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t", 
              "\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"Normal", "@", "config"}]}], "\n", "\t\t\t\t\t", "}"}], 
         ",", "\n", "\t\t\t\t", "First"}], "\n", "\t\t\t\t", "]"}]}], ";", 
      "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"DirectoryQ", "[", "outDir", "]"}]}], ",", "\n", "\t\t\t", 
        RowBox[{"CreateDirectory", "@", "outDir"}]}], "\n", "\t\t\t", "]"}], 
      ";", "\n", "\t\t", 
      RowBox[{"If", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{
         "confOps", ",", " ", "\n", "\t\t\t\t", "\"\<CopyTheme\>\"", ",", " ",
           "\n", "\t\t\t\t", 
          RowBox[{"OptionValue", "[", "\"\<CopyTheme\>\"", "]"}]}], "\n", 
         "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
        RowBox[{"WebSiteCopyTheme", "[", "\n", "\t\t\t\t", 
         RowBox[{
         "dir", ",", "\n", "\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t", 
          RowBox[{"Lookup", "[", 
           RowBox[{
           "config", ",", " ", "\"\<Theme\>\"", ",", " ", "\n", "\t\t\t\t\t", 
            
            RowBox[{"Lookup", "[", 
             RowBox[{"confOps", ",", " ", "\"\<Theme\>\"", ",", " ", 
              RowBox[{"OptionValue", "[", "\"\<DefaultTheme\>\"", "]"}]}], 
             "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"buildOps", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"Monitor", "\[Rule]", 
                  RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                "\t", "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
               "\t\t\t\t\t\t", "First"}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}],
             ",", "\n", "\t\t\t\t\t", 
            RowBox[{"Options", "[", "WebSiteCopyTheme", "]"}]}], "\n", 
           "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
       "]"}], ";", "\n", "\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{
         "confOps", ",", " ", "\n", "\t\t\t\t", "\"\<CopyContent\>\"", ",", 
          " ", "\n", "\t\t\t\t", 
          RowBox[{"OptionValue", "[", "\"\<CopyContent\>\"", "]"}]}], "\n", 
         "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"p", ":", 
           RowBox[{"Except", "[", 
            RowBox[{"False", "|", "None"}], "]"}]}], ":>", "\n", "\t\t\t\t\t", 
          RowBox[{"WebSiteCopyContent", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
           "dir", ",", "\n", "\t\t\t\t\t\t", "outDir", ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"Replace", "[", 
             RowBox[{"p", ",", " ", 
              RowBox[{"True", "->", "Automatic"}]}], "]"}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"buildOps", ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"Monitor", "\[Rule]", 
                    RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                  "\t", "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                 "\t\t\t\t\t\t\t\t", "First"}], "\n", "\t", 
                "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Options", "[", "WebSiteCopyContent", "]"}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", 
         "\t\t\t\t", "}"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"iWebSiteBuild", "[", "\n", "\t\t\t", 
       RowBox[{"dir", ",", "\n", "\t\t\t", "outDir", ",", "\n", "\t\t\t", 
        RowBox[{"Lookup", "[", 
         RowBox[{
         "config", ",", "\n", "\t\t\t\t", "\"\<Theme\>\"", ",", "\n", 
          "\t\t\t\t", 
          RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
           "confOps", ",", "\n", "\t\t\t\t\t", "\"\<DefaultTheme\>\"", ",", 
            " ", "\n", "\t", "\t\t\t\t", 
            RowBox[{"OptionValue", "[", "\"\<DefaultTheme\>\"", "]"}]}], "\n",
            "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", 
        "\t\t\t", "fileNames", ",", "\n", "\t\t\t", "config", ",", "\n", 
        "\t\t\t", 
        RowBox[{"FilterRules", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Normal", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
              "confOps", ",", "\n", "\t\t\t\t\t\t\t", "config", ",", "\n", 
               "\t\t\t\t\t\t\t", "buildOps"}], "\n", "\t\t\t\t\t\t\t", "}"}], 
             ",", "\n", "\t\t\t\t\t\t", "First"}], "\n", "\t\t\t\t\t\t", 
            "]"}]}], ",", " ", "\n", "\t\t\t\t", 
          RowBox[{"Options", "@", "iWebSiteBuild"}]}], "\n", "\t\t\t\t", 
         "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"res", "=", "\n", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"TrueQ", "[", 
           RowBox[{"OptionValue", "[", "\"\<AutoDeploy\>\"", "]"}], "]"}], "||",
           "\n", "\t", "\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"OptionValue", "[", "\"\<AutoDeploy\>\"", "]"}], "===", 
            "Automatic"}], "&&", "\n", "\t", "\t\t\t\t", 
           RowBox[{"OptionQ", "@", 
            RowBox[{"OptionValue", "[", "\"\<DeployOptions\>\"", "]"}]}]}]}], 
         ",", "\n", "\t", "\t\t\t", 
         RowBox[{"WebSiteDeploy", "[", "\n", "\t", "\t\t\t\t", 
          RowBox[{"outDir", ",", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"config", ",", " ", "\"\<SiteURL\>\""}], "]"}], ",", 
             "\n", "\t", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", "\t", 
              "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{
                RowBox[{"FileBaseName", "[", "dir", "]"}], ",", "\n", "\t", 
                "\t", "\t\t\t\t\t\t", 
                RowBox[{
                "\"\<output\>\"", ":>", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"FileBaseName", "@", 
                  RowBox[{"DirectoryName", "[", "dir", "]"}]}]}]}], "\n", 
               "\t", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t", "\t\t\t\t\t", 
            "]"}], ",", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"OptionValue", "[", "\"\<DeployOptions\>\"", "]"}], 
               ",", "\n", "\t", "\t\t\t\t\t\t", 
               RowBox[{"Automatic", ":>", 
                RowBox[{"Lookup", "[", 
                 RowBox[{"config", ",", "\"\<DeployOptions\>\"", ",", 
                  RowBox[{"{", "}"}]}], "]"}]}]}], "\n", "\t", "\t\t\t\t\t\t",
               "]"}], ",", "\n", "\t", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Except", "[", 
               RowBox[{"_", "?", "OptionQ"}], "]"}], "\[Rule]", 
              RowBox[{"{", "}"}]}]}], "\n", "\t", "\t\t\t\t\t", "]"}]}], "\n",
           "\t", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "outDir"}], "\n", 
        "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "$WebSiteBuildErrors"}], ">", "0"}], ",", 
        "\n", "\t\t\t", 
        RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t\t", 
         RowBox[{
         "\"\<SiteBuilder\>\"", ",", "\n", "\t\t\t\t", 
          "\"\<WebSiteBuild encountered errors. Check \
$WebSiteBuildErrors.\>\""}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}],
       ";", "\n", "\t\t", "res"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"9d4353a9-dbe4-477d-b228-d70bbae52773"]\

}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Deploy\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{3.7125834819945183`*^9, 
  3.712810362769059*^9},ExpressionUUID->"f25a9a34-f66a-4c32-82ff-\
5e90d838bf32"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteDeploy", "::", "depfail"}], "=", 
   "\"\<Failed to deploy `` to ``\>\""}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.721060958694581*^9, 
  3.7210609713153553`*^9}},ExpressionUUID->"4487f30e-1743-414b-94a6-\
0d7995dbe50c"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteDeploySelectFiles\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{
  3.720636070143309*^9, {3.720636183092206*^9, 
   3.720636185234379*^9}},ExpressionUUID->"f1992140-89e1-4e63-ad24-\
274de62d6c9d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteDeploySelectFiles", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", "\n", "\t", "last_", ",", "\n", "\t", "select_", ",", "\n", 
    "\t", "fileForms_", ",", "\n", "\t", "alwaysDeployForms_", ",", "\n", 
    "\t", "includes_"}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"Select", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"FileExistsQ", "[", "#", "]"}], "&&", "\n", "\t\t", 
      RowBox[{"!", 
       RowBox[{"DirectoryQ", "[", "#", "]"}]}], "&&", "\n", "\t\t\t", 
      RowBox[{"(", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"StringMatchQ", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"#", ",", "\n", "\t\t\t\t\t", "alwaysDeployForms"}], "\n", 
         "\t\t\t\t\t", "]"}], "||", "\n", "\t\t\t\t", 
        RowBox[{"StringMatchQ", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameTake", "[", "#", "]"}], ",", "\n", "\t\t\t\t\t", 
          "alwaysDeployForms"}], "\n", "\t\t\t\t\t", "]"}], "||", "\n", 
        "\t\t\t\t", 
        RowBox[{"!", 
         RowBox[{"DateObjectQ", "[", "last", "]"}]}], "||", "\n", "\t\t\t\t", 
        
        RowBox[{"Quiet", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"FileDate", "[", "#", "]"}], ">", "last"}], ",", 
          RowBox[{"Greater", "::", "nordol"}]}], "]"}]}], "\n", "\t\t\t\t", 
       ")"}], "&&", "\n", "\t\t\t", 
      RowBox[{"select", "[", "#", "]"}]}], "&"}], "\n", "\t\t\t", "]"}], "@", 
   "\n", "\t\t", 
   RowBox[{
    RowBox[{"SortBy", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"FileBaseName", "[", "#", "]"}], "===", "\"\<index\>\""}], 
      "&"}], "]"}], "@", "\n", "\t\t", 
    RowBox[{"Join", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"Sequence", "@@", "\n", "\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"FileNames", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
           "fileForms", ",", "\n", "\t\t\t\t\t", "#", ",", "\n", "\t\t\t\t\t",
             "\[Infinity]"}], "]"}], "&"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{"Flatten", "@", 
            RowBox[{"{", 
             RowBox[{"dir", ",", " ", "includes"}], "}"}]}], ",", " ", 
           "DirectoryQ"}], "]"}]}], "\n", "\t\t\t\t", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Select", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "includes"}]}], ",", " ", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"Not", "@", 
           RowBox[{"DirectoryQ", "[", "#", "]"}]}], "&&", "\n", "\t\t\t\t\t", 
          
          RowBox[{"StringMatchQ", "[", 
           RowBox[{"#", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"___", "~~", "fileForms"}]}], "\n", "\t\t\t\t\t\t", 
           "]"}]}], "&"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
     "]"}]}]}]}]], "CodeInput",
 CellChangeTimes->{{3.720636187965932*^9, 3.7206363170031443`*^9}, {
  3.7206366275312977`*^9, 
  3.720636632691968*^9}},ExpressionUUID->"1fd05cfd-ebb5-4887-89bf-\
ecc23d0139cb"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteDeployFile\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{
  3.720636070143309*^9},ExpressionUUID->"1591f99d-1e14-4abf-a5f4-\
da16dc8a4a0f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteDeployFile", "[", 
   RowBox[{
   "f_", ",", " ", "uri_", ",", " ", "outDir_", ",", " ", "trueDir_", ",", 
    " ", "stripDirs_", ",", " ", 
    RowBox[{"ops___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{"(*", " ", 
      RowBox[{"Build", " ", "export", " ", "URI"}], " ", "*)"}], "\n", "\t\t", 
     RowBox[{"url", ",", "\n", "\t\t", "perm"}], "\n", "\t\t", "}"}], ",", 
    "\n", "\t\t", 
    RowBox[{
     RowBox[{"url", "=", "\n", "\t\t\t", 
      RowBox[{"URLBuild", "@", "\n", "\t\t\t\t", 
       RowBox[{"Flatten", "@", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{"uri", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"FileBaseName", "[", "trueDir", "]"}]}]}], "\n", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileNameSplit", "@", "\n", "\t\t\t\t\t\t", 
           RowBox[{"FileNameDrop", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"f", ",", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"FileNameDepth", "@", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"SelectFirst", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                 RowBox[{"SortBy", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Minus", "@*", "FileNameDepth"}], "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", "]"}], "@", "\n", 
                 "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"Flatten", "@", 
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "outDir", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "trueDir", 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "stripDirs"}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "}"}]}]}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"StringStartsQ", "[", 
                  RowBox[{"f", ",", " ", "#"}], "]"}], "&"}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", "outDir"}], "\n", "\t\t\t\t\t\t\t\t\t", 
               "]"}]}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
         "\t\t\t\t\t", "}"}]}]}]}], ";", "\n", "\t\t", 
     RowBox[{"perm", "=", "\n", "\t\t\t", 
      RowBox[{"Lookup", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"ops", ",", " ", 
           RowBox[{"Options", "[", "WebSiteDeploy", "]"}]}], "}"}]}], ",", 
        "\n", "\t\t\t\t", "Permissions", ",", "\n", "\t\t\t\t", 
        "\"\<Private\>\""}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringQ", "@", "url"}], "&&", 
        RowBox[{"StringEndsQ", "[", 
         RowBox[{"url", ",", "\"\</index.html\>\""}], "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "make", " ", "sure", " ", "permissions", " ", "are", " ", "set", " ", 
         "correctly", " ", "on", " ", "the", " ", "main", " ", "page"}], " ", 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{"Quiet", "@", 
        RowBox[{"SetPermissions", "[", 
         RowBox[{
          RowBox[{"StringTrim", "[", 
           RowBox[{"url", ",", " ", "\"\</index.html\>\""}], "]"}], ",", " ", 
          "perm"}], "]"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Replace", "[", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"CloudObject", "[", 
           RowBox[{"c_", ",", " ", "___"}], "]"}], "\[RuleDelayed]", 
          RowBox[{"CloudObject", "[", "c", "]"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"e_", "\[RuleDelayed]", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"WebSiteDeploy", "::", "depfail"}], ",", " ", "f", ",", 
              " ", "url"}], "]"}], ";", "e"}], ")"}]}]}], "\n", "\t\t\t\t", 
        "}"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t\t", 
      RowBox[{"CopyFile", "[", "\n", "\t\t\t\t", 
       RowBox[{"f", ",", "\n", "\t\t\t\t", 
        RowBox[{"CloudObject", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"url", ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Flatten", "@", 
             RowBox[{"{", 
              RowBox[{"ops", ",", " ", 
               RowBox[{"Options", "[", "WebSiteDeploy", "]"}]}], "}"}]}], ",",
             "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"Options", "[", "CloudObject", "]"}]}], "\n", 
           "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"With", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"ext", "=", 
            RowBox[{"ToUpperCase", "@", 
             RowBox[{"FileExtension", "[", "f", "]"}]}]}], "}"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Quiet", "@", 
             RowBox[{"ImportExport`GetMIMEType", "[", "ext", "]"}]}], ",", 
            "\n", "\t\t\t\t\t\t", 
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"{", 
                RowBox[{"s_String", ",", " ", "___"}], "}"}], 
               "\[RuleDelayed]", 
               RowBox[{"(", 
                RowBox[{"\"\<MIMEType\>\"", "\[Rule]", "s"}], ")"}]}], ",", 
              "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"_", "\[RuleDelayed]", 
               RowBox[{"Sequence", "@@", 
                RowBox[{"{", "}"}]}]}]}], "\n", "\t\t\t\t\t\t\t", "}"}]}], 
           "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
       "\t\t\t\t", "]"}]}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"3469410f-8afb-4aed-83d5-0d7fd3261cc8"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"50a570fe-6981-4b6b-a304-5fe80e9ba4d0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteDeploy", "[", "\n", "\t", 
   RowBox[{
   "uri_", ",", " ", "outDir_", ",", " ", "trueDir_", ",", " ", "\n", "\t", 
    "last_", ",", " ", "select_", ",", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "WebSiteDeploy", "]"}]}]}], "]"}], ":=", 
  " ", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"KeychainConnect", "[", 
     RowBox[{"OptionValue", "[", "CloudConnect", "]"}], "]"}], ";", "\n", 
    "\t\t", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", "file", "}"}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", 
          RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"Function", "[", 
          RowBox[{"Null", ",", " ", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Monitor", "[", 
            RowBox[{"#", ",", " ", "\n", "\t", "\t\t\t\t\t", 
             RowBox[{"Internal`LoadingPanel", "[", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", 
               RowBox[{"\"\<Deploying ``\>\"", ",", "file"}], "]"}], "\n", 
              "\t", "\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t\t\t", "]"}], 
           ",", " ", "\n", "\t\t\t\t\t", "HoldAllComplete"}], "\n", 
          "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "Identity"}], "\n", 
        "\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"file", "=", "#"}], ";", "\n", "\t\t\t\t\t\t", 
           RowBox[{"webSiteDeployFile", "[", 
            RowBox[{
            "#", ",", "\n", "\t\t\t\t\t\t\t", "uri", ",", " ", "outDir", ",", 
             " ", "trueDir", ",", " ", 
             RowBox[{"OptionValue", "[", "\"\<StripDirectories\>\"", "]"}], 
             ",", " ", "\n", "\t\t\t\t\t\t\t", "ops"}], "\n", 
            "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
          "\t\t\t\t\t", 
         RowBox[{"webSiteDeploySelectFiles", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
          "outDir", ",", "\n", "\t\t\t\t\t\t", "last", ",", "\n", 
           "\t\t\t\t\t\t", "select", ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Alternatives", "@@", 
              RowBox[{"List", "@", 
               RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"OptionValue", "[", "FileNameForms", "]"}], ",", 
                 "\n", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{
                 "OptionValue", "[", "\"\<ExtraFileNameForms\>\"", "]"}]}], 
                "\n", "\t", "\t\t\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t", 
             "\t\t\t\t\t\t", 
             RowBox[{"All", "\[Rule]", "\"\<*\>\""}]}], "\n", "\t", "\t", 
            "\t", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "@", "\"\<AlwaysDeployForms\>\""}], ",", 
           "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "@", "\"\<IncludeFiles\>\""}]}], "\n", 
          "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", 
     "\t\t\t", "]"}]}], "\n", "\t\t", ")"}]}]], "CodeInput",
 CellChangeTimes->{{3.723087917100692*^9, 3.72308795809083*^9}, {
   3.723088025132*^9, 3.723088028415613*^9}, {3.7230880968367643`*^9, 
   3.7230881032000237`*^9}, 
   3.733697337051263*^9},ExpressionUUID->"737c592b-3f6d-4b32-8e1a-\
eebb939a6ef5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webGitHubDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"7eac3571-459e-47ca-b04e-d3a62e75a5d7"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"webGitHubDeploy", "[", "\n", "\t", 
    RowBox[{
    "uri_", ",", " ", "outDir_", ",", " ", "trueDir_", ",", " ", "\n", "\t", 
     "last_", ",", " ", "select_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "WebSiteDeploy", "]"}]}]}], "\n", "\t", 
    "]"}], ":=", " ", "\n", "\t", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "file", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", "\n", "\t\t\t", 
        
        RowBox[{"Function", "[", 
         RowBox[{"Null", ",", " ", "\n", "\t\t\t\t", 
          RowBox[{"Monitor", "[", 
           RowBox[{"#", ",", " ", "\n", "\t\t\t\t\t", 
            RowBox[{"Internal`LoadingPanel", "[", "\n", "\t\t\t\t\t\t", 
             RowBox[{"TemplateApply", "[", 
              RowBox[{"\"\<Deploying ``\>\"", ",", "file"}], "]"}], "\n", 
             "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", " ", 
          "\n", "\t\t\t\t", "HoldAllComplete"}], "\n", "\t\t\t\t", "]"}], ",",
         "\n", "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", 
      "\t\t\t", 
      RowBox[{"Map", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Function", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"file", "=", "#"}], ";", "\n", "\t\t\t\t\t", 
          RowBox[{"webSiteDeployFile", "[", 
           RowBox[{
           "#", ",", "\n", "\t\t\t\t\t\t", "uri", ",", " ", "outDir", ",", 
            " ", "trueDir", ",", " ", 
            RowBox[{"OptionValue", "[", "\"\<StripDirectories\>\"", "]"}], 
            ",", " ", "\n", "\t\t\t\t\t\t", "ops"}], "\n", "\t\t\t\t\t\t", 
           "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"webSiteDeploySelectFiles", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "outDir", ",", "\n", "\t\t\t\t\t", "last", ",", "\n", "\t\t\t\t\t", 
          "select", ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Alternatives", "@@", 
             RowBox[{"List", "@", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"OptionValue", "[", "FileNameForms", "]"}], ",", "\n",
                 "\t\t\t\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ExtraFileNameForms\>\"", "]"}]}], 
               "\n", "\t\t\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"All", "\[Rule]", "\"\<*\>\""}]}], "\n", "\t", "\t", 
           "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"OptionValue", "@", "\"\<AlwaysDeployForms\>\""}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"OptionValue", "@", "\"\<IncludeFiles\>\""}]}], "\n", 
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}]}], "\n", "\t\t", 
    "]"}]}], 
  "*)"}]], "CodeInput",ExpressionUUID->"25ffec1f-4c5e-420e-bf1c-76a062f46225"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.720636070143309*^9, 
  3.720636079373775*^9}},ExpressionUUID->"248e5562-8918-4782-bf0f-\
7710737b1215"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebFileFormats", "=", "\n", "\t", 
   RowBox[{
   "\"\<html\>\"", "|", "\"\<css\>\"", "|", "\"\<js\>\"", "|", "\"\<xml\>\"", 
    "|", "\"\<json\>\"", "|", "\n", "\t", "\"\<png\>\"", "|", "\"\<jpg\>\"", 
    "|", "\"\<gif\>\"", "|", "\n", "\t", "\"\<woff\>\"", "|", "\"\<tff\>\"", 
    "|", "\"\<eot\>\"", "|", "\"\<svg\>\""}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"f28bee9c-269d-41b5-a11c-af6be094a7e3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteDeploy", "]"}], "=", "\n", "\t", 
   RowBox[{"Join", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"FileNameForms", "\[Rule]", 
        RowBox[{"\"\<*.\>\"", "~~", "$WebFileFormats"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"\"\<ExtraFileNameForms\>\"", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"Select", "\[Rule]", 
        RowBox[{"(", 
         RowBox[{"True", "&"}], ")"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CloudConnect", "\[Rule]", "False"}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<LastDeployment\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"\"\<AlwaysDeployForms\>\"", "\[Rule]", "\"\<\>\""}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"\"\<OutputDirectory\>\"", "\[Rule]", "Automatic"}], ",", "\n",
        "\t\t\t", 
       RowBox[{"\"\<IncludeFiles\>\"", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<StripDirectories\>\"", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"Permissions", "\[Rule]", "\"\<Public\>\""}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t\t", "}"}], ",", 
     "\n", "\t\t", 
     RowBox[{"Options", "[", "CloudObject", "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteDeploy", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"outDir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     RowBox[{"uri", ":", 
      RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
     "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"trueDir", "=", "\n", "\t\t\t\t", 
        RowBox[{"With", "[", 
         RowBox[{
          RowBox[{"{", "\n", "\t\t\t\t\t", 
           RowBox[{"ext", "=", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"OptionValue", "[", "\"\<OutputDirectory\>\"", "]"}], 
              ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                "Automatic", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                 "\"\<output\>\""}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"_String", "?", "DirectoryQ"}], "|", 
                  RowBox[{"Except", "[", "_String", "]"}]}], "\[Rule]", 
                 "\"\<\>\""}]}], "\n", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "}"}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"StringEndsQ", "[", 
              RowBox[{"outDir", ",", " ", "ext"}], "]"}], "&&", 
             RowBox[{
              RowBox[{"FileNameDepth", "[", "ext", "]"}], ">", "0"}]}], ",", 
            "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameDrop", "[", 
             RowBox[{"outDir", ",", " ", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"-", 
               RowBox[{"FileNameDepth", "[", "ext", "]"}]}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", "outDir"}], 
           "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", 
       "\n", "\t\t\t", "info", ",", "\n", "\t\t\t", "select", ",", "\n", "\t",
        "\t\t", "last"}], "\n", "\t", "\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"info", "=", "\n", "\t\t\t", 
       RowBox[{"Which", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"FileExistsQ", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", " ", "\"\<DeploymentInfo.wl\>\""}], 
            "}"}]}], "]"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Import", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", " ", "\"\<DeploymentInfo.wl\>\""}], 
            "}"}]}], "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"FileExistsQ", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}], 
          "]"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Import", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}], 
          "]"}], ",", "\n", "\t\t\t\t", "True", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"{", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FileExistsQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}]}], 
        ",", "\n", "\t\t\t", 
        RowBox[{"DeleteFile", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}]}]}], 
       "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"Export", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"trueDir", ",", "\"\<DeploymentInfo.wl\>\""}], "}"}]}], ",",
         "\n", "\t\t\t", 
        RowBox[{"KeyDrop", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Association", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "\n", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Normal", "@", "info"}], ",", "\n", "\t\t\t\t\t\t", 
              "ops", ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"\"\<LastDeployment\>\"", "\[Rule]", "Now"}]}], "\n", 
             "\t\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t\t\t\t", 
          RowBox[{"{", 
           RowBox[{"FileNameForms", ",", "\"\<ExtraFileNameForms\>\""}], 
           "}"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", 
      "\n", "\t\t", 
      RowBox[{"select", "=", 
       RowBox[{"OptionValue", "[", "Select", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"last", "=", 
       RowBox[{"First", "@", 
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "\n", "\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{
            RowBox[{"OptionValue", "[", "\"\<LastDeployment\>\"", "]"}], ",", 
            "\n", "\t\t\t\t", 
            RowBox[{"Automatic", ":>", 
             RowBox[{"Lookup", "[", 
              RowBox[{"info", ",", "\"\<LastDeployment\>\"", ",", "None"}], 
              "]"}]}]}], "\n", "\t\t\t\t", "]"}]}]}]}]}], ";", "\n", "\t\t", 
      RowBox[{"webSiteDeploy", "[", 
       RowBox[{
       "uri", ",", " ", "outDir", ",", " ", "trueDir", ",", " ", "\n", 
        "\t\t\t", "last", ",", " ", "select", ",", "\n", "\t\t\t", 
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"ops", ",", "\n", "\t\t\t\t", 
           RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"Quiet", "@", 
                RowBox[{"Import", "[", 
                 RowBox[{"trueDir", ",", " ", "\"\<SiteConfig.wl\>\""}], 
                 "]"}]}], ",", "\n", "\t", "\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Except", "[", 
                 RowBox[{"_", "?", "OptionQ"}], "]"}], "\[RuleDelayed]", 
                RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", 
             "\n", "\t\t\t\t\t", "\"\<DeployOptions\>\"", ",", "\n", 
             "\t\t\t\t\t", 
             RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
          "\t\t\t\t", "}"}]}]}], "\n", "\t\t\t", "]"}]}]}], "\n", "\t\t", 
    "]"}]}], ";"}]}], \
"CodeInput",ExpressionUUID->"967ab656-4fa9-41d0-93a8-c47292ee5832"]
}, Closed]]
}, Closed]]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"End", "[", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"0f84f31e-20fb-4451-b29e-\
2ef5407501e1"]
}, Open  ]],

Cell["", "SectionSeparator",ExpressionUUID->"4900c668-e5de-468b-908d-\
3bbe427549a1"]
},
WindowSize->{808, 756},
WindowMargins->{{37, Automatic}, {29, Automatic}},
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, \
2018)",
StyleDefinitions->FrontEnd`FileName[{"BTools"}, "CodePackage.nb", 
  CharacterEncoding -> "UTF-8"]
]

